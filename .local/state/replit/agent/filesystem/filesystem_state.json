{"file_contents":{"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1486,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"pg\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1417,"size_tokens":null},"client/src/pages/LandlordCreateListing.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { ArrowLeft, Upload, Check } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function LandlordCreateListing() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [location, setLocation] = useLocation();\n\n  const [formData, setFormData] = useState({\n    title: \"\",\n    city: \"\",\n    area: \"\",\n    price: \"\",\n    bedrooms: 1,\n    bathrooms: 1,\n    type: \"Apartment\",\n    description: \"\",\n    furnished: true,\n    pets: false,\n    amenities: \"\",\n  });\n\n  const createMutation = useMutation({\n    mutationFn: (property: any) => api.createProperty(property),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"landlordProperties\"] });\n      toast({\n        title: \"Success\",\n        description: \"Property created successfully!\",\n      });\n      setLocation(\"/landlord/listings\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to create property\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    const propertyData = {\n      title: formData.title,\n      city: formData.city,\n      area: formData.area || formData.city,\n      price: parseInt(formData.price),\n      beds: formData.bedrooms,\n      baths: formData.bathrooms,\n      type: formData.type,\n      description: formData.description,\n      furnished: formData.furnished,\n      pets: formData.pets,\n      images: [\n        \"https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=800&q=80\",\n        \"https://images.unsplash.com/photo-1505691938895-1758d7feb511?auto=format&fit=crop&w=800&q=80\"\n      ],\n    };\n\n    createMutation.mutate(propertyData);\n  };\n\n  return (\n    <div className=\"min-h-full bg-gray-50 pb-24\">\n      <header className=\"fixed top-0 left-0 right-0 h-14 bg-white z-40 flex items-center px-4 border-b border-gray-100\">\n        <Link href=\"/landlord/listings\" className=\"p-2 text-gray-600 hover:text-gray-900\">\n          <ArrowLeft size={24} />\n        </Link>\n        <h1 className=\"ml-2 text-lg font-bold text-gray-900\">{t(\"action.addListing\")}</h1>\n      </header>\n\n      <main className=\"pt-20 px-6 max-w-md mx-auto\">\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          \n          {/* Image Picker Mock */}\n          <div className=\"w-full aspect-video bg-gray-100 rounded-2xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center text-gray-400 cursor-pointer hover:bg-gray-50 hover:border-primary/50 hover:text-primary transition-all\">\n            <div className=\"w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-sm mb-2\">\n              <Upload size={20} />\n            </div>\n            <span className=\"text-sm font-semibold\">Upload Photos</span>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-bold text-gray-700\">{t(\"form.title\")}</label>\n              <input \n                type=\"text\" \n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                className=\"w-full p-4 rounded-xl bg-white border border-gray-200 focus:border-primary outline-none transition-colors\" \n                placeholder=\"e.g. Modern Loft...\" \n                required \n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-bold text-gray-700\">{t(\"form.city\")}</label>\n                <input \n                  type=\"text\" \n                  value={formData.city}\n                  onChange={(e) => setFormData({ ...formData, city: e.target.value })}\n                  className=\"w-full p-4 rounded-xl bg-white border border-gray-200 focus:border-primary outline-none transition-colors\" \n                  required \n                />\n              </div>\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-bold text-gray-700\">{t(\"form.price\")}</label>\n                <input \n                  type=\"number\" \n                  value={formData.price}\n                  onChange={(e) => setFormData({ ...formData, price: e.target.value })}\n                  className=\"w-full p-4 rounded-xl bg-white border border-gray-200 focus:border-primary outline-none transition-colors\" \n                  placeholder=\"€\" \n                  required \n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-bold text-gray-700\">{t(\"prop.beds\")}</label>\n                <div className=\"flex items-center gap-2 bg-white p-2 rounded-xl border border-gray-200\">\n                   <button \n                     type=\"button\" \n                     onClick={() => setFormData({ ...formData, bedrooms: Math.max(1, formData.bedrooms - 1) })}\n                     className=\"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-lg text-gray-600 font-bold hover:bg-gray-200\"\n                   >\n                     -\n                   </button>\n                   <span className=\"flex-1 text-center font-bold\">{formData.bedrooms}</span>\n                   <button \n                     type=\"button\" \n                     onClick={() => setFormData({ ...formData, bedrooms: formData.bedrooms + 1 })}\n                     className=\"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-lg text-gray-600 font-bold hover:bg-gray-200\"\n                   >\n                     +\n                   </button>\n                </div>\n              </div>\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-bold text-gray-700\">{t(\"prop.baths\")}</label>\n                <div className=\"flex items-center gap-2 bg-white p-2 rounded-xl border border-gray-200\">\n                   <button \n                     type=\"button\" \n                     onClick={() => setFormData({ ...formData, bathrooms: Math.max(1, formData.bathrooms - 1) })}\n                     className=\"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-lg text-gray-600 font-bold hover:bg-gray-200\"\n                   >\n                     -\n                   </button>\n                   <span className=\"flex-1 text-center font-bold\">{formData.bathrooms}</span>\n                   <button \n                     type=\"button\" \n                     onClick={() => setFormData({ ...formData, bathrooms: formData.bathrooms + 1 })}\n                     className=\"w-8 h-8 flex items-center justify-center bg-gray-100 rounded-lg text-gray-600 font-bold hover:bg-gray-200\"\n                   >\n                     +\n                   </button>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-bold text-gray-700\">{t(\"form.desc\")}</label>\n              <textarea \n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                className=\"w-full p-4 rounded-xl bg-white border border-gray-200 focus:border-primary outline-none transition-colors min-h-[120px]\" \n                placeholder=\"Tell us about the property...\" \n              />\n            </div>\n\n            <div \n              onClick={() => setFormData({ ...formData, furnished: !formData.furnished })}\n              className=\"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200 cursor-pointer\"\n            >\n               <span className=\"font-semibold text-gray-700\">{t(\"prop.furnished\")}</span>\n               <div className={`w-12 h-7 rounded-full relative transition-colors ${formData.furnished ? 'bg-primary' : 'bg-gray-300'}`}>\n                 <div className={`absolute top-1 w-5 h-5 bg-white rounded-full shadow-sm transition-all ${formData.furnished ? 'right-1' : 'left-1'}`} />\n               </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-bold text-gray-700\">{t(\"form.amenities\")}</label>\n              <textarea \n                value={formData.amenities}\n                onChange={(e) => setFormData({ ...formData, amenities: e.target.value })}\n                className=\"w-full p-4 rounded-xl bg-white border border-gray-200 focus:border-primary outline-none transition-colors min-h-[80px]\" \n                placeholder=\"e.g. Balcony, Dishwasher, Elevator...\" \n              />\n            </div>\n          </div>\n\n          <button \n            type=\"submit\" \n            disabled={createMutation.isPending}\n            className=\"w-full bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {createMutation.isPending ? \"Creating...\" : t(\"action.submit\")}\n          </button>\n\n        </form>\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":9498,"size_tokens":null},"client/src/pages/LandlordHome.tsx":{"content":"import { useState } from \"react\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { BottomNav, TopBar } from \"@/components/Layout\";\nimport { SwipeCard } from \"@/components/SwipeCard\";\nimport { FilterSheet, FilterOptions } from \"@/components/FilterSheet\";\nimport { X, Check, Users } from \"lucide-react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function LandlordHome() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [filters, setFilters] = useState<FilterOptions | null>(null);\n\n  const handleApplyFilters = (newFilters: FilterOptions) => {\n    setFilters(newFilters);\n    toast({\n      title: \"Filters Applied\",\n      description: \"Your search preferences have been updated\",\n    });\n  };\n\n  const { data: tenants = [], isLoading, refetch } = useQuery({\n    queryKey: [\"roommates\"],\n    queryFn: api.getRoommates,\n  });\n\n  const filteredTenants = tenants.filter(tenant => {\n    if (!filters) return true;\n    const t = tenant as any;\n    if (filters.ageRange && t.age && (t.age < filters.ageRange[0] || t.age > filters.ageRange[1])) return false;\n    if (filters.gender && t.gender && t.gender !== filters.gender) return false;\n    return true;\n  });\n\n  const swipeMutation = useMutation({\n    mutationFn: ({ targetId, action }: { targetId: string, action: 'like' | 'skip' }) =>\n      api.swipe(\"roommate\", targetId, action),\n    onSuccess: () => {\n      refetch();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to process swipe\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSwipe = (direction: \"left\" | \"right\") => {\n    if (filteredTenants.length > 0) {\n      const tenant = filteredTenants[0];\n      swipeMutation.mutate({\n        targetId: tenant.id,\n        action: direction === \"right\" ? \"like\" : \"skip\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"min-h-full bg-gray-50 pb-20\">\n      <header className=\"fixed top-0 left-0 right-0 h-14 bg-white/80 backdrop-blur-md z-40 flex items-center justify-between px-4 border-b border-gray-50\">\n        <div className=\"w-10\"></div>\n        <h1 className=\"text-lg font-bold text-gray-900\" data-testid=\"text-find-tenants\">Find Tenants</h1>\n        <div className=\"w-10 flex justify-end\">\n          <FilterSheet \n            type=\"roommate\" \n            onApply={handleApplyFilters}\n            currentFilters={filters}\n          />\n        </div>\n      </header>\n\n      <main className=\"h-[calc(100vh-140px)] w-full max-w-md mx-auto pt-20 px-4 flex flex-col items-center justify-center relative\">\n        {isLoading ? (\n          <div className=\"text-center p-8\">\n            <div className=\"w-12 h-12 border-4 border-secondary border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n            <p className=\"text-gray-500\">Loading tenants...</p>\n          </div>\n        ) : (\n          <AnimatePresence>\n            {filteredTenants.length > 0 ? (\n              <div className=\"relative w-full h-[65vh]\">\n                {filteredTenants.slice(0, 2).reverse().map((tenant, index) => (\n                   <SwipeCard \n                     key={tenant.id} \n                     data={tenant} \n                     type=\"tenant\" \n                     onSwipe={handleSwipe} \n                   />\n                ))}\n              </div>\n            ) : (\n              <motion.div \n                initial={{ opacity: 0 }} \n                animate={{ opacity: 1 }}\n                className=\"text-center p-8\"\n              >\n                <div className=\"w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center\">\n                  <Users className=\"text-gray-400\" size={32} />\n                </div>\n                <h3 className=\"text-xl font-bold text-gray-900 mb-2\">No more tenants</h3>\n                <p className=\"text-gray-500\">{t(\"empty.checkLater\")}</p>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        )}\n\n        {/* Action Buttons */}\n        {!isLoading && filteredTenants.length > 0 && (\n          <div className=\"mt-8 flex items-center gap-6 z-10\">\n            <button \n              onClick={() => handleSwipe(\"left\")}\n              disabled={swipeMutation.isPending}\n              className=\"w-16 h-16 rounded-full bg-white shadow-lg flex items-center justify-center text-red-500 hover:bg-red-50 transition-colors border border-red-100 disabled:opacity-50\"\n              data-testid=\"button-swipe-left\"\n            >\n              <X size={32} strokeWidth={2.5} />\n            </button>\n            <button \n              onClick={() => handleSwipe(\"right\")}\n              disabled={swipeMutation.isPending}\n              className=\"w-16 h-16 rounded-full bg-green-500 shadow-lg shadow-green-500/30 flex items-center justify-center text-white hover:scale-105 transition-transform disabled:opacity-50\"\n              data-testid=\"button-swipe-right\"\n            >\n              <Check size={32} strokeWidth={3} />\n            </button>\n          </div>\n        )}\n      </main>\n\n      <BottomNav role=\"landlord\" />\n    </div>\n  );\n}\n","path":null,"size_bytes":5270,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1419,"size_tokens":null},"client/src/pages/Profile.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { BottomNav, TopBar } from \"@/components/Layout\";\nimport { useLocation } from \"wouter\";\nimport { Settings, LogOut, Globe, Shield, HelpCircle, ChevronRight, RefreshCcw, Bell, BellOff } from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { useState, useEffect } from \"react\";\nimport { initializePushNotifications, isPushSupported, getPushPermissionState } from \"@/lib/pushNotifications\";\nimport { initializeCapacitorPush, isCapacitorPlatform } from \"@/lib/capacitorPush\";\n\nexport default function Profile({ role }: { role: \"tenant\" | \"landlord\" }) {\n  const { t, language, setLanguage } = useLanguage();\n  const [, setLocation] = useLocation();\n  const { user, logout } = useAuth();\n  const queryClient = useQueryClient();\n  const [pushEnabled, setPushEnabled] = useState(false);\n  const [pushLoading, setPushLoading] = useState(false);\n\n  useEffect(() => {\n    getPushPermissionState().then(state => {\n      setPushEnabled(state === 'granted');\n    });\n  }, []);\n\n  const handleEnablePush = async () => {\n    setPushLoading(true);\n    try {\n      let success = false;\n      if (isCapacitorPlatform()) {\n        success = await initializeCapacitorPush();\n      } else if (isPushSupported()) {\n        success = await initializePushNotifications();\n      } else {\n        alert('Push notifications are not supported on this device');\n        setPushLoading(false);\n        return;\n      }\n      setPushEnabled(success);\n    } catch (error) {\n      console.error('Failed to enable push notifications:', error);\n    }\n    setPushLoading(false);\n  };\n\n  const handleLogout = async () => {\n    queryClient.clear();\n    await logout();\n    window.location.href = \"/\";\n  };\n\n  const switchRole = () => {\n    setLocation(role === \"tenant\" ? \"/landlord\" : \"/tenant\");\n  };\n\n  return (\n    <div className=\"min-h-full bg-gray-50 pb-20\">\n      <TopBar title={t(\"nav.profile\")} />\n\n      <main className=\"pt-24 px-4 max-w-md mx-auto\">\n        \n        {/* Profile Header */}\n        <div className=\"flex flex-col items-center mb-8\">\n          <div className=\"w-24 h-24 rounded-full bg-gray-200 mb-4 border-4 border-white shadow-md overflow-hidden relative\">\n            {user?.profileImageUrl ? (\n              <img src={user.profileImageUrl} alt={user.name || 'User'} className=\"w-full h-full object-cover\" data-testid=\"img-profile\" />\n            ) : user?.images && user.images.length > 0 ? (\n              <img src={user.images[0]} alt={user.name || 'User'} className=\"w-full h-full object-cover\" data-testid=\"img-profile\" />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center bg-primary/10 text-primary text-3xl font-bold\" data-testid=\"text-profile-initial\">\n                {user?.name?.charAt(0)?.toUpperCase() || user?.firstName?.charAt(0)?.toUpperCase() || 'U'}\n              </div>\n            )}\n            <div className=\"absolute bottom-0 right-0 w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center border-2 border-white\">\n              <Settings size={14} />\n            </div>\n          </div>\n          <h2 className=\"text-2xl font-bold text-gray-900\" data-testid=\"text-username\">{user?.name || `${user?.firstName || ''} ${user?.lastName || ''}`.trim() || 'User'}</h2>\n          <p className=\"text-gray-500 font-medium\" data-testid=\"text-role\">{role === \"tenant\" ? \"Tenant\" : \"Landlord\"} {user?.city ? `• ${user.city}` : ''}</p>\n        </div>\n\n        {/* Menu */}\n        <div className=\"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden mb-6\">\n          <button \n            onClick={switchRole}\n            className=\"w-full p-5 flex items-center gap-4 hover:bg-gray-50 transition-colors border-b border-gray-50\"\n          >\n            <div className=\"w-10 h-10 rounded-full bg-indigo-50 text-indigo-500 flex items-center justify-center\">\n              <RefreshCcw size={20} />\n            </div>\n            <div className=\"flex-1 text-left\">\n              <h3 className=\"font-bold text-gray-900\">Switch Role</h3>\n              <p className=\"text-xs text-gray-500\">Currently: {role === \"tenant\" ? \"Tenant\" : \"Landlord\"}</p>\n            </div>\n            <ChevronRight size={20} className=\"text-gray-300\" />\n          </button>\n\n          <button \n            onClick={() => setLanguage(language === \"en\" ? \"it\" : \"en\")}\n            className=\"w-full p-5 flex items-center gap-4 hover:bg-gray-50 transition-colors border-b border-gray-50\"\n          >\n            <div className=\"w-10 h-10 rounded-full bg-blue-50 text-blue-500 flex items-center justify-center\">\n              <Globe size={20} />\n            </div>\n            <div className=\"flex-1 text-left\">\n              <h3 className=\"font-bold text-gray-900\">Language</h3>\n              <p className=\"text-xs text-gray-500\">{language === \"en\" ? \"English\" : \"Italiano\"}</p>\n            </div>\n            <span className=\"font-bold text-gray-400 text-sm\">{language.toUpperCase()}</span>\n          </button>\n\n          <button \n            onClick={handleEnablePush}\n            disabled={pushLoading || pushEnabled}\n            className=\"w-full p-5 flex items-center gap-4 hover:bg-gray-50 transition-colors border-b border-gray-50 disabled:opacity-50\"\n            data-testid=\"button-push-notifications\"\n          >\n            <div className={`w-10 h-10 rounded-full flex items-center justify-center ${pushEnabled ? 'bg-green-50 text-green-500' : 'bg-yellow-50 text-yellow-500'}`}>\n              {pushEnabled ? <Bell size={20} /> : <BellOff size={20} />}\n            </div>\n            <div className=\"flex-1 text-left\">\n              <h3 className=\"font-bold text-gray-900\">Push Notifications</h3>\n              <p className=\"text-xs text-gray-500\">\n                {pushLoading ? 'Enabling...' : pushEnabled ? 'Enabled' : 'Tap to enable'}\n              </p>\n            </div>\n            {!pushEnabled && <ChevronRight size={20} className=\"text-gray-300\" />}\n          </button>\n\n          <button \n            onClick={() => setLocation(`/${role}/privacy`)}\n            className=\"w-full p-5 flex items-center gap-4 hover:bg-gray-50 transition-colors border-b border-gray-50\"\n            data-testid=\"button-privacy\"\n          >\n            <div className=\"w-10 h-10 rounded-full bg-purple-50 text-purple-500 flex items-center justify-center\">\n              <Shield size={20} />\n            </div>\n            <div className=\"flex-1 text-left\">\n              <h3 className=\"font-bold text-gray-900\">Privacy & Security</h3>\n            </div>\n            <ChevronRight size={20} className=\"text-gray-300\" />\n          </button>\n\n          <button \n            onClick={() => setLocation(`/${role}/help`)}\n            className=\"w-full p-5 flex items-center gap-4 hover:bg-gray-50 transition-colors\"\n            data-testid=\"button-help\"\n          >\n            <div className=\"w-10 h-10 rounded-full bg-orange-50 text-orange-500 flex items-center justify-center\">\n              <HelpCircle size={20} />\n            </div>\n            <div className=\"flex-1 text-left\">\n              <h3 className=\"font-bold text-gray-900\">Help & Support</h3>\n            </div>\n            <ChevronRight size={20} className=\"text-gray-300\" />\n          </button>\n        </div>\n\n        <button \n          onClick={handleLogout}\n          className=\"w-full p-4 rounded-2xl bg-red-50 text-red-500 font-bold hover:bg-red-100 transition-colors flex items-center justify-center gap-2\"\n          data-testid=\"button-logout\"\n        >\n          <LogOut size={20} />\n          {t(\"action.logout\")}\n        </button>\n\n      </main>\n\n      <BottomNav role={role} />\n    </div>\n  );\n}\n","path":null,"size_bytes":7743,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, boolean, timestamp, index, jsonb } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table for Replit Auth\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: text(\"email\").unique(),\n  role: text(\"role\"), // 'tenant' or 'landlord' - set after first login\n  name: text(\"name\"),\n  firstName: text(\"first_name\"),\n  lastName: text(\"last_name\"),\n  profileImageUrl: text(\"profile_image_url\"),\n  age: integer(\"age\"),\n  city: text(\"city\"),\n  occupation: text(\"occupation\"),\n  bio: text(\"bio\"),\n  budget: integer(\"budget\"),\n  lookingFor: text(\"looking_for\").array(), // ['homes', 'roommates'] for tenants\n  images: text(\"images\").array(),\n  // Property preferences (for tenants looking for homes)\n  propertyPrefs: jsonb(\"property_prefs\"), // { minPrice, maxPrice, propertyTypes, minBeds, furnished, petsAllowed }\n  // Roommate preferences (for tenants looking for roommates)\n  roommatePrefs: jsonb(\"roommate_prefs\"), // { ageRange, lifestyle, habits }\n  // Premium/subscription fields\n  isPremium: boolean(\"is_premium\").default(false),\n  swipeCount: integer(\"swipe_count\").default(0),\n  lastSwipeReset: timestamp(\"last_swipe_reset\").defaultNow(),\n  premiumUntil: timestamp(\"premium_until\"),\n  stripeCustomerId: text(\"stripe_customer_id\"),\n  stripeSubscriptionId: text(\"stripe_subscription_id\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const properties = pgTable(\"properties\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  landlordId: varchar(\"landlord_id\").notNull().references(() => users.id),\n  title: text(\"title\").notNull(),\n  city: text(\"city\").notNull(),\n  area: text(\"area\").notNull(),\n  price: integer(\"price\").notNull(),\n  beds: integer(\"beds\").notNull(),\n  baths: integer(\"baths\").notNull(),\n  type: text(\"type\").notNull(), // 'apartment', 'house', etc.\n  description: text(\"description\"),\n  amenities: text(\"amenities\"),\n  furnished: boolean(\"furnished\").default(false),\n  petsAllowed: boolean(\"pets_allowed\").default(false),\n  images: text(\"images\").array(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const roommates = pgTable(\"roommates\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  name: text(\"name\").notNull(),\n  age: integer(\"age\").notNull(),\n  occupation: text(\"occupation\").notNull(),\n  bio: text(\"bio\").notNull(),\n  budget: integer(\"budget\").notNull(),\n  moveInDate: text(\"move_in_date\").notNull(),\n  preferences: text(\"preferences\").array().notNull(),\n  images: text(\"images\").array().notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const swipes = pgTable(\"swipes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  targetType: text(\"target_type\").notNull(), // 'property' or 'roommate'\n  targetId: varchar(\"target_id\").notNull(), // property or roommate id\n  action: text(\"action\").notNull(), // 'like' or 'skip'\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const matches = pgTable(\"matches\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  user1Id: varchar(\"user1_id\").notNull().references(() => users.id),\n  user2Id: varchar(\"user2_id\").notNull().references(() => users.id),\n  relatedType: text(\"related_type\"), // 'property' or 'roommate' (optional context)\n  relatedId: varchar(\"related_id\"), // id of property/roommate that caused match\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const favorites = pgTable(\"favorites\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  propertyId: varchar(\"property_id\").notNull().references(() => properties.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const messages = pgTable(\"messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  matchId: varchar(\"match_id\").notNull().references(() => matches.id),\n  senderId: varchar(\"sender_id\").notNull().references(() => users.id),\n  content: text(\"content\").notNull(),\n  readAt: timestamp(\"read_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const reports = pgTable(\"reports\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  reporterId: varchar(\"reporter_id\").notNull().references(() => users.id),\n  reportedUserId: varchar(\"reported_user_id\").notNull().references(() => users.id),\n  reason: text(\"reason\").notNull(),\n  description: text(\"description\"),\n  status: text(\"status\").default(\"pending\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const blocks = pgTable(\"blocks\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  blockerId: varchar(\"blocker_id\").notNull().references(() => users.id),\n  blockedId: varchar(\"blocked_id\").notNull().references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const pushSubscriptions = pgTable(\"push_subscriptions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  endpoint: text(\"endpoint\").notNull(),\n  p256dh: text(\"p256dh\").notNull(),\n  auth: text(\"auth\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertPropertySchema = createInsertSchema(properties).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertRoommateSchema = createInsertSchema(roommates).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertSwipeSchema = createInsertSchema(swipes).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertMatchSchema = createInsertSchema(matches).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertFavoriteSchema = createInsertSchema(favorites).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertMessageSchema = createInsertSchema(messages).omit({\n  id: true,\n  createdAt: true,\n  readAt: true,\n});\n\nexport const insertReportSchema = createInsertSchema(reports).omit({\n  id: true,\n  createdAt: true,\n  status: true,\n});\n\nexport const insertBlockSchema = createInsertSchema(blocks).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertPushSubscriptionSchema = createInsertSchema(pushSubscriptions).omit({\n  id: true,\n  createdAt: true,\n});\n\n// Types\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\n\nexport type InsertProperty = z.infer<typeof insertPropertySchema>;\nexport type Property = typeof properties.$inferSelect;\n\nexport type InsertRoommate = z.infer<typeof insertRoommateSchema>;\nexport type Roommate = typeof roommates.$inferSelect;\n\nexport type InsertSwipe = z.infer<typeof insertSwipeSchema>;\nexport type Swipe = typeof swipes.$inferSelect;\n\nexport type InsertMatch = z.infer<typeof insertMatchSchema>;\nexport type Match = typeof matches.$inferSelect;\n\nexport type InsertFavorite = z.infer<typeof insertFavoriteSchema>;\nexport type Favorite = typeof favorites.$inferSelect;\n\nexport type InsertMessage = z.infer<typeof insertMessageSchema>;\nexport type Message = typeof messages.$inferSelect;\n\nexport type InsertReport = z.infer<typeof insertReportSchema>;\nexport type Report = typeof reports.$inferSelect;\n\nexport type InsertBlock = z.infer<typeof insertBlockSchema>;\nexport type Block = typeof blocks.$inferSelect;\n\nexport type InsertPushSubscription = z.infer<typeof insertPushSubscriptionSchema>;\nexport type PushSubscription = typeof pushSubscriptions.$inferSelect;\n","path":null,"size_bytes":8231,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1148,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":266,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7406,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1410,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"server/db.ts":{"content":"import { drizzle } from \"drizzle-orm/node-postgres\";\nimport pg from \"pg\";\nimport * as schema from \"@shared/schema\";\n\nconst { Pool } = pg;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":399,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":792,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/lib/i18n.tsx":{"content":"import { createContext, useContext, useState, ReactNode } from \"react\";\n\ntype Language = \"en\" | \"it\";\n\ntype Translations = {\n  [key: string]: {\n    en: string;\n    it: string;\n  };\n};\n\nconst translations: Translations = {\n  // Auth & General\n  \"app.name\": { en: \"Tenant\", it: \"Tenant\" },\n  \"app.tagline\": { en: \"Find homes with a swipe\", it: \"Trova casa con uno swipe\" },\n  \"auth.signIn\": { en: \"Sign In\", it: \"Accedi\" },\n  \"auth.createAccount\": { en: \"Create an account\", it: \"Crea un account\" },\n  \"auth.email\": { en: \"Email\", it: \"Email\" },\n  \"auth.password\": { en: \"Password\", it: \"Password\" },\n  \"auth.continue\": { en: \"Continue\", it: \"Continua\" },\n  \n  // Roles\n  \"role.title\": { en: \"Choose your role\", it: \"Scegli il tuo ruolo\" },\n  \"role.tenant\": { en: \"Tenant\", it: \"Inquilino\" },\n  \"role.landlord\": { en: \"Landlord\", it: \"Proprietario\" },\n  \n  // Actions\n  \"action.like\": { en: \"Like\", it: \"Mi piace\" },\n  \"action.skip\": { en: \"Skip\", it: \"Salta\" },\n  \"action.save\": { en: \"Save\", it: \"Salva\" },\n  \"action.saved\": { en: \"Saved\", it: \"Salvata\" },\n  \"action.contact\": { en: \"Contact owner\", it: \"Contatta proprietario\" },\n  \"action.contactRoommate\": { en: \"Contact roommate\", it: \"Contatta coinquilino\" },\n  \"action.addListing\": { en: \"Add listing\", it: \"Aggiungi annuncio\" },\n  \"action.submit\": { en: \"Submit\", it: \"Invia\" },\n  \"action.logout\": { en: \"Log out\", it: \"Esci\" },\n  \n  // Navigation\n  \"nav.home\": { en: \"Home\", it: \"Home\" },\n  \"nav.favorites\": { en: \"Favorites\", it: \"Preferiti\" },\n  \"nav.matches\": { en: \"Matches\", it: \"Match\" },\n  \"nav.profile\": { en: \"Profile\", it: \"Profilo\" },\n  \"nav.listings\": { en: \"Listings\", it: \"Annunci\" },\n\n  // Tenant Toggle\n  \"tenant.toggle.homes\": { en: \"Homes\", it: \"Case\" },\n  \"tenant.toggle.roommates\": { en: \"Roommates\", it: \"Coinquilini\" },\n  \n  // Property Details\n  \"prop.furnished\": { en: \"Furnished\", it: \"Arredata\" },\n  \"prop.pets\": { en: \"Pets allowed\", it: \"Animali ammessi\" },\n  \"prop.beds\": { en: \"beds\", it: \"camere\" },\n  \"prop.baths\": { en: \"baths\", it: \"bagni\" },\n  \"prop.rent\": { en: \"Monthly rent\", it: \"Affitto mensile\" },\n  \n  // Empty States\n  \"empty.noProperties\": { en: \"No more properties to show\", it: \"Nessun altro immobile da mostrare\" },\n  \"empty.noRoommates\": { en: \"No more roommates to show\", it: \"Nessun altro coinquilino da mostrare\" },\n  \"empty.checkLater\": { en: \"Check back later!\", it: \"Torna più tardi!\" },\n  \n  // Landlord Form\n  \"form.title\": { en: \"Title\", it: \"Titolo\" },\n  \"form.city\": { en: \"City\", it: \"Città\" },\n  \"form.area\": { en: \"Area\", it: \"Zona\" },\n  \"form.price\": { en: \"Price\", it: \"Prezzo\" },\n  \"form.type\": { en: \"Property type\", it: \"Tipo di immobile\" },\n  \"form.desc\": { en: \"Description\", it: \"Descrizione\" },\n  \"form.amenities\": { en: \"Other amenities\", it: \"Altri servizi\" },\n};\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: (key: string) => string;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nexport function LanguageProvider({ children }: { children: ReactNode }) {\n  const [language, setLanguage] = useState<Language>(\"en\");\n\n  const t = (key: string) => {\n    if (!translations[key]) return key;\n    return translations[key][language];\n  };\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage, t }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (context === undefined) {\n    throw new Error(\"useLanguage must be used within a LanguageProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":3607,"size_tokens":null},"client/src/components/MobileFrame.tsx":{"content":"import { ReactNode } from \"react\";\n\nexport function MobileFrame({ children }: { children: ReactNode }) {\n  return (\n    <div className=\"min-h-screen w-full bg-neutral-900 flex items-center justify-center p-4 md:p-8\">\n      <div \n        className=\"relative w-full max-w-[400px] h-[850px] max-h-[calc(100vh-40px)] bg-white md:rounded-[3rem] shadow-2xl overflow-hidden border-[8px] border-neutral-800 md:border-[12px]\"\n        style={{ transform: \"translateZ(0)\" }} // Creates a containing block for fixed elements\n      >\n        {/* Notch (only visible on desktop/framed view) */}\n        <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-7 bg-neutral-800 rounded-b-2xl z-[100] hidden md:block pointer-events-none\" />\n        \n        {/* Status Bar Mock */}\n        <div className=\"absolute top-0 left-0 right-0 h-12 z-50 flex justify-between items-start px-6 pt-3 text-xs font-medium text-black pointer-events-none mix-blend-difference text-white\">\n          <span>9:41</span>\n          <div className=\"flex gap-1.5\">\n            <div className=\"w-4 h-2.5 bg-current rounded-[1px]\" />\n            <div className=\"w-3 h-2.5 bg-current rounded-[1px]\" />\n            <div className=\"w-5 h-2.5 border border-current rounded-[2px] relative\">\n              <div className=\"absolute inset-0.5 bg-current\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Content Area - Scrollable */}\n        <div className=\"w-full h-full overflow-y-auto overflow-x-hidden bg-gray-50 scrollbar-hide\">\n          {children}\n        </div>\n        \n        {/* Home Indicator */}\n        <div className=\"absolute bottom-1 left-1/2 -translate-x-1/2 w-32 h-1 bg-black/20 rounded-full z-[100] pointer-events-none\" />\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1752,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5124,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5745,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/ui/sonner.tsx":{"content":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner } from \"sonner\"\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n","path":null,"size_bytes":894,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7606,"size_tokens":null},"client/src/pages/TenantDetails.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { useRoute, Link } from \"wouter\";\nimport { ArrowLeft, Share2, Users, Calendar, Briefcase, Heart } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport useEmblaCarousel from \"embla-carousel-react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function TenantDetails() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [, params] = useRoute(\"/tenant-details/:id\");\n  const id = params?.id;\n  const [emblaRef] = useEmblaCarousel({ loop: true });\n\n  const { data: tenant, isLoading } = useQuery({\n    queryKey: [\"roommate\", id],\n    queryFn: () => api.getRoommate(id!),\n    enabled: !!id,\n  });\n\n  const swipeMutation = useMutation({\n    mutationFn: () => api.swipe(\"roommate\", id!, \"like\"),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Swipe sent successfully!\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to send swipe\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleLike = () => {\n    swipeMutation.mutate();\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-full bg-white flex items-center justify-center\">\n        <div className=\"text-center p-8\">\n          <div className=\"w-12 h-12 border-4 border-secondary border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-gray-500\">Loading profile...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!tenant) return <div className=\"min-h-full bg-white flex items-center justify-center p-8\">Profile not found</div>;\n\n  return (\n    <div className=\"min-h-full bg-white pb-24\">\n      {/* Header Image Carousel */}\n      <div className=\"relative h-[50vh] bg-gray-100 overflow-hidden\" ref={emblaRef}>\n        <div className=\"flex h-full\">\n          {tenant.images.map((src, index) => (\n            <div className=\"flex-[0_0_100%] min-w-0 relative\" key={index}>\n              <img src={src} alt={`${tenant.name} - ${index + 1}`} className=\"w-full h-full object-cover\" />\n            </div>\n          ))}\n        </div>\n        \n        {/* Nav overlay */}\n        <div className=\"absolute top-0 left-0 right-0 p-4 pt-safe-top flex justify-between items-start bg-gradient-to-b from-black/50 to-transparent pointer-events-none\">\n          <Link href=\"/tenant\" className=\"p-2 bg-white/20 backdrop-blur-md rounded-full text-white hover:bg-white/30 transition-colors pointer-events-auto\">\n            <ArrowLeft size={24} />\n          </Link>\n          <div className=\"flex gap-2\">\n            <button className=\"p-2 bg-white/20 backdrop-blur-md rounded-full text-white hover:bg-white/30 transition-colors pointer-events-auto\">\n              <Share2 size={24} />\n            </button>\n          </div>\n        </div>\n        \n        {/* Pagination Dots */}\n        <div className=\"absolute bottom-4 left-0 right-0 flex justify-center gap-2 z-10\">\n          {tenant.images.map((_, i) => (\n            <div key={i} className=\"w-1.5 h-1.5 rounded-full bg-white/80 shadow-sm\" />\n          ))}\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"px-5 py-6 -mt-8 relative bg-white rounded-t-[2rem] shadow-[-10px_-10px_30px_rgba(0,0,0,0.1)]\">\n        <div className=\"w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6\" />\n\n        <div className=\"flex justify-between items-start mb-4\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 leading-tight flex items-center gap-2\">\n              {tenant.name}, {tenant.age}\n            </h1>\n            <div className=\"flex items-center gap-2 text-gray-500 mt-1 font-medium\">\n              <Briefcase size={16} />\n              <span>{tenant.occupation}</span>\n            </div>\n          </div>\n          <div className=\"text-right\">\n             <div className=\"text-xl font-bold text-secondary\">€{tenant.budget}</div>\n             <div className=\"text-xs text-gray-400\">/month</div>\n          </div>\n        </div>\n\n        {/* Info Pills */}\n        <div className=\"flex flex-wrap gap-2 mb-6\">\n          <div className=\"flex items-center gap-2 px-4 py-2 bg-purple-50 rounded-2xl border border-purple-100 text-purple-700\">\n            <Calendar size={18} />\n            <span className=\"font-semibold text-sm\">Move-in: {tenant.moveInDate}</span>\n          </div>\n          {tenant.preferences.map((pref, i) => (\n            <div key={i} className=\"px-4 py-2 bg-gray-50 rounded-2xl border border-gray-100 text-gray-600 font-semibold text-sm\">\n              {pref}\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mb-8\">\n          <h2 className=\"text-lg font-bold text-gray-900 mb-3\">About me</h2>\n          <p className=\"text-gray-600 leading-relaxed text-lg\">\n            {tenant.bio}\n          </p>\n        </div>\n      </div>\n\n      {/* Footer Action */}\n      <div className=\"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-100 flex gap-4 items-center z-50 px-6 pb-8\">\n        <button \n          onClick={handleLike}\n          disabled={swipeMutation.isPending}\n          className={cn(\n            \"p-4 rounded-2xl border-2 transition-colors border-secondary bg-secondary/5 text-secondary hover:bg-secondary/10\",\n            swipeMutation.isPending && \"opacity-50 cursor-not-allowed\"\n          )}\n        >\n          <Heart fill=\"currentColor\" />\n        </button>\n        <Link href={`/chat/new?user=${id}`} className=\"flex-1 bg-secondary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-secondary/25 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center\">\n          {t(\"action.contactRoommate\")}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5859,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":768,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":649,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1237,"size_tokens":null},"client/src/pages/Onboarding.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { ChevronRight, User, Building2, Search, Heart, ShieldCheck, ArrowRight, MapPin, Euro, Calendar, Users, Home, CheckCircle2, Camera, Plus, X, Bed, Sofa, PawPrint, Cigarette, Moon, Music, Dumbbell, Coffee } from \"lucide-react\";\nimport { api } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQueryClient } from \"@tanstack/react-query\";\n\nexport default function Onboarding() {\n  const { t, language } = useLanguage();\n  const [step, setStep] = useState(1);\n  const [, setLocation] = useLocation();\n  const [loading, setLoading] = useState(false);\n  const { toast } = useToast();\n  const { user, isLoading, isAuthenticated } = useAuth();\n  const queryClient = useQueryClient();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const [formData, setFormData] = useState({\n    name: \"\",\n    role: \"\" as \"tenant\" | \"landlord\" | \"\",\n    city: \"\",\n    age: \"\",\n    occupation: \"\",\n    bio: \"\",\n    budget: \"\",\n    lookingFor: [\"homes\"] as (\"homes\" | \"roommates\")[],\n    images: [] as string[],\n    // Property preferences\n    propertyPrefs: {\n      minPrice: \"\",\n      maxPrice: \"\",\n      propertyTypes: [] as string[],\n      minBeds: \"\",\n      furnished: null as boolean | null,\n      petsAllowed: null as boolean | null,\n    },\n    // Roommate preferences\n    roommatePrefs: {\n      ageRange: \"\" as \"18-25\" | \"25-35\" | \"35+\" | \"\",\n      lifestyle: [] as string[],\n      habits: [] as string[],\n    },\n  });\n\n  const toggleLookingFor = (option: \"homes\" | \"roommates\") => {\n    setFormData(prev => {\n      const current = prev.lookingFor;\n      if (current.includes(option)) {\n        if (current.length === 1) return prev;\n        return { ...prev, lookingFor: current.filter(o => o !== option) };\n      } else {\n        return { ...prev, lookingFor: [...current, option] };\n      }\n    });\n  };\n\n  const togglePropertyType = (type: string) => {\n    setFormData(prev => ({\n      ...prev,\n      propertyPrefs: {\n        ...prev.propertyPrefs,\n        propertyTypes: prev.propertyPrefs.propertyTypes.includes(type)\n          ? prev.propertyPrefs.propertyTypes.filter(t => t !== type)\n          : [...prev.propertyPrefs.propertyTypes, type],\n      },\n    }));\n  };\n\n  const toggleLifestyle = (item: string) => {\n    setFormData(prev => ({\n      ...prev,\n      roommatePrefs: {\n        ...prev.roommatePrefs,\n        lifestyle: prev.roommatePrefs.lifestyle.includes(item)\n          ? prev.roommatePrefs.lifestyle.filter(l => l !== item)\n          : [...prev.roommatePrefs.lifestyle, item],\n      },\n    }));\n  };\n\n  const toggleHabit = (item: string) => {\n    setFormData(prev => ({\n      ...prev,\n      roommatePrefs: {\n        ...prev.roommatePrefs,\n        habits: prev.roommatePrefs.habits.includes(item)\n          ? prev.roommatePrefs.habits.filter(h => h !== item)\n          : [...prev.roommatePrefs.habits, item],\n      },\n    }));\n  };\n\n  useEffect(() => {\n    if (user) {\n      if (user.role) {\n        setLocation(`/${user.role}`);\n        return;\n      }\n      setFormData(prev => ({\n        ...prev,\n        name: user.name || `${user.firstName || ''} ${user.lastName || ''}`.trim() || prev.name,\n      }));\n    }\n  }, [user, setLocation]);\n\n  if (!isLoading && !isAuthenticated) {\n    return (\n      <div className=\"min-h-full bg-white flex flex-col items-center justify-center p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\n          {language === \"it\" ? \"Accedi prima\" : \"Please sign in first\"}\n        </h2>\n        <p className=\"text-gray-500 mb-6\">\n          {language === \"it\" ? \"Devi accedere per completare la registrazione\" : \"You need to be logged in to complete onboarding\"}\n        </p>\n        <button \n          onClick={() => setLocation(\"/\")}\n          className=\"bg-primary text-white font-bold text-lg py-4 px-8 rounded-2xl shadow-lg\"\n          data-testid=\"button-login-onboarding\"\n        >\n          {language === \"it\" ? \"Accedi\" : \"Sign In\"}\n        </button>\n      </div>\n    );\n  }\n\n  const handleNext = () => {\n    setStep(prev => prev + 1);\n  };\n\n  const handleBack = () => {\n    setStep(prev => Math.max(1, prev - 1));\n  };\n\n  const handleRoleSelect = (role: \"tenant\" | \"landlord\") => {\n    setFormData({ ...formData, role });\n    handleNext();\n  };\n\n  const [uploadingImages, setUploadingImages] = useState(false);\n\n  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || files.length === 0) return;\n\n    setUploadingImages(true);\n    \n    try {\n      for (const file of Array.from(files)) {\n        if (formData.images.length >= 6) break;\n        \n        // Read file as base64\n        const base64 = await new Promise<string>((resolve) => {\n          const reader = new FileReader();\n          reader.onloadend = () => resolve(reader.result as string);\n          reader.readAsDataURL(file);\n        });\n\n        // Upload to Supabase Storage\n        try {\n          const { url } = await api.uploadImage(base64, file.name, file.type);\n          setFormData(prev => ({\n            ...prev,\n            images: [...prev.images, url].slice(0, 6),\n          }));\n        } catch (uploadError: any) {\n          console.error('Upload error:', uploadError);\n          // Fallback to base64 if storage upload fails (e.g., bucket not configured)\n          setFormData(prev => ({\n            ...prev,\n            images: [...prev.images, base64].slice(0, 6),\n          }));\n        }\n      }\n    } finally {\n      setUploadingImages(false);\n    }\n  };\n\n  const removeImage = (index: number) => {\n    setFormData(prev => ({\n      ...prev,\n      images: prev.images.filter((_, i) => i !== index),\n    }));\n  };\n\n  // Calculate total steps based on role and lookingFor\n  const getTotalSteps = () => {\n    if (formData.role === \"landlord\") return 6; // Welcome, Security, Role, Info, Photos, Confirm\n    // Tenant: Welcome, Security, Role, Info, Photos, [PropertyPrefs], [RoommatePrefs], Confirm\n    let steps = 6;\n    if (formData.lookingFor.includes(\"homes\")) steps++;\n    if (formData.lookingFor.includes(\"roommates\")) steps++;\n    return steps;\n  };\n\n  const handleComplete = async () => {\n    if (!formData.name || !formData.role || !user) {\n      toast({\n        title: language === \"it\" ? \"Informazioni mancanti\" : \"Missing information\",\n        description: language === \"it\" ? \"Completa tutti i campi obbligatori\" : \"Please complete all required fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setLoading(true);\n    try {\n      await api.updateUser(user.id, {\n        name: formData.name,\n        role: formData.role,\n        city: formData.city || undefined,\n        age: formData.age ? parseInt(formData.age) : undefined,\n        occupation: formData.occupation || undefined,\n        bio: formData.bio || undefined,\n        budget: formData.budget ? parseInt(formData.budget) : undefined,\n        lookingFor: formData.role === \"tenant\" ? formData.lookingFor : undefined,\n        images: formData.images.length > 0 ? formData.images : undefined,\n        propertyPrefs: formData.role === \"tenant\" && formData.lookingFor.includes(\"homes\") \n          ? {\n              minPrice: formData.propertyPrefs.minPrice ? parseInt(formData.propertyPrefs.minPrice) : null,\n              maxPrice: formData.propertyPrefs.maxPrice ? parseInt(formData.propertyPrefs.maxPrice) : null,\n              propertyTypes: formData.propertyPrefs.propertyTypes,\n              minBeds: formData.propertyPrefs.minBeds ? parseInt(formData.propertyPrefs.minBeds) : null,\n              furnished: formData.propertyPrefs.furnished,\n              petsAllowed: formData.propertyPrefs.petsAllowed,\n            }\n          : undefined,\n        roommatePrefs: formData.role === \"tenant\" && formData.lookingFor.includes(\"roommates\")\n          ? {\n              ageRange: formData.roommatePrefs.ageRange || null,\n              lifestyle: formData.roommatePrefs.lifestyle,\n              habits: formData.roommatePrefs.habits,\n            }\n          : undefined,\n      });\n\n      if (formData.role === \"tenant\" && formData.lookingFor.includes(\"roommates\")) {\n        await api.createRoommate({\n          name: formData.name,\n          age: formData.age ? parseInt(formData.age) : 25,\n          occupation: formData.occupation || \"Professional\",\n          bio: formData.bio || `Hi! I'm ${formData.name} and I'm looking for a roommate.`,\n          budget: formData.budget ? parseInt(formData.budget) : 800,\n          moveInDate: \"Flexible\",\n          preferences: formData.roommatePrefs.lifestyle.concat(formData.roommatePrefs.habits),\n          images: formData.images.length > 0 ? formData.images : [user.profileImageUrl || \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=400&q=80\"],\n        });\n      }\n\n      await queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      \n      toast({\n        title: language === \"it\" ? \"Benvenuto su Tenant!\" : \"Welcome to Tenant!\",\n        description: language === \"it\" ? \"Il tuo profilo e stato creato\" : \"Your profile has been created successfully\",\n      });\n      \n      // Show paywall after signup (user can skip to continue with limited features)\n      setLocation(\"/paywall\");\n    } catch (error: any) {\n      toast({\n        title: language === \"it\" ? \"Errore\" : \"Error\",\n        description: error.message || (language === \"it\" ? \"Impossibile aggiornare il profilo\" : \"Failed to update profile\"),\n        variant: \"destructive\",\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-full bg-white flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  const totalSteps = getTotalSteps();\n  const progressPercentage = (step / totalSteps) * 100;\n\n  const propertyTypes = [\n    { id: \"apartment\", label: language === \"it\" ? \"Appartamento\" : \"Apartment\", icon: Building2 },\n    { id: \"house\", label: language === \"it\" ? \"Casa\" : \"House\", icon: Home },\n    { id: \"studio\", label: \"Studio\", icon: Bed },\n    { id: \"room\", label: language === \"it\" ? \"Stanza\" : \"Room\", icon: Sofa },\n  ];\n\n  const lifestyleOptions = [\n    { id: \"early_bird\", label: language === \"it\" ? \"Mattiniero\" : \"Early Bird\", icon: Coffee },\n    { id: \"night_owl\", label: language === \"it\" ? \"Nottambulo\" : \"Night Owl\", icon: Moon },\n    { id: \"active\", label: language === \"it\" ? \"Attivo\" : \"Active\", icon: Dumbbell },\n    { id: \"social\", label: language === \"it\" ? \"Socievole\" : \"Social\", icon: Users },\n  ];\n\n  const habitOptions = [\n    { id: \"non_smoker\", label: language === \"it\" ? \"Non fumatore\" : \"Non-smoker\", icon: Cigarette },\n    { id: \"pet_friendly\", label: language === \"it\" ? \"Ama animali\" : \"Pet-friendly\", icon: PawPrint },\n    { id: \"quiet\", label: language === \"it\" ? \"Tranquillo\" : \"Quiet\", icon: Moon },\n    { id: \"music_lover\", label: language === \"it\" ? \"Ama musica\" : \"Music lover\", icon: Music },\n  ];\n\n  // Determine which step content to show based on role and preferences\n  const getStepContent = () => {\n    // Steps 1-3 are the same for everyone\n    if (step <= 3) return step;\n    \n    if (formData.role === \"landlord\") {\n      // Landlord: 4=Info, 5=Photos, 6=Confirm\n      if (step === 4) return \"landlord_info\";\n      if (step === 5) return \"photos\";\n      if (step === 6) return \"confirm\";\n    } else {\n      // Tenant: 4=Info, 5=Photos, then preferences, then confirm\n      if (step === 4) return \"tenant_info\";\n      if (step === 5) return \"photos\";\n      \n      let currentStep = 6;\n      if (formData.lookingFor.includes(\"homes\")) {\n        if (step === currentStep) return \"property_prefs\";\n        currentStep++;\n      }\n      if (formData.lookingFor.includes(\"roommates\")) {\n        if (step === currentStep) return \"roommate_prefs\";\n        currentStep++;\n      }\n      if (step === currentStep) return \"confirm\";\n    }\n    return \"confirm\";\n  };\n\n  const currentContent = getStepContent();\n\n  return (\n    <div className=\"min-h-full bg-white flex flex-col relative overflow-hidden\">\n      <div className=\"absolute top-[-10%] right-[-10%] w-80 h-80 bg-primary/5 rounded-full blur-3xl\" />\n      <div className=\"absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-secondary/5 rounded-full blur-3xl\" />\n\n      <div className=\"absolute top-0 left-0 right-0 h-1 bg-gray-100 z-50\">\n        <motion.div \n          className=\"h-full bg-primary\"\n          initial={{ width: \"0%\" }}\n          animate={{ width: `${progressPercentage}%` }}\n          transition={{ duration: 0.3 }}\n        />\n      </div>\n\n      <input \n        type=\"file\" \n        ref={fileInputRef}\n        onChange={handleImageUpload}\n        accept=\"image/*\"\n        multiple\n        className=\"hidden\"\n      />\n\n      <main className=\"flex-1 flex flex-col p-6 pt-12 relative z-10 overflow-y-auto\">\n        <AnimatePresence mode=\"wait\">\n          {/* Step 1: Welcome */}\n          {step === 1 && (\n            <motion.div\n              key=\"step1\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"flex-1 flex items-center justify-center\">\n                <div className=\"relative w-64 h-64\">\n                  <div className=\"absolute inset-0 bg-blue-100 rounded-full opacity-50 blur-2xl animate-pulse\" />\n                  <div className=\"relative z-10 bg-white rounded-3xl shadow-xl p-6 border border-gray-100 transform rotate-[-6deg]\">\n                    <Search size={48} className=\"text-primary mb-4\" />\n                    <div className=\"h-2 w-24 bg-gray-100 rounded mb-2\" />\n                    <div className=\"h-2 w-16 bg-gray-100 rounded\" />\n                  </div>\n                  <div className=\"absolute bottom-0 right-0 z-20 bg-white rounded-3xl shadow-xl p-6 border border-gray-100 transform rotate-[6deg]\">\n                    <Heart size={48} className=\"text-secondary mb-4\" />\n                    <div className=\"h-2 w-24 bg-gray-100 rounded mb-2\" />\n                    <div className=\"h-2 w-16 bg-gray-100 rounded\" />\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"space-y-4 mb-8\">\n                <h2 className=\"text-3xl font-black text-gray-900 leading-tight\">\n                  {language === \"it\" ? (\n                    <>Trova la tua <br/><span className=\"text-primary\">casa</span> o <span className=\"text-secondary\">coinquilino</span> perfetti.</>\n                  ) : (\n                    <>Find your perfect <br/><span className=\"text-primary\">home</span> or <span className=\"text-secondary\">roommate</span>.</>\n                  )}\n                </h2>\n                <p className=\"text-lg text-gray-500 font-medium\">\n                  {language === \"it\" \n                    ? \"Scorri tra migliaia di annunci verificati e connettiti con persone che corrispondono al tuo stile di vita.\"\n                    : \"Swipe through thousands of verified listings and connect with people who match your lifestyle.\"}\n                </p>\n              </div>\n\n              <button \n                onClick={handleNext}\n                className=\"w-full bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-2\"\n                data-testid=\"button-get-started\"\n              >\n                {language === \"it\" ? \"Inizia\" : \"Get Started\"} <ArrowRight size={20} />\n              </button>\n            </motion.div>\n          )}\n\n          {/* Step 2: Security */}\n          {step === 2 && (\n            <motion.div\n              key=\"step2\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"flex-1 flex items-center justify-center\">\n                <div className=\"relative w-64 h-64 flex items-center justify-center\">\n                  <div className=\"absolute inset-0 bg-green-100 rounded-full opacity-50 blur-2xl animate-pulse\" />\n                  <ShieldCheck size={120} className=\"text-green-500 relative z-10 drop-shadow-2xl\" />\n                </div>\n              </div>\n              \n              <div className=\"space-y-4 mb-8\">\n                <h2 className=\"text-3xl font-black text-gray-900 leading-tight\">\n                  {language === \"it\" ? (\n                    <>Sicuro e <span className=\"text-green-500\">verificato</span>.</>\n                  ) : (\n                    <>Safe, secure, and <br/><span className=\"text-green-500\">verified</span>.</>\n                  )}\n                </h2>\n                <p className=\"text-lg text-gray-500 font-medium\">\n                  {language === \"it\"\n                    ? \"Verifichiamo ogni proprietario e annuncio per garantirti la massima tranquillita.\"\n                    : \"We verify every landlord and listing to ensure you can rent with total peace of mind.\"}\n                </p>\n              </div>\n\n              <button \n                onClick={handleNext}\n                className=\"w-full bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-2\"\n                data-testid=\"button-next-security\"\n              >\n                {language === \"it\" ? \"Avanti\" : \"Next\"} <ArrowRight size={20} />\n              </button>\n            </motion.div>\n          )}\n\n          {/* Step 3: Role Selection */}\n          {step === 3 && (\n            <motion.div\n              key=\"step3\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col justify-center\"\n            >\n              <div className=\"text-center mb-10\">\n                <h2 className=\"text-2xl font-black text-gray-900 mb-2\">\n                  {language === \"it\" ? \"Cosa ti porta qui?\" : \"What brings you here?\"}\n                </h2>\n                <p className=\"text-gray-500\">\n                  {language === \"it\" ? \"Questo ci aiuta a personalizzare la tua esperienza\" : \"This helps us personalize your experience\"}\n                </p>\n              </div>\n\n              <div className=\"grid gap-4 mb-8\">\n                <motion.div \n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  onClick={() => handleRoleSelect(\"tenant\")}\n                  className=\"group p-6 rounded-3xl border-2 cursor-pointer transition-all border-gray-100 hover:border-primary/50 hover:bg-primary/5\"\n                  data-testid=\"button-role-tenant\"\n                >\n                  <div className=\"flex items-center gap-4 z-10 relative\">\n                    <div className=\"w-14 h-14 rounded-2xl flex items-center justify-center transition-colors bg-blue-100 text-primary group-hover:bg-primary group-hover:text-white\">\n                      <User size={28} strokeWidth={2.5} />\n                    </div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-bold text-gray-900\">\n                        {language === \"it\" ? \"Cerco casa\" : \"I'm looking for a place\"}\n                      </h3>\n                      <p className=\"text-sm text-gray-500\">\n                        {language === \"it\" ? \"Trova case o coinquilini\" : \"Find homes or roommates\"}\n                      </p>\n                    </div>\n                    <ChevronRight className=\"text-gray-300 group-hover:text-primary transition-colors\" />\n                  </div>\n                </motion.div>\n\n                <motion.div \n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  onClick={() => handleRoleSelect(\"landlord\")}\n                  className=\"group p-6 rounded-3xl border-2 cursor-pointer transition-all border-gray-100 hover:border-secondary/50 hover:bg-secondary/5\"\n                  data-testid=\"button-role-landlord\"\n                >\n                  <div className=\"flex items-center gap-4 z-10 relative\">\n                    <div className=\"w-14 h-14 rounded-2xl flex items-center justify-center transition-colors bg-purple-100 text-secondary group-hover:bg-secondary group-hover:text-white\">\n                      <Building2 size={28} strokeWidth={2.5} />\n                    </div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-bold text-gray-900\">\n                        {language === \"it\" ? \"Sono proprietario\" : \"I'm a landlord\"}\n                      </h3>\n                      <p className=\"text-sm text-gray-500\">\n                        {language === \"it\" ? \"Pubblica annunci e trova inquilini\" : \"List properties and find tenants\"}\n                      </p>\n                    </div>\n                    <ChevronRight className=\"text-gray-300 group-hover:text-secondary transition-colors\" />\n                  </div>\n                </motion.div>\n              </div>\n            </motion.div>\n          )}\n\n          {/* Tenant Info Step */}\n          {currentContent === \"tenant_info\" && (\n            <motion.div\n              key=\"tenant_info\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"mb-6\">\n                <h2 className=\"text-2xl font-black text-gray-900 mb-2\">\n                  {language === \"it\" ? \"Parlaci di te\" : \"Tell us about yourself\"}\n                </h2>\n                <p className=\"text-gray-500\">\n                  {language === \"it\" ? \"Questo aiuta i proprietari a conoscerti\" : \"This helps landlords get to know you\"}\n                </p>\n              </div>\n\n              <div className=\"space-y-4 flex-1\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm font-bold text-gray-700 ml-1 flex items-center gap-2\">\n                      <MapPin size={14} /> {language === \"it\" ? \"Citta\" : \"City\"}\n                    </label>\n                    <input \n                      type=\"text\" \n                      value={formData.city}\n                      onChange={(e) => setFormData({...formData, city: e.target.value})}\n                      placeholder=\"Milano\"\n                      className=\"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-100 focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none font-medium\"\n                      data-testid=\"input-city\"\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm font-bold text-gray-700 ml-1 flex items-center gap-2\">\n                      <Calendar size={14} /> {language === \"it\" ? \"Eta\" : \"Age\"}\n                    </label>\n                    <input \n                      type=\"number\" \n                      value={formData.age}\n                      onChange={(e) => setFormData({...formData, age: e.target.value})}\n                      placeholder=\"25\"\n                      className=\"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-100 focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none font-medium\"\n                      data-testid=\"input-age\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1\">\n                    {language === \"it\" ? \"Occupazione\" : \"Occupation\"}\n                  </label>\n                  <input \n                    type=\"text\" \n                    value={formData.occupation}\n                    onChange={(e) => setFormData({...formData, occupation: e.target.value})}\n                    placeholder={language === \"it\" ? \"Ingegnere Software\" : \"Software Engineer\"}\n                    className=\"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-100 focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none font-medium\"\n                    data-testid=\"input-occupation\"\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1 flex items-center gap-2\">\n                    <Euro size={14} /> {language === \"it\" ? \"Budget mensile\" : \"Monthly budget\"}\n                  </label>\n                  <input \n                    type=\"number\" \n                    value={formData.budget}\n                    onChange={(e) => setFormData({...formData, budget: e.target.value})}\n                    placeholder=\"800\"\n                    className=\"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-100 focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none font-medium\"\n                    data-testid=\"input-budget\"\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1\">\n                    {language === \"it\" ? \"Cosa cerchi? (seleziona tutto)\" : \"What are you looking for? (select all)\"}\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <button\n                      type=\"button\"\n                      onClick={() => toggleLookingFor(\"homes\")}\n                      className={`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${\n                        formData.lookingFor.includes(\"homes\") \n                          ? \"border-primary bg-primary/5 text-primary\" \n                          : \"border-gray-100 text-gray-500 hover:border-gray-200\"\n                      }`}\n                      data-testid=\"button-looking-homes\"\n                    >\n                      <Home size={24} />\n                      <span className=\"font-bold text-sm\">{language === \"it\" ? \"Case\" : \"Homes\"}</span>\n                      {formData.lookingFor.includes(\"homes\") && <CheckCircle2 size={16} className=\"text-primary\" />}\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => toggleLookingFor(\"roommates\")}\n                      className={`p-4 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${\n                        formData.lookingFor.includes(\"roommates\") \n                          ? \"border-secondary bg-secondary/5 text-secondary\" \n                          : \"border-gray-100 text-gray-500 hover:border-gray-200\"\n                      }`}\n                      data-testid=\"button-looking-roommates\"\n                    >\n                      <Users size={24} />\n                      <span className=\"font-bold text-sm\">{language === \"it\" ? \"Coinquilini\" : \"Roommates\"}</span>\n                      {formData.lookingFor.includes(\"roommates\") && <CheckCircle2 size={16} className=\"text-secondary\" />}\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <button \n                onClick={handleNext}\n                className=\"w-full bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-2 mt-6\"\n                data-testid=\"button-next-tenant-info\"\n              >\n                {language === \"it\" ? \"Continua\" : \"Continue\"} <ArrowRight size={20} />\n              </button>\n            </motion.div>\n          )}\n\n          {/* Landlord Info Step */}\n          {currentContent === \"landlord_info\" && (\n            <motion.div\n              key=\"landlord_info\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"mb-6\">\n                <h2 className=\"text-2xl font-black text-gray-900 mb-2\">\n                  {language === \"it\" ? \"Le tue proprieta\" : \"About your property\"}\n                </h2>\n                <p className=\"text-gray-500\">\n                  {language === \"it\" ? \"Aiutaci a trovare gli inquilini giusti\" : \"Help us match you with the right tenants\"}\n                </p>\n              </div>\n\n              <div className=\"space-y-4 flex-1\">\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1 flex items-center gap-2\">\n                    <MapPin size={14} /> {language === \"it\" ? \"Posizione\" : \"Property location\"}\n                  </label>\n                  <input \n                    type=\"text\" \n                    value={formData.city}\n                    onChange={(e) => setFormData({...formData, city: e.target.value})}\n                    placeholder=\"Milano, Roma, etc.\"\n                    className=\"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-100 focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none font-medium\"\n                    data-testid=\"input-landlord-city\"\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1\">\n                    {language === \"it\" ? \"Su di te (opzionale)\" : \"About you (optional)\"}\n                  </label>\n                  <textarea \n                    value={formData.bio}\n                    onChange={(e) => setFormData({...formData, bio: e.target.value})}\n                    placeholder={language === \"it\" ? \"Racconta agli inquilini qualcosa su di te...\" : \"Tell tenants a bit about yourself as a landlord...\"}\n                    rows={4}\n                    className=\"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-100 focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none font-medium resize-none\"\n                    data-testid=\"input-landlord-bio\"\n                  />\n                </div>\n              </div>\n\n              <button \n                onClick={handleNext}\n                className=\"w-full bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-2 mt-6\"\n                data-testid=\"button-next-landlord-info\"\n              >\n                {language === \"it\" ? \"Continua\" : \"Continue\"} <ArrowRight size={20} />\n              </button>\n            </motion.div>\n          )}\n\n          {/* Photo Upload Step */}\n          {currentContent === \"photos\" && (\n            <motion.div\n              key=\"photos\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"mb-6\">\n                <h2 className=\"text-2xl font-black text-gray-900 mb-2\">\n                  {language === \"it\" ? \"Aggiungi le tue foto\" : \"Add your photos\"}\n                </h2>\n                <p className=\"text-gray-500\">\n                  {language === \"it\" \n                    ? \"Le foto aiutano a creare fiducia (max 6)\" \n                    : \"Photos help build trust (max 6)\"}\n                </p>\n              </div>\n\n              <div className=\"grid grid-cols-3 gap-3 mb-6\">\n                {formData.images.map((img, index) => (\n                  <div key={index} className=\"relative aspect-square rounded-2xl overflow-hidden bg-gray-100\">\n                    <img src={img} alt={`Photo ${index + 1}`} className=\"w-full h-full object-cover\" />\n                    <button\n                      onClick={() => removeImage(index)}\n                      className=\"absolute top-2 right-2 w-6 h-6 bg-black/50 rounded-full flex items-center justify-center\"\n                      data-testid={`button-remove-image-${index}`}\n                    >\n                      <X size={14} className=\"text-white\" />\n                    </button>\n                  </div>\n                ))}\n                {formData.images.length < 6 && (\n                  <button\n                    onClick={() => fileInputRef.current?.click()}\n                    disabled={uploadingImages}\n                    className=\"aspect-square rounded-2xl border-2 border-dashed border-gray-200 flex flex-col items-center justify-center gap-2 text-gray-400 hover:border-primary hover:text-primary transition-colors disabled:opacity-50\"\n                    data-testid=\"button-add-photo\"\n                  >\n                    {uploadingImages ? (\n                      <div className=\"animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full\" />\n                    ) : (\n                      <>\n                        <Camera size={24} />\n                        <span className=\"text-xs font-medium\">{language === \"it\" ? \"Aggiungi\" : \"Add\"}</span>\n                      </>\n                    )}\n                  </button>\n                )}\n              </div>\n\n              <div className=\"flex-1\" />\n\n              <div className=\"space-y-3\">\n                <button \n                  onClick={handleNext}\n                  className=\"w-full bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-2\"\n                  data-testid=\"button-next-photos\"\n                >\n                  {language === \"it\" ? \"Continua\" : \"Continue\"} <ArrowRight size={20} />\n                </button>\n                {formData.images.length === 0 && (\n                  <button \n                    onClick={handleNext}\n                    className=\"w-full text-gray-400 font-medium py-2\"\n                    data-testid=\"button-skip-photos\"\n                  >\n                    {language === \"it\" ? \"Salta per ora\" : \"Skip for now\"}\n                  </button>\n                )}\n              </div>\n            </motion.div>\n          )}\n\n          {/* Property Preferences Step */}\n          {currentContent === \"property_prefs\" && (\n            <motion.div\n              key=\"property_prefs\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"mb-6\">\n                <h2 className=\"text-2xl font-black text-gray-900 mb-2\">\n                  {language === \"it\" ? \"Preferenze casa\" : \"Property preferences\"}\n                </h2>\n                <p className=\"text-gray-500\">\n                  {language === \"it\" ? \"Cosa cerchi in una casa?\" : \"What are you looking for in a home?\"}\n                </p>\n              </div>\n\n              <div className=\"space-y-5 flex-1 overflow-y-auto\">\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1\">\n                    {language === \"it\" ? \"Tipo di proprieta\" : \"Property type\"}\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    {propertyTypes.map((type) => (\n                      <button\n                        key={type.id}\n                        type=\"button\"\n                        onClick={() => togglePropertyType(type.id)}\n                        className={`p-3 rounded-xl border-2 flex items-center gap-3 transition-all ${\n                          formData.propertyPrefs.propertyTypes.includes(type.id)\n                            ? \"border-primary bg-primary/5 text-primary\"\n                            : \"border-gray-100 text-gray-500 hover:border-gray-200\"\n                        }`}\n                        data-testid={`button-property-type-${type.id}`}\n                      >\n                        <type.icon size={20} />\n                        <span className=\"font-medium text-sm\">{type.label}</span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1 flex items-center gap-2\">\n                    <Euro size={14} /> {language === \"it\" ? \"Fascia di prezzo\" : \"Price range\"}\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <input \n                      type=\"number\" \n                      value={formData.propertyPrefs.minPrice}\n                      onChange={(e) => setFormData({\n                        ...formData,\n                        propertyPrefs: { ...formData.propertyPrefs, minPrice: e.target.value }\n                      })}\n                      placeholder={language === \"it\" ? \"Min\" : \"Min\"}\n                      className=\"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-100 focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none font-medium\"\n                      data-testid=\"input-min-price\"\n                    />\n                    <input \n                      type=\"number\" \n                      value={formData.propertyPrefs.maxPrice}\n                      onChange={(e) => setFormData({\n                        ...formData,\n                        propertyPrefs: { ...formData.propertyPrefs, maxPrice: e.target.value }\n                      })}\n                      placeholder={language === \"it\" ? \"Max\" : \"Max\"}\n                      className=\"w-full px-4 py-3 rounded-xl bg-gray-50 border border-gray-100 focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none font-medium\"\n                      data-testid=\"input-max-price\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1 flex items-center gap-2\">\n                    <Bed size={14} /> {language === \"it\" ? \"Camere minime\" : \"Minimum bedrooms\"}\n                  </label>\n                  <div className=\"flex gap-2\">\n                    {[\"1\", \"2\", \"3\", \"4+\"].map((num) => (\n                      <button\n                        key={num}\n                        type=\"button\"\n                        onClick={() => setFormData({\n                          ...formData,\n                          propertyPrefs: { ...formData.propertyPrefs, minBeds: num.replace(\"+\", \"\") }\n                        })}\n                        className={`flex-1 py-3 rounded-xl border-2 font-bold transition-all ${\n                          formData.propertyPrefs.minBeds === num.replace(\"+\", \"\")\n                            ? \"border-primary bg-primary/5 text-primary\"\n                            : \"border-gray-100 text-gray-500 hover:border-gray-200\"\n                        }`}\n                        data-testid={`button-beds-${num}`}\n                      >\n                        {num}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1\">\n                    {language === \"it\" ? \"Altre preferenze\" : \"Other preferences\"}\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setFormData({\n                        ...formData,\n                        propertyPrefs: { ...formData.propertyPrefs, furnished: formData.propertyPrefs.furnished === true ? null : true }\n                      })}\n                      className={`p-3 rounded-xl border-2 flex items-center gap-3 transition-all ${\n                        formData.propertyPrefs.furnished === true\n                          ? \"border-primary bg-primary/5 text-primary\"\n                          : \"border-gray-100 text-gray-500 hover:border-gray-200\"\n                      }`}\n                      data-testid=\"button-furnished\"\n                    >\n                      <Sofa size={20} />\n                      <span className=\"font-medium text-sm\">{language === \"it\" ? \"Arredato\" : \"Furnished\"}</span>\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setFormData({\n                        ...formData,\n                        propertyPrefs: { ...formData.propertyPrefs, petsAllowed: formData.propertyPrefs.petsAllowed === true ? null : true }\n                      })}\n                      className={`p-3 rounded-xl border-2 flex items-center gap-3 transition-all ${\n                        formData.propertyPrefs.petsAllowed === true\n                          ? \"border-primary bg-primary/5 text-primary\"\n                          : \"border-gray-100 text-gray-500 hover:border-gray-200\"\n                      }`}\n                      data-testid=\"button-pets\"\n                    >\n                      <PawPrint size={20} />\n                      <span className=\"font-medium text-sm\">{language === \"it\" ? \"Animali OK\" : \"Pets OK\"}</span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <button \n                onClick={handleNext}\n                className=\"w-full bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-2 mt-6\"\n                data-testid=\"button-next-property-prefs\"\n              >\n                {language === \"it\" ? \"Continua\" : \"Continue\"} <ArrowRight size={20} />\n              </button>\n            </motion.div>\n          )}\n\n          {/* Roommate Preferences Step */}\n          {currentContent === \"roommate_prefs\" && (\n            <motion.div\n              key=\"roommate_prefs\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col\"\n            >\n              <div className=\"mb-6\">\n                <h2 className=\"text-2xl font-black text-gray-900 mb-2\">\n                  {language === \"it\" ? \"Preferenze coinquilino\" : \"Roommate preferences\"}\n                </h2>\n                <p className=\"text-gray-500\">\n                  {language === \"it\" ? \"Chi cerchi come coinquilino?\" : \"What are you looking for in a roommate?\"}\n                </p>\n              </div>\n\n              <div className=\"space-y-5 flex-1 overflow-y-auto\">\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1\">\n                    {language === \"it\" ? \"Fascia di eta preferita\" : \"Preferred age range\"}\n                  </label>\n                  <div className=\"flex gap-2\">\n                    {[\n                      { id: \"18-25\", label: \"18-25\" },\n                      { id: \"25-35\", label: \"25-35\" },\n                      { id: \"35+\", label: \"35+\" },\n                    ].map((range) => (\n                      <button\n                        key={range.id}\n                        type=\"button\"\n                        onClick={() => setFormData({\n                          ...formData,\n                          roommatePrefs: { \n                            ...formData.roommatePrefs, \n                            ageRange: formData.roommatePrefs.ageRange === range.id ? \"\" : range.id as any\n                          }\n                        })}\n                        className={`flex-1 py-3 rounded-xl border-2 font-bold transition-all ${\n                          formData.roommatePrefs.ageRange === range.id\n                            ? \"border-secondary bg-secondary/5 text-secondary\"\n                            : \"border-gray-100 text-gray-500 hover:border-gray-200\"\n                        }`}\n                        data-testid={`button-age-${range.id}`}\n                      >\n                        {range.label}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1\">\n                    {language === \"it\" ? \"Stile di vita\" : \"Lifestyle\"}\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    {lifestyleOptions.map((option) => (\n                      <button\n                        key={option.id}\n                        type=\"button\"\n                        onClick={() => toggleLifestyle(option.id)}\n                        className={`p-3 rounded-xl border-2 flex items-center gap-3 transition-all ${\n                          formData.roommatePrefs.lifestyle.includes(option.id)\n                            ? \"border-secondary bg-secondary/5 text-secondary\"\n                            : \"border-gray-100 text-gray-500 hover:border-gray-200\"\n                        }`}\n                        data-testid={`button-lifestyle-${option.id}`}\n                      >\n                        <option.icon size={20} />\n                        <span className=\"font-medium text-sm\">{option.label}</span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-bold text-gray-700 ml-1\">\n                    {language === \"it\" ? \"Abitudini\" : \"Habits\"}\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    {habitOptions.map((option) => (\n                      <button\n                        key={option.id}\n                        type=\"button\"\n                        onClick={() => toggleHabit(option.id)}\n                        className={`p-3 rounded-xl border-2 flex items-center gap-3 transition-all ${\n                          formData.roommatePrefs.habits.includes(option.id)\n                            ? \"border-secondary bg-secondary/5 text-secondary\"\n                            : \"border-gray-100 text-gray-500 hover:border-gray-200\"\n                        }`}\n                        data-testid={`button-habit-${option.id}`}\n                      >\n                        <option.icon size={20} />\n                        <span className=\"font-medium text-sm\">{option.label}</span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              <button \n                onClick={handleNext}\n                className=\"w-full bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-2 mt-6\"\n                data-testid=\"button-next-roommate-prefs\"\n              >\n                {language === \"it\" ? \"Continua\" : \"Continue\"} <ArrowRight size={20} />\n              </button>\n            </motion.div>\n          )}\n\n          {/* Confirmation Step */}\n          {currentContent === \"confirm\" && (\n            <motion.div\n              key=\"confirm\"\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              className=\"flex-1 flex flex-col justify-center items-center text-center\"\n            >\n              <motion.div \n                initial={{ scale: 0 }}\n                animate={{ scale: 1 }}\n                transition={{ type: \"spring\", duration: 0.6 }}\n                className=\"w-24 h-24 rounded-full bg-green-100 flex items-center justify-center mb-8\"\n              >\n                <CheckCircle2 size={48} className=\"text-green-500\" />\n              </motion.div>\n\n              <h2 className=\"text-2xl font-black text-gray-900 mb-2\">\n                {language === \"it\" ? \"Tutto pronto!\" : \"You're all set!\"}\n              </h2>\n              <p className=\"text-gray-500 mb-8 max-w-xs\">\n                {formData.role === \"tenant\" \n                  ? (language === \"it\" ? \"Inizia a scorrere per trovare il tuo posto perfetto.\" : \"Start swiping to find your perfect place to live.\")\n                  : (language === \"it\" ? \"Aggiungi il tuo primo annuncio per iniziare a trovare inquilini.\" : \"Add your first property listing to start finding tenants.\")}\n              </p>\n\n              <div className=\"bg-gray-50 rounded-2xl p-6 w-full mb-8\">\n                <div className=\"flex items-center gap-4 mb-4\">\n                  {formData.images.length > 0 ? (\n                    <img src={formData.images[0]} alt={formData.name} className=\"w-12 h-12 rounded-full object-cover\" />\n                  ) : (\n                    <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-xl\">\n                      {formData.name.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                  <div className=\"text-left\">\n                    <h3 className=\"font-bold text-gray-900\">{formData.name}</h3>\n                    <p className=\"text-sm text-gray-500\">{user?.email || ''}</p>\n                  </div>\n                </div>\n                <div className=\"flex flex-wrap gap-2\">\n                  <span className={`px-3 py-1 rounded-full text-xs font-bold ${\n                    formData.role === \"tenant\" ? \"bg-primary/10 text-primary\" : \"bg-secondary/10 text-secondary\"\n                  }`}>\n                    {formData.role === \"tenant\" \n                      ? (language === \"it\" ? \"Inquilino\" : \"Tenant\") \n                      : (language === \"it\" ? \"Proprietario\" : \"Landlord\")}\n                  </span>\n                  {formData.city && (\n                    <span className=\"px-3 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-600\">\n                      {formData.city}\n                    </span>\n                  )}\n                  {formData.role === \"tenant\" && formData.lookingFor.map(item => (\n                    <span key={item} className=\"px-3 py-1 rounded-full text-xs font-bold bg-gray-100 text-gray-600\">\n                      {item === \"homes\" \n                        ? (language === \"it\" ? \"Case\" : \"Homes\") \n                        : (language === \"it\" ? \"Coinquilini\" : \"Roommates\")}\n                    </span>\n                  ))}\n                </div>\n              </div>\n\n              <button \n                onClick={handleComplete}\n                disabled={loading}\n                className=\"w-full bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50\"\n                data-testid=\"button-complete\"\n              >\n                {loading \n                  ? (language === \"it\" ? \"Creazione...\" : \"Creating...\") \n                  : (language === \"it\" ? \"Inizia ad esplorare\" : \"Start Exploring\")} \n                {!loading && <ArrowRight size={20} />}\n              </button>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":52131,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4887,"size_tokens":null},"client/src/components/Layout.tsx":{"content":"import { Home, Heart, MessageCircle, User, Building, ListPlus } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { cn } from \"@/lib/utils\";\nimport logo from \"@assets/logo-removebg-preview_1765398497308.png\";\n\nexport function BottomNav({ role }: { role: \"tenant\" | \"landlord\" }) {\n  const [location] = useLocation();\n  const { t } = useLanguage();\n\n  const tenantLinks = [\n    { href: \"/tenant\", icon: Home, label: t(\"nav.home\") },\n    { href: \"/tenant/favorites\", icon: Heart, label: t(\"nav.favorites\") },\n    { href: \"/tenant/matches\", icon: MessageCircle, label: t(\"nav.matches\") },\n    { href: \"/tenant/profile\", icon: User, label: t(\"nav.profile\") },\n  ];\n\n  const landlordLinks = [\n    { href: \"/landlord\", icon: User, label: \"Tenants\" }, // \"Swipe Tenants\"\n    { href: \"/landlord/listings\", icon: ListPlus, label: t(\"nav.listings\") },\n    { href: \"/landlord/matches\", icon: MessageCircle, label: t(\"nav.matches\") },\n    { href: \"/landlord/profile\", icon: Building, label: t(\"nav.profile\") },\n  ];\n\n  const links = role === \"tenant\" ? tenantLinks : landlordLinks;\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 pb-safe-bottom pt-2 px-6 shadow-[0_-5px_15px_rgba(0,0,0,0.02)] z-50\">\n      <div className=\"flex justify-between items-center max-w-md mx-auto\">\n        {links.map((link) => {\n          const isActive = location === link.href;\n          return (\n            <Link key={link.href} href={link.href} className={cn(\n              \"flex flex-col items-center gap-1 p-2 transition-colors duration-200\",\n              isActive ? \"text-primary\" : \"text-gray-400 hover:text-gray-600\"\n            )}>\n              <link.icon className={cn(\"w-6 h-6\", isActive && \"fill-current\")} strokeWidth={isActive ? 2.5 : 2} />\n              <span className=\"text-[10px] font-medium\">{link.label}</span>\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n\nexport function TopBar({ title, actionIcon: ActionIcon, onAction, actionPosition = \"right\" }: { title?: string, actionIcon?: any, onAction?: () => void, actionPosition?: \"left\" | \"right\" }) {\n  const { t } = useLanguage();\n  return (\n    <header className=\"fixed top-0 left-0 right-0 h-14 bg-white/80 backdrop-blur-md z-40 flex items-center justify-between px-4 border-b border-gray-50\">\n      <div className=\"w-10 flex justify-start\">\n        {ActionIcon && actionPosition === \"left\" && (\n          <button onClick={onAction} className=\"p-2 text-gray-600 hover:text-primary transition-colors\">\n            <ActionIcon className=\"w-5 h-5\" />\n          </button>\n        )}\n      </div>\n      {title ? (\n        <h1 className=\"text-lg font-bold text-gray-900\">{title}</h1>\n      ) : (\n        <div className=\"flex items-center gap-2\">\n          <img src={logo} alt=\"Tenant Logo\" className=\"w-8 h-8 object-contain\" />\n          <h1 className=\"text-lg font-bold text-gray-900\">{t(\"app.name\")}</h1>\n        </div>\n      )}\n      <div className=\"w-10 flex justify-end\">\n        {ActionIcon && actionPosition === \"right\" && (\n          <button onClick={onAction} className=\"p-2 text-gray-600 hover:text-primary transition-colors\">\n            <ActionIcon className=\"w-5 h-5\" />\n          </button>\n        )}\n      </div>\n    </header>\n  );\n}\n","path":null,"size_bytes":3326,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":2001,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8608,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","path":null,"size_bytes":1828,"size_tokens":null},"client/src/pages/RoleSelection.tsx":{"content":"import { Link } from \"wouter\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { motion } from \"framer-motion\";\nimport { User, Building2, ChevronRight } from \"lucide-react\";\n\nexport default function RoleSelection() {\n  const { t } = useLanguage();\n\n  return (\n    <div className=\"min-h-full bg-white p-6 flex flex-col\">\n      <div className=\"flex-1 flex flex-col justify-center max-w-md mx-auto w-full gap-8\">\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center\"\n        >\n          <h1 className=\"text-3xl font-black text-gray-900 mb-2\">{t(\"role.title\")}</h1>\n          <p className=\"text-gray-500\">Select how you want to use Tenant</p>\n        </motion.div>\n\n        <div className=\"grid gap-4\">\n          <Link href=\"/tenant\" className=\"block\">\n            <motion.div \n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n              className=\"group p-6 rounded-3xl border-2 border-gray-100 hover:border-primary/50 hover:bg-primary/5 cursor-pointer transition-all relative overflow-hidden\"\n            >\n              <div className=\"flex items-center gap-4 z-10 relative\">\n                <div className=\"w-14 h-14 rounded-2xl bg-blue-100 flex items-center justify-center text-primary group-hover:bg-primary group-hover:text-white transition-colors\">\n                  <User size={28} strokeWidth={2.5} />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-xl font-bold text-gray-900\">{t(\"role.tenant\")}</h3>\n                  <p className=\"text-sm text-gray-500\">I'm looking for a home</p>\n                </div>\n                <ChevronRight className=\"text-gray-300 group-hover:text-primary transition-colors\" />\n              </div>\n            </motion.div>\n          </Link>\n\n          <Link href=\"/landlord\" className=\"block\">\n            <motion.div \n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n              className=\"group p-6 rounded-3xl border-2 border-gray-100 hover:border-secondary/50 hover:bg-secondary/5 cursor-pointer transition-all relative overflow-hidden\"\n            >\n              <div className=\"flex items-center gap-4 z-10 relative\">\n                <div className=\"w-14 h-14 rounded-2xl bg-purple-100 flex items-center justify-center text-secondary group-hover:bg-secondary group-hover:text-white transition-colors\">\n                  <Building2 size={28} strokeWidth={2.5} />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-xl font-bold text-gray-900\">{t(\"role.landlord\")}</h3>\n                  <p className=\"text-sm text-gray-500\">I want to list a property</p>\n                </div>\n                <ChevronRight className=\"text-gray-300 group-hover:text-secondary transition-colors\" />\n              </div>\n            </motion.div>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":3001,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/components/ui/input-group.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nfunction InputGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"input-group\"\n      role=\"group\"\n      className={cn(\n        \"group/input-group border-input dark:bg-input/30 shadow-xs relative flex w-full items-center rounded-md border outline-none transition-[color,box-shadow]\",\n        \"h-9 has-[>textarea]:h-auto\",\n\n        // Variants based on alignment.\n        \"has-[>[data-align=inline-start]]:[&>input]:pl-2\",\n        \"has-[>[data-align=inline-end]]:[&>input]:pr-2\",\n        \"has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3\",\n        \"has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3\",\n\n        // Focus state.\n        \"has-[[data-slot=input-group-control]:focus-visible]:ring-ring has-[[data-slot=input-group-control]:focus-visible]:ring-1\",\n\n        // Error state.\n        \"has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40\",\n\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupAddonVariants = cva(\n  \"text-muted-foreground flex h-auto cursor-text select-none items-center justify-center gap-2 py-1.5 text-sm font-medium group-data-[disabled=true]/input-group:opacity-50 [&>kbd]:rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      align: {\n        \"inline-start\":\n          \"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]\",\n        \"inline-end\":\n          \"order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]\",\n        \"block-start\":\n          \"[.border-b]:pb-3 order-first w-full justify-start px-3 pt-3 group-has-[>input]/input-group:pt-2.5\",\n        \"block-end\":\n          \"[.border-t]:pt-3 order-last w-full justify-start px-3 pb-3 group-has-[>input]/input-group:pb-2.5\",\n      },\n    },\n    defaultVariants: {\n      align: \"inline-start\",\n    },\n  }\n)\n\nfunction InputGroupAddon({\n  className,\n  align = \"inline-start\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupAddonVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"input-group-addon\"\n      data-align={align}\n      className={cn(inputGroupAddonVariants({ align }), className)}\n      onClick={(e) => {\n        if ((e.target as HTMLElement).closest(\"button\")) {\n          return\n        }\n        e.currentTarget.parentElement?.querySelector(\"input\")?.focus()\n      }}\n      {...props}\n    />\n  )\n}\n\nconst inputGroupButtonVariants = cva(\n  \"flex items-center gap-2 text-sm shadow-none\",\n  {\n    variants: {\n      size: {\n        xs: \"h-6 gap-1 rounded-[calc(var(--radius)-5px)] px-2 has-[>svg]:px-2 [&>svg:not([class*='size-'])]:size-3.5\",\n        sm: \"h-8 gap-1.5 rounded-md px-2.5 has-[>svg]:px-2.5\",\n        \"icon-xs\":\n          \"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0\",\n        \"icon-sm\": \"size-8 p-0 has-[>svg]:p-0\",\n      },\n    },\n    defaultVariants: {\n      size: \"xs\",\n    },\n  }\n)\n\nfunction InputGroupButton({\n  className,\n  type = \"button\",\n  variant = \"ghost\",\n  size = \"xs\",\n  ...props\n}: Omit<React.ComponentProps<typeof Button>, \"size\"> &\n  VariantProps<typeof inputGroupButtonVariants>) {\n  return (\n    <Button\n      type={type}\n      data-size={size}\n      variant={variant}\n      className={cn(inputGroupButtonVariants({ size }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupText({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      className={cn(\n        \"text-muted-foreground flex items-center gap-2 text-sm [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupInput({\n  className,\n  ...props\n}: React.ComponentProps<\"input\">) {\n  return (\n    <Input\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction InputGroupTextarea({\n  className,\n  ...props\n}: React.ComponentProps<\"textarea\">) {\n  return (\n    <Textarea\n      data-slot=\"input-group-control\"\n      className={cn(\n        \"flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  InputGroup,\n  InputGroupAddon,\n  InputGroupButton,\n  InputGroupText,\n  InputGroupInput,\n  InputGroupTextarea,\n}\n","path":null,"size_bytes":4971,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"import * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload\n            .filter((item) => item.type !== \"none\")\n            .map((item, index) => {\n              const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n              const itemConfig = getPayloadConfigFromPayload(config, item, key)\n              const indicatorColor = color || item.payload.fill || item.color\n\n              return (\n                <div\n                  key={item.dataKey}\n                  className={cn(\n                    \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                    indicator === \"dot\" && \"items-center\"\n                  )}\n                >\n                  {formatter && item?.value !== undefined && item.name ? (\n                    formatter(item.value, item.name, item, index, item.payload)\n                  ) : (\n                    <>\n                      {itemConfig?.icon ? (\n                        <itemConfig.icon />\n                      ) : (\n                        !hideIndicator && (\n                          <div\n                            className={cn(\n                              \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                              {\n                                \"h-2.5 w-2.5\": indicator === \"dot\",\n                                \"w-1\": indicator === \"line\",\n                                \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                  indicator === \"dashed\",\n                                \"my-0.5\": nestLabel && indicator === \"dashed\",\n                              }\n                            )}\n                            style={\n                              {\n                                \"--color-bg\": indicatorColor,\n                                \"--color-border\": indicatorColor,\n                              } as React.CSSProperties\n                            }\n                          />\n                        )\n                      )}\n                      <div\n                        className={cn(\n                          \"flex flex-1 justify-between leading-none\",\n                          nestLabel ? \"items-end\" : \"items-center\"\n                        )}\n                      >\n                        <div className=\"grid gap-1.5\">\n                          {nestLabel ? tooltipLabel : null}\n                          <span className=\"text-muted-foreground\">\n                            {itemConfig?.label || item.name}\n                          </span>\n                        </div>\n                        {item.value && (\n                          <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                            {item.value.toLocaleString()}\n                          </span>\n                        )}\n                      </div>\n                    </>\n                  )}\n                </div>\n              )\n            })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload\n          .filter((item) => item.type !== \"none\")\n          .map((item) => {\n            const key = `${nameKey || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n            return (\n              <div\n                key={item.value}\n                className={cn(\n                  \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n                )}\n              >\n                {itemConfig?.icon && !hideIcon ? (\n                  <itemConfig.icon />\n                ) : (\n                  <div\n                    className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                    style={{\n                      backgroundColor: item.color,\n                    }}\n                  />\n                )}\n                {itemConfig?.label}\n              </div>\n            )\n          })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10763,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1598,"size_tokens":null},"client/src/components/SwipeCard.tsx":{"content":"import { motion, useMotionValue, useTransform, PanInfo } from \"framer-motion\";\nimport { X, Heart, MapPin, Euro } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { Property, Roommate } from \"@shared/schema\";\n\nimport { Link, useLocation } from \"wouter\";\n\ninterface SwipeCardProps {\n  data: Property | Roommate;\n  onSwipe: (direction: \"left\" | \"right\") => void;\n  type: \"property\" | \"tenant\";\n}\n\nexport function SwipeCard({ data, onSwipe, type }: SwipeCardProps) {\n  const { t } = useLanguage();\n  const [, setLocation] = useLocation();\n  const [exitX, setExitX] = useState<number>(0);\n  const x = useMotionValue(0);\n  const rotate = useTransform(x, [-200, 200], [-15, 15]);\n  const opacity = useTransform(x, [-200, -150, 0, 150, 200], [0, 1, 1, 1, 0]);\n  \n  const likeOpacity = useTransform(x, [50, 150], [0, 1]);\n  const nopeOpacity = useTransform(x, [-150, -50], [1, 0]);\n\n  const handleDragEnd = (event: any, info: PanInfo) => {\n    if (info.offset.x > 100) {\n      setExitX(200);\n      onSwipe(\"right\");\n    } else if (info.offset.x < -100) {\n      setExitX(-200);\n      onSwipe(\"left\");\n    }\n  };\n\n  const handleTap = () => {\n     if (type === \"property\") {\n       setLocation(`/property/${data.id}`);\n     } else {\n       setLocation(`/tenant-details/${data.id}`);\n     }\n  };\n\n  const isProperty = type === \"property\";\n  const propData = data as Property;\n  const tenantData = data as Roommate;\n\n  const imageUrl = data.images && data.images.length > 0 \n    ? data.images[0] \n    : \"https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=800&q=80\";\n\n  return (\n    <motion.div\n      style={{ x, rotate, opacity }}\n      drag=\"x\"\n      dragConstraints={{ left: 0, right: 0 }}\n      onDragEnd={handleDragEnd}\n      onTap={handleTap}\n      className=\"absolute top-0 left-0 w-full h-full cursor-grab active:cursor-grabbing\"\n      initial={{ scale: 0.95, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1, x: exitX }}\n      transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\n    >\n      <div \n        className=\"relative w-full h-[65vh] rounded-3xl overflow-hidden shadow-xl bg-white select-none\"\n        style={{ backgroundColor: \"white\", transform: \"translateZ(0)\" }} // Force opaque background and hardware acceleration\n      >\n        {/* Image */}\n        <div className=\"absolute inset-0 bg-gray-200\"> {/* Fallback background color */}\n          <img \n            src={imageUrl} \n            alt={isProperty ? propData.title : tenantData.name}\n            className=\"w-full h-full object-cover pointer-events-none\"\n          />\n          {/* Gradient Overlay */}\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent pointer-events-none\" />\n        </div>\n\n        {/* Status Badges (Like/Nope) */}\n        <motion.div \n          style={{ opacity: likeOpacity }} \n          className=\"absolute top-8 left-8 border-4 border-green-500 rounded-lg px-4 py-1 rotate-[-15deg] z-20\"\n        >\n          <span className=\"text-green-500 font-bold text-4xl tracking-widest uppercase\">\n            {t(\"action.like\")}\n          </span>\n        </motion.div>\n\n        <motion.div \n          style={{ opacity: nopeOpacity }} \n          className=\"absolute top-8 right-8 border-4 border-red-500 rounded-lg px-4 py-1 rotate-[15deg] z-20\"\n        >\n          <span className=\"text-red-500 font-bold text-4xl tracking-widest uppercase\">\n            {t(\"action.skip\")}\n          </span>\n        </motion.div>\n\n        {/* Content */}\n        <div className=\"absolute bottom-0 left-0 right-0 p-6 text-white z-10\">\n          {isProperty ? (\n            <>\n              <div className=\"flex items-start justify-between mb-2\">\n                <h2 className=\"text-3xl font-bold leading-tight drop-shadow-md\">{propData.title}</h2>\n                <div className=\"bg-white/20 backdrop-blur-md px-3 py-1 rounded-full text-lg font-bold\">\n                  €{propData.price}\n                </div>\n              </div>\n              <div className=\"flex items-center gap-2 text-gray-200 mb-4 text-lg\">\n                <MapPin className=\"w-5 h-5\" />\n                {propData.area}, {propData.city}\n              </div>\n              \n              <div className=\"flex flex-wrap gap-2 mb-2\">\n                {propData.beds} {t(\"prop.beds\")} • {propData.baths} {t(\"prop.baths\")}\n                {propData.furnished && <span className=\"bg-white/20 backdrop-blur-sm px-2 py-0.5 rounded text-sm\">{t(\"prop.furnished\")}</span>}\n              </div>\n            </>\n          ) : (\n             <>\n              <div className=\"flex items-end gap-3 mb-2\">\n                <h2 className=\"text-3xl font-bold drop-shadow-md\">{tenantData.name}, {tenantData.age}</h2>\n              </div>\n              <div className=\"flex items-center gap-2 text-gray-200 mb-4 text-lg\">\n                 {tenantData.occupation}\n              </div>\n              <div className=\"flex items-center gap-2 text-lg font-semibold text-primary-foreground mb-4\">\n                 Budget: €{tenantData.budget}\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {tenantData.preferences.map(pref => (\n                  <span key={pref} className=\"bg-white/20 backdrop-blur-sm px-2 py-1 rounded-full text-sm\">\n                    {pref}\n                  </span>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Action Buttons (outside card for easier tapping on small screens, or we can overlay them) */}\n      {/* For this design, let's put them below the card in the parent container, but here we can add visual cues? No, keep it clean. */}\n    </motion.div>\n  );\n}\n","path":null,"size_bytes":5794,"size_tokens":null},"client/src/pages/LandlordListings.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { BottomNav, TopBar } from \"@/components/Layout\";\nimport { Link } from \"wouter\";\nimport { Plus, Edit2, MapPin, Trash2, Home } from \"lucide-react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function LandlordListings() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: listings = [], isLoading } = useQuery({\n    queryKey: [\"landlordProperties\"],\n    queryFn: api.getLandlordProperties,\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: (propertyId: string) => api.deleteProperty(propertyId),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"landlordProperties\"] });\n      toast({\n        title: \"Property deleted\",\n        description: \"The property has been removed successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to delete property\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleDelete = (propertyId: string, propertyTitle: string) => {\n    if (confirm(`Are you sure you want to delete \"${propertyTitle}\"?`)) {\n      deleteMutation.mutate(propertyId);\n    }\n  };\n\n  return (\n    <div className=\"min-h-full bg-gray-50 pb-20\">\n      <TopBar \n        title={t(\"nav.listings\")} \n        actionIcon={Plus} \n        onAction={() => window.location.href = \"/landlord/create\"}\n      />\n\n      <main className=\"pt-20 px-4 max-w-md mx-auto space-y-4\">\n        {isLoading ? (\n          <div className=\"text-center p-8\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n            <p className=\"text-gray-500\">Loading properties...</p>\n          </div>\n        ) : listings.length === 0 ? (\n          <div className=\"text-center p-8 mt-12\">\n            <div className=\"w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center\">\n              <Home className=\"text-gray-400\" size={32} />\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-900 mb-2\">No properties yet</h3>\n            <p className=\"text-gray-500\">Create your first listing to get started!</p>\n            <Link href=\"/landlord/create\" className=\"mt-6 inline-block bg-primary text-white font-bold px-6 py-3 rounded-2xl shadow-lg shadow-primary/30 hover:shadow-xl transition-all\">\n            Create Listing\n          </Link>\n          </div>\n        ) : (\n          listings.map((prop) => (\n            <div key={prop.id} className=\"bg-white rounded-2xl p-4 shadow-sm flex gap-4 border border-gray-100\">\n              <div className=\"w-24 h-24 rounded-xl overflow-hidden flex-shrink-0 bg-gray-100\">\n                <img \n                  src={prop.images && prop.images.length > 0 ? prop.images[0] : \"https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=800&q=80\"} \n                  alt={prop.title} \n                  className=\"w-full h-full object-cover\" \n                />\n              </div>\n              <div className=\"flex-1 flex flex-col justify-between\">\n                <div>\n                  <div className=\"flex justify-between items-start\">\n                    <h3 className=\"font-bold text-gray-900 line-clamp-1\">{prop.title}</h3>\n                    <span className=\"text-xs font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-full\">Active</span>\n                  </div>\n                  <div className=\"flex items-center gap-1 text-xs text-gray-500 mt-1\">\n                    <MapPin size={12} />\n                    <span>{prop.city}</span>\n                  </div>\n                </div>\n                <div className=\"flex justify-between items-end mt-2\">\n                  <span className=\"font-bold text-primary\">€{prop.price}<span className=\"text-xs text-gray-400 font-normal\">/mo</span></span>\n                  <div className=\"flex gap-2\">\n                    <button className=\"text-sm font-semibold text-gray-600 hover:text-primary flex items-center gap-1\">\n                      <Edit2 size={14} /> Edit\n                    </button>\n                    <button \n                      onClick={() => handleDelete(prop.id, prop.title)}\n                      disabled={deleteMutation.isPending}\n                      className=\"text-sm font-semibold text-red-600 hover:text-red-700 flex items-center gap-1 disabled:opacity-50\"\n                    >\n                      <Trash2 size={14} /> Delete\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </main>\n\n      {/* Floating Action Button (Alternative to TopBar action) */}\n      <Link href=\"/landlord/create\" className=\"fixed bottom-24 right-6 w-14 h-14 bg-primary text-white rounded-full shadow-lg shadow-primary/30 flex items-center justify-center hover:scale-105 active:scale-95 transition-all z-40\">\n        <Plus size={28} />\n      </Link>\n\n      <BottomNav role=\"landlord\" />\n    </div>\n  );\n}\n","path":null,"size_bytes":5216,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-full w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":709,"size_tokens":null},"client/src/components/ui/item.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction ItemGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      role=\"list\"\n      data-slot=\"item-group\"\n      className={cn(\"group/item-group flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"item-separator\"\n      orientation=\"horizontal\"\n      className={cn(\"my-0\", className)}\n      {...props}\n    />\n  )\n}\n\nconst itemVariants = cva(\n  \"group/item [a]:hover:bg-accent/50 focus-visible:border-ring focus-visible:ring-ring/50 [a]:transition-colors flex flex-wrap items-center rounded-md border border-transparent text-sm outline-none transition-colors duration-100 focus-visible:ring-[3px]\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border-border\",\n        muted: \"bg-muted/50\",\n      },\n      size: {\n        default: \"gap-4 p-4 \",\n        sm: \"gap-2.5 px-4 py-3\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Item({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> &\n  VariantProps<typeof itemVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n  return (\n    <Comp\n      data-slot=\"item\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(itemVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nconst itemMediaVariants = cva(\n  \"flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:translate-y-0.5 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted size-8 rounded-sm border [&_svg:not([class*='size-'])]:size-4\",\n        image:\n          \"size-10 overflow-hidden rounded-sm [&_img]:size-full [&_img]:object-cover\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction ItemMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof itemMediaVariants>) {\n  return (\n    <div\n      data-slot=\"item-media\"\n      data-variant={variant}\n      className={cn(itemMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction ItemContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-content\"\n      className={cn(\n        \"flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-title\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"item-description\"\n      className={cn(\n        \"text-muted-foreground line-clamp-2 text-balance text-sm font-normal leading-normal\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemActions({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-actions\"\n      className={cn(\"flex items-center gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction ItemHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-header\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ItemFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"item-footer\"\n      className={cn(\n        \"flex basis-full items-center justify-between gap-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Item,\n  ItemMedia,\n  ItemContent,\n  ItemActions,\n  ItemGroup,\n  ItemSeparator,\n  ItemTitle,\n  ItemDescription,\n  ItemHeader,\n  ItemFooter,\n}\n","path":null,"size_bytes":4494,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1877,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"grid place-content-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1031,"size_tokens":null},"client/src/components/ui/spinner.tsx":{"content":"import { Loader2Icon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\n  return (\n    <Loader2Icon\n      role=\"status\"\n      aria-label=\"Loading\"\n      className={cn(\"size-4 animate-spin\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Spinner }\n","path":null,"size_bytes":331,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // @replit\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \",\n  {\n    variants: {\n      variant: {\n        default:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary:\n          // @replit no hover because we use hover-elevate\n          \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          // @replit shadow-xs instead of shadow, no hover because we use hover-elevate\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n          // @replit shadow-xs\" - use badge outline variable\n        outline: \"text-foreground border [border-color:var(--badge-outline)]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1522,"size_tokens":null},"client/src/pages/PropertyDetails.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { useRoute, Link } from \"wouter\";\nimport { ArrowLeft, Heart, Share2, MapPin, Bed, Bath, Building2 } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useEffect } from \"react\";\nimport useEmblaCarousel from \"embla-carousel-react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function PropertyDetails() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [, params] = useRoute(\"/property/:id\");\n  const id = params?.id;\n  const [emblaRef] = useEmblaCarousel({ loop: true });\n\n  const { data: property, isLoading } = useQuery({\n    queryKey: [\"property\", id],\n    queryFn: () => api.getProperty(id!),\n    enabled: !!id,\n  });\n\n  const { data: favoriteStatus } = useQuery({\n    queryKey: [\"favorite\", id],\n    queryFn: () => api.checkFavorite(id!),\n    enabled: !!id,\n  });\n\n  const addFavoriteMutation = useMutation({\n    mutationFn: () => api.addFavorite(id!),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"favorite\", id] });\n      queryClient.invalidateQueries({ queryKey: [\"favorites\"] });\n      toast({\n        title: \"Added to favorites\",\n        description: \"Property saved successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to add to favorites\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const removeFavoriteMutation = useMutation({\n    mutationFn: () => api.removeFavorite(id!),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"favorite\", id] });\n      queryClient.invalidateQueries({ queryKey: [\"favorites\"] });\n      toast({\n        title: \"Removed from favorites\",\n        description: \"Property removed successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to remove from favorites\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleToggleFavorite = () => {\n    if (favoriteStatus?.isFavorited) {\n      removeFavoriteMutation.mutate();\n    } else {\n      addFavoriteMutation.mutate();\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-full bg-white flex items-center justify-center\">\n        <div className=\"text-center p-8\">\n          <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-gray-500\">Loading property...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!property) return <div className=\"min-h-full bg-white flex items-center justify-center p-8\">Property not found</div>;\n\n  return (\n    <div className=\"min-h-full bg-white pb-24\">\n      {/* Header Image Carousel */}\n      <div className=\"relative h-[50vh] bg-gray-100 overflow-hidden\" ref={emblaRef}>\n        <div className=\"flex h-full\">\n          {property.images && property.images.length > 0 ? property.images.map((src, index) => (\n            <div className=\"flex-[0_0_100%] min-w-0 relative\" key={index}>\n              <img src={src} alt={`${property.title} - ${index + 1}`} className=\"w-full h-full object-cover\" />\n            </div>\n          )) : (\n            <div className=\"flex-[0_0_100%] min-w-0 relative\">\n              <img src=\"https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=800&q=80\" alt={property.title} className=\"w-full h-full object-cover\" />\n            </div>\n          )}\n        </div>\n        \n        {/* Nav overlay */}\n        <div className=\"absolute top-0 left-0 right-0 p-4 pt-safe-top flex justify-between items-start bg-gradient-to-b from-black/50 to-transparent pointer-events-none\">\n          <Link href=\"/tenant\" className=\"p-2 bg-white/20 backdrop-blur-md rounded-full text-white hover:bg-white/30 transition-colors pointer-events-auto\">\n            <ArrowLeft size={24} />\n          </Link>\n          <div className=\"flex gap-2\">\n            <button className=\"p-2 bg-white/20 backdrop-blur-md rounded-full text-white hover:bg-white/30 transition-colors pointer-events-auto\">\n              <Share2 size={24} />\n            </button>\n          </div>\n        </div>\n\n        {/* Pagination Dots */}\n        {property.images && property.images.length > 1 && (\n          <div className=\"absolute bottom-4 left-0 right-0 flex justify-center gap-2 z-10\">\n            {property.images.map((_, i) => (\n              <div key={i} className=\"w-1.5 h-1.5 rounded-full bg-white/80 shadow-sm\" />\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"px-5 py-6 -mt-8 relative bg-white rounded-t-[2rem] shadow-[-10px_-10px_30px_rgba(0,0,0,0.1)]\">\n        <div className=\"w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6\" />\n\n        <div className=\"flex justify-between items-start mb-2\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 leading-tight\">{property.title}</h1>\n            <div className=\"flex items-center gap-1 text-gray-500 mt-1\">\n              <MapPin size={16} />\n              <span>{property.area}, {property.city}</span>\n            </div>\n          </div>\n          <div className=\"text-right\">\n             <div className=\"text-xl font-bold text-primary\">€{property.price}</div>\n             <div className=\"text-xs text-gray-400\">/month</div>\n          </div>\n        </div>\n\n        {/* Features */}\n        <div className=\"flex gap-4 py-6 overflow-x-auto no-scrollbar\">\n          <div className=\"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-2xl border border-gray-100 whitespace-nowrap\">\n            <Bed size={20} className=\"text-gray-400\" />\n            <span className=\"font-semibold text-gray-700\">{property.beds} {t(\"prop.beds\")}</span>\n          </div>\n          <div className=\"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-2xl border border-gray-100 whitespace-nowrap\">\n            <Bath size={20} className=\"text-gray-400\" />\n            <span className=\"font-semibold text-gray-700\">{property.baths} {t(\"prop.baths\")}</span>\n          </div>\n          <div className=\"flex items-center gap-2 px-4 py-2 bg-gray-50 rounded-2xl border border-gray-100 whitespace-nowrap\">\n             <Building2 size={20} className=\"text-gray-400\" />\n            <span className=\"font-semibold text-gray-700\">{property.type}</span>\n          </div>\n        </div>\n\n        <div className=\"mb-8\">\n          <h2 className=\"text-lg font-bold text-gray-900 mb-3\">{t(\"form.desc\")}</h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {property.description}\n          </p>\n        </div>\n\n        {/* Landlord Preview */}\n        <div className=\"flex items-center gap-4 p-4 bg-gray-50 rounded-2xl mb-24\">\n          <div className=\"w-12 h-12 rounded-full bg-gray-300 overflow-hidden\">\n             <img src=\"https://images.unsplash.com/photo-1560250097-0b93528c311a?auto=format&fit=crop&w=100&q=80\" className=\"w-full h-full object-cover\" />\n          </div>\n          <div>\n            <div className=\"font-bold text-gray-900\">James Estate</div>\n            <div className=\"text-xs text-gray-500\">Listed 2 days ago</div>\n          </div>\n          <button className=\"ml-auto text-primary font-bold text-sm bg-white px-3 py-1.5 rounded-full shadow-sm border border-gray-100\">\n            Profile\n          </button>\n        </div>\n      </div>\n\n      {/* Footer Action */}\n      <div className=\"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-100 flex gap-4 items-center z-50 px-6 pb-8\">\n        <button \n          onClick={handleToggleFavorite}\n          disabled={addFavoriteMutation.isPending || removeFavoriteMutation.isPending}\n          className={cn(\n            \"p-4 rounded-2xl border-2 transition-colors\",\n            favoriteStatus?.isFavorited ? \"border-primary bg-primary/5 text-primary\" : \"border-gray-200 text-gray-400 hover:border-gray-300\",\n            (addFavoriteMutation.isPending || removeFavoriteMutation.isPending) && \"opacity-50 cursor-not-allowed\"\n          )}\n        >\n          <Heart fill={favoriteStatus?.isFavorited ? \"currentColor\" : \"none\"} />\n        </button>\n        <Link href={`/chat/new?property=${id}`} className=\"flex-1 bg-primary text-white font-bold text-lg py-4 rounded-2xl shadow-lg shadow-primary/25 hover:shadow-xl active:scale-[0.98] transition-all flex items-center justify-center\">\n          {t(\"action.contact\")}\n        </Link>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":8631,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3835,"size_tokens":null},"client/src/lib/mockData.ts":{"content":"export interface Property {\n  id: string;\n  title: string;\n  city: string;\n  area: string;\n  price: number;\n  image: string;\n  images: string[];\n  type: string;\n  bedrooms: number;\n  bathrooms: number;\n  furnished: boolean;\n  pets: boolean;\n  description: string;\n}\n\nexport interface TenantProfile {\n  id: string;\n  name: string;\n  age: number;\n  budget: number;\n  image: string;\n  images: string[];\n  bio: string;\n  occupation: string;\n  moveInDate: string;\n  preferences: string[];\n}\n\nexport const mockProperties: Property[] = [\n  {\n    id: \"1\",\n    title: \"Modern Loft in Downtown\",\n    city: \"Milano\",\n    area: \"Navigli\",\n    price: 1200,\n    image: \"https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=800&q=80\",\n    images: [\n      \"https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1505691938895-1758d7feb511?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1513694203232-719a280e022f?auto=format&fit=crop&w=800&q=80\"\n    ],\n    type: \"Apartment\",\n    bedrooms: 1,\n    bathrooms: 1,\n    furnished: true,\n    pets: true,\n    description: \"Beautiful open space loft in the heart of Navigli. High ceilings, industrial style, and a private balcony.\"\n  },\n  {\n    id: \"2\",\n    title: \"Sunny Two-Bedroom\",\n    city: \"Roma\",\n    area: \"Trastevere\",\n    price: 1500,\n    image: \"https://images.unsplash.com/photo-1493809842364-78817add7ffb?auto=format&fit=crop&w=800&q=80\",\n    images: [\n      \"https://images.unsplash.com/photo-1493809842364-78817add7ffb?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1484154218962-a1c002085d2f?auto=format&fit=crop&w=800&q=80\"\n    ],\n    type: \"Apartment\",\n    bedrooms: 2,\n    bathrooms: 1,\n    furnished: false,\n    pets: false,\n    description: \"Charming apartment in a historic building. Great light, quiet street, close to all amenities.\"\n  },\n  {\n    id: \"3\",\n    title: \"Cozy Studio near University\",\n    city: \"Bologna\",\n    area: \"Centro\",\n    price: 750,\n    image: \"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?auto=format&fit=crop&w=800&q=80\",\n    images: [\n      \"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1507089947368-19c1da97ee87?auto=format&fit=crop&w=800&q=80\"\n    ],\n    type: \"Studio\",\n    bedrooms: 1,\n    bathrooms: 1,\n    furnished: true,\n    pets: false,\n    description: \"Perfect for students. Compact, efficient, and right next to the university campus.\"\n  },\n  {\n    id: \"4\",\n    title: \"Luxury Penthouse with View\",\n    city: \"Milano\",\n    area: \"City Life\",\n    price: 3500,\n    image: \"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=800&q=80\",\n    images: [\n      \"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1513584685908-78720f82cd82?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1502005229762-cf1b2da7c5d6?auto=format&fit=crop&w=800&q=80\"\n    ],\n    type: \"Penthouse\",\n    bedrooms: 3,\n    bathrooms: 2,\n    furnished: true,\n    pets: true,\n    description: \"Exclusive penthouse with panoramic views of the city skyline. Concierge service, gym, and parking included.\"\n  }\n];\n\nexport const mockTenants: TenantProfile[] = [\n  {\n    id: \"t1\",\n    name: \"Giulia\",\n    age: 26,\n    budget: 900,\n    image: \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=800&q=80\",\n    images: [\n      \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&w=800&q=80\"\n    ],\n    bio: \"Graphic designer looking for a bright studio. I'm quiet, tidy, and love plants!\",\n    occupation: \"Designer\",\n    moveInDate: \"Oct 1\",\n    preferences: [\"No pets\", \"Non-smoker\", \"Central\"]\n  },\n  {\n    id: \"t2\",\n    name: \"Marco\",\n    age: 30,\n    budget: 1300,\n    image: \"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=800&q=80\",\n    images: [\n      \"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=800&q=80\"\n    ],\n    bio: \"Software engineer moving to the city for work. Looking for a modern 1-bedroom.\",\n    occupation: \"Developer\",\n    moveInDate: \"ASAP\",\n    preferences: [\"Parking\", \"Fiber internet\"]\n  },\n  {\n    id: \"t3\",\n    name: \"Elena & Tom\",\n    age: 28,\n    budget: 1600,\n    image: \"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?auto=format&fit=crop&w=800&q=80\",\n    images: [\n       \"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?auto=format&fit=crop&w=800&q=80\",\n       \"https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=800&q=80\"\n    ],\n    bio: \"Young couple looking for our first shared home. We both work in marketing.\",\n    occupation: \"Marketing\",\n    moveInDate: \"Nov 1\",\n    preferences: [\"Balcony\", \"Pet friendly\"]\n  }\n];\n\nexport const mockRoommates: TenantProfile[] = [\n  {\n    id: \"r1\",\n    name: \"Alessandro\",\n    age: 24,\n    budget: 600,\n    image: \"https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?auto=format&fit=crop&w=800&q=80\",\n    images: [\n      \"https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?auto=format&fit=crop&w=800&q=80\"\n    ],\n    bio: \"Student at Politecnico. Looking for a single room. I'm chill and like to cook.\",\n    occupation: \"Student\",\n    moveInDate: \"Sept 1\",\n    preferences: [\"Student friendly\", \"Near Metro\"]\n  },\n  {\n    id: \"r2\",\n    name: \"Sara\",\n    age: 27,\n    budget: 750,\n    image: \"https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&w=800&q=80\",\n    images: [\n      \"https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=800&q=80\"\n    ],\n    bio: \"Working professional. Looking for a double room in a shared apartment.\",\n    occupation: \"Architect\",\n    moveInDate: \"Oct 15\",\n    preferences: [\"Female only\", \"Balcony\"]\n  },\n  {\n    id: \"r3\",\n    name: \"Davide\",\n    age: 29,\n    budget: 800,\n    image: \"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=800&q=80\",\n    images: [\n      \"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=800&q=80\",\n      \"https://images.unsplash.com/photo-1463453091185-61582044d556?auto=format&fit=crop&w=800&q=80\"\n    ],\n    bio: \"Photographer. I travel a lot. Looking for a friendly environment.\",\n    occupation: \"Photographer\",\n    moveInDate: \"ASAP\",\n    preferences: [\"Flexible\", \"Artist friendly\"]\n  }\n];\n","path":null,"size_bytes":7157,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3007,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","path":null,"size_bytes":1342,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { LanguageProvider } from \"@/lib/i18n\";\nimport { MobileFrame } from \"@/components/MobileFrame\";\nimport { ProtectedRoute } from \"@/components/ProtectedRoute\";\nimport NotFound from \"@/pages/not-found\";\n\nimport Auth from \"@/pages/Auth\";\nimport RoleSelection from \"@/pages/RoleSelection\";\nimport Onboarding from \"@/pages/Onboarding\";\nimport TenantHome from \"@/pages/TenantHome\";\nimport Favorites from \"@/pages/Favorites\";\nimport PropertyDetails from \"@/pages/PropertyDetails\";\nimport LandlordHome from \"@/pages/LandlordHome\";\nimport LandlordListings from \"@/pages/LandlordListings\";\nimport LandlordCreateListing from \"@/pages/LandlordCreateListing\";\nimport Matches from \"@/pages/Matches\";\nimport Profile from \"@/pages/Profile\";\nimport Chat from \"@/pages/Chat\";\n\nimport TenantDetails from \"@/pages/TenantDetails\";\nimport Privacy from \"@/pages/Privacy\";\nimport Help from \"@/pages/Help\";\nimport Terms from \"@/pages/Terms\";\nimport PrivacyPolicy from \"@/pages/PrivacyPolicy\";\nimport Paywall from \"@/pages/Paywall\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Auth} />\n      <Route path=\"/terms\" component={Terms} />\n      <Route path=\"/privacy-policy\" component={PrivacyPolicy} />\n      <Route path=\"/paywall\">\n        {() => <Paywall />}\n      </Route>\n      <Route path=\"/role\" component={RoleSelection} />\n      <Route path=\"/onboarding\" component={Onboarding} />\n      \n      {/* Tenant Routes */}\n      <Route path=\"/tenant\">\n        {() => <ProtectedRoute requiredRole=\"tenant\"><TenantHome /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/tenant/favorites\">\n        {() => <ProtectedRoute requiredRole=\"tenant\"><Favorites /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/tenant/matches\">\n        {() => <ProtectedRoute requiredRole=\"tenant\"><Matches role=\"tenant\" /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/tenant/profile\">\n        {() => <ProtectedRoute requiredRole=\"tenant\"><Profile role=\"tenant\" /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/tenant/privacy\">\n        {() => <ProtectedRoute requiredRole=\"tenant\"><Privacy role=\"tenant\" /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/tenant/help\">\n        {() => <ProtectedRoute requiredRole=\"tenant\"><Help role=\"tenant\" /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/property/:id\">\n        {() => <ProtectedRoute><PropertyDetails /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/tenant-details/:id\">\n        {() => <ProtectedRoute><TenantDetails /></ProtectedRoute>}\n      </Route>\n\n      {/* Landlord Routes */}\n      <Route path=\"/landlord\">\n        {() => <ProtectedRoute requiredRole=\"landlord\"><LandlordHome /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/landlord/listings\">\n        {() => <ProtectedRoute requiredRole=\"landlord\"><LandlordListings /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/landlord/create\">\n        {() => <ProtectedRoute requiredRole=\"landlord\"><LandlordCreateListing /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/landlord/matches\">\n        {() => <ProtectedRoute requiredRole=\"landlord\"><Matches role=\"landlord\" /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/landlord/profile\">\n        {() => <ProtectedRoute requiredRole=\"landlord\"><Profile role=\"landlord\" /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/landlord/privacy\">\n        {() => <ProtectedRoute requiredRole=\"landlord\"><Privacy role=\"landlord\" /></ProtectedRoute>}\n      </Route>\n      <Route path=\"/landlord/help\">\n        {() => <ProtectedRoute requiredRole=\"landlord\"><Help role=\"landlord\" /></ProtectedRoute>}\n      </Route>\n\n      <Route path=\"/chat/:id\">\n        {() => <ProtectedRoute><Chat /></ProtectedRoute>}\n      </Route>\n\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <LanguageProvider>\n        <MobileFrame>\n          <Router />\n          <Toaster />\n        </MobileFrame>\n      </LanguageProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":4252,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4419,"size_tokens":null},"client/src/components/ui/kbd.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Kbd({ className, ...props }: React.ComponentProps<\"kbd\">) {\n  return (\n    <kbd\n      data-slot=\"kbd\"\n      className={cn(\n        \"bg-muted text-muted-foreground pointer-events-none inline-flex h-5 w-fit min-w-5 select-none items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium\",\n        \"[&_svg:not([class*='size-'])]:size-3\",\n        \"[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction KbdGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <kbd\n      data-slot=\"kbd-group\"\n      className={cn(\"inline-flex items-center gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Kbd, KbdGroup }\n","path":null,"size_bytes":862,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":724,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n\" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n           // @replit: no hover, and add primary border\n           \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm border-destructive-border\",\n        outline:\n          // @replit Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color. Uses shadow-xs. no shadow on active\n          // No hover state\n          \" border [border-color:var(--button-outline)] shadow-xs active:shadow-none \",\n        secondary:\n          // @replit border, no hover, no shadow, secondary border.\n          \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // @replit no hover, transparent border\n        ghost: \"border border-transparent\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        // @replit changed sizes\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2356,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1267,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\nimport { WebhookHandlers } from \"./webhookHandlers\";\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.post(\"/api/stripe/webhook\", express.raw({ type: \"application/json\" }), async (req, res) => {\n  try {\n    const signature = req.headers[\"stripe-signature\"] as string;\n    const uuid = (req.headers[\"x-stripe-webhook-uuid\"] || crypto.randomUUID()) as string;\n    \n    await WebhookHandlers.processWebhook(req.body, signature, uuid);\n    res.json({ received: true });\n  } catch (error: any) {\n    console.error(\"Webhook error:\", error.message);\n    res.status(400).json({ error: error.message });\n  }\n});\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":3119,"size_tokens":null},"client/src/pages/Matches.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { BottomNav, TopBar } from \"@/components/Layout\";\nimport { Link, useLocation } from \"wouter\";\nimport { Users } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\n\nexport default function Matches({ role }: { role: \"tenant\" | \"landlord\" }) {\n  const { t } = useLanguage();\n  const [, setLocation] = useLocation();\n\n  const { data: matches = [], isLoading } = useQuery({\n    queryKey: [\"matches\"],\n    queryFn: api.getMatches,\n  });\n\n  return (\n    <div className=\"min-h-full bg-gray-50 pb-20\">\n      <TopBar title={t(\"nav.matches\")} />\n\n      <main className=\"pt-20 px-4 max-w-md mx-auto\">\n        {isLoading ? (\n          <div className=\"text-center p-8\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n            <p className=\"text-gray-500\">Loading matches...</p>\n          </div>\n        ) : matches.length === 0 ? (\n          <div className=\"text-center p-8 mt-12\">\n            <div className=\"w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center\">\n              <Users className=\"text-gray-400\" size={32} />\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-900 mb-2\">No matches yet</h3>\n            <p className=\"text-gray-500\">Keep swiping to find your perfect match!</p>\n          </div>\n        ) : (\n          <>\n            {/* New Matches Row */}\n            <div className=\"mb-6\">\n              <h2 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 px-2\">New Matches</h2>\n              <div className=\"flex gap-4 overflow-x-auto no-scrollbar pb-2 px-2\">\n                {matches.slice(0, 4).map((match: any) => (\n                  <button \n                    key={match.id} \n                    onClick={() => setLocation(`/chat/${match.id}`)}\n                    className=\"flex flex-col items-center gap-1 min-w-[70px]\"\n                    data-testid={`match-avatar-${match.id}`}\n                  >\n                    <div className=\"w-16 h-16 rounded-full bg-gray-200 border-2 border-primary p-0.5\">\n                       <div className=\"w-full h-full rounded-full bg-gray-300 overflow-hidden\">\n                         <img \n                           src={match.otherUser?.profilePhoto || `https://i.pravatar.cc/150?u=${match.otherUserId}`} \n                           className=\"w-full h-full object-cover\" \n                           alt={match.otherUser?.firstName || \"User\"}\n                         />\n                       </div>\n                    </div>\n                    <span className=\"text-xs font-semibold truncate w-full text-center\">\n                      {match.otherUser?.firstName || \"User\"}\n                    </span>\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Messages List */}\n            <div className=\"space-y-2\">\n               <h2 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 px-2\">Messages</h2>\n               <div className=\"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden\">\n                 {matches.map((match: any) => (\n                   <button \n                     key={match.id} \n                     onClick={() => setLocation(`/chat/${match.id}`)}\n                     className=\"w-full p-4 flex items-center gap-4 hover:bg-gray-50 transition-colors border-b border-gray-50 last:border-0 text-left\"\n                     data-testid={`match-message-${match.id}`}\n                   >\n                     <div className=\"w-14 h-14 rounded-full bg-gray-200 overflow-hidden flex-shrink-0\">\n                       <img \n                         src={match.otherUser?.profilePhoto || `https://i.pravatar.cc/150?u=${match.otherUserId}`} \n                         className=\"w-full h-full object-cover\"\n                         alt={match.otherUser?.firstName || \"User\"}\n                       />\n                     </div>\n                     <div className=\"flex-1 min-w-0\">\n                       <div className=\"flex justify-between items-baseline mb-1\">\n                         <h3 className=\"font-bold text-gray-900 truncate\">\n                           {match.otherUser?.firstName || \"User\"} {match.otherUser?.lastName || \"\"}\n                         </h3>\n                         <span className=\"text-xs text-gray-400 font-medium\">New</span>\n                       </div>\n                       <p className=\"text-sm text-gray-500 truncate\">Start a conversation...</p>\n                     </div>\n                   </button>\n                 ))}\n               </div>\n            </div>\n          </>\n        )}\n      </main>\n\n      <BottomNav role={role} />\n    </div>\n  );\n}\n","path":null,"size_bytes":4818,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  if (!itemContext) {\n    throw new Error(\"useFormField should be used within <FormItem>\")\n  }\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4175,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"lucide-react\"\nimport { DayButton, DayPicker, getDefaultClassNames } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button, buttonVariants } from \"@/components/ui/button\"\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = \"label\",\n  buttonVariant = \"ghost\",\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>[\"variant\"]\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\n        \"bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent\",\n        String.raw`rtl:**:[.rdp-button\\_next>svg]:rotate-180`,\n        String.raw`rtl:**:[.rdp-button\\_previous>svg]:rotate-180`,\n        className\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString(\"default\", { month: \"short\" }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn(\"w-fit\", defaultClassNames.root),\n        months: cn(\n          \"relative flex flex-col gap-4 md:flex-row\",\n          defaultClassNames.months\n        ),\n        month: cn(\"flex w-full flex-col gap-4\", defaultClassNames.month),\n        nav: cn(\n          \"absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1\",\n          defaultClassNames.nav\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_previous\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          \"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50\",\n          defaultClassNames.button_next\n        ),\n        month_caption: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]\",\n          defaultClassNames.month_caption\n        ),\n        dropdowns: cn(\n          \"flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium\",\n          defaultClassNames.dropdowns\n        ),\n        dropdown_root: cn(\n          \"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border\",\n          defaultClassNames.dropdown_root\n        ),\n        dropdown: cn(\n          \"bg-popover absolute inset-0 opacity-0\",\n          defaultClassNames.dropdown\n        ),\n        caption_label: cn(\n          \"select-none font-medium\",\n          captionLayout === \"label\"\n            ? \"text-sm\"\n            : \"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5\",\n          defaultClassNames.caption_label\n        ),\n        table: \"w-full border-collapse\",\n        weekdays: cn(\"flex\", defaultClassNames.weekdays),\n        weekday: cn(\n          \"text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal\",\n          defaultClassNames.weekday\n        ),\n        week: cn(\"mt-2 flex w-full\", defaultClassNames.week),\n        week_number_header: cn(\n          \"w-[--cell-size] select-none\",\n          defaultClassNames.week_number_header\n        ),\n        week_number: cn(\n          \"text-muted-foreground select-none text-[0.8rem]\",\n          defaultClassNames.week_number\n        ),\n        day: cn(\n          \"group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md\",\n          defaultClassNames.day\n        ),\n        range_start: cn(\n          \"bg-accent rounded-l-md\",\n          defaultClassNames.range_start\n        ),\n        range_middle: cn(\"rounded-none\", defaultClassNames.range_middle),\n        range_end: cn(\"bg-accent rounded-r-md\", defaultClassNames.range_end),\n        today: cn(\n          \"bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none\",\n          defaultClassNames.today\n        ),\n        outside: cn(\n          \"text-muted-foreground aria-selected:text-muted-foreground\",\n          defaultClassNames.outside\n        ),\n        disabled: cn(\n          \"text-muted-foreground opacity-50\",\n          defaultClassNames.disabled\n        ),\n        hidden: cn(\"invisible\", defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === \"left\") {\n            return (\n              <ChevronLeftIcon className={cn(\"size-4\", className)} {...props} />\n            )\n          }\n\n          if (orientation === \"right\") {\n            return (\n              <ChevronRightIcon\n                className={cn(\"size-4\", className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn(\"size-4\", className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-[--cell-size] items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        \"data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70\",\n        defaultClassNames.day,\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n","path":null,"size_bytes":7569,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/pages/TenantHome.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { BottomNav, TopBar } from \"@/components/Layout\";\nimport { SwipeCard } from \"@/components/SwipeCard\";\nimport { FilterSheet, FilterOptions } from \"@/components/FilterSheet\";\nimport { X, Heart, Users, Home } from \"lucide-react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport Paywall from \"@/pages/Paywall\";\n\nexport default function TenantHome() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const [mode, setMode] = useState<\"properties\" | \"roommates\">(\"properties\");\n  const [lastDirection, setLastDirection] = useState<string | null>(null);\n  const [propertyFilters, setPropertyFilters] = useState<FilterOptions | null>(null);\n  const [roommateFilters, setRoommateFilters] = useState<FilterOptions | null>(null);\n  const [showPaywall, setShowPaywall] = useState(false);\n\n  const currentFilters = mode === \"properties\" ? propertyFilters : roommateFilters;\n\n  const handleApplyFilters = (newFilters: FilterOptions) => {\n    if (mode === \"properties\") {\n      setPropertyFilters(newFilters);\n    } else {\n      setRoommateFilters(newFilters);\n    }\n    toast({\n      title: \"Filters Applied\",\n      description: \"Your search preferences have been updated\",\n    });\n  };\n\n  const { data: properties = [], isLoading: propertiesLoading, refetch: refetchProperties } = useQuery({\n    queryKey: [\"properties\"],\n    queryFn: api.getProperties,\n  });\n\n  const { data: roommates = [], isLoading: roommatesLoading, refetch: refetchRoommates } = useQuery({\n    queryKey: [\"roommates\"],\n    queryFn: api.getRoommates,\n  });\n\n  const swipeMutation = useMutation({\n    mutationFn: ({ targetType, targetId, action }: { targetType: 'property' | 'roommate', targetId: string, action: 'like' | 'skip' }) =>\n      api.swipe(targetType, targetId, action),\n    onSuccess: () => {\n      if (mode === \"properties\") {\n        refetchProperties();\n      } else {\n        refetchRoommates();\n      }\n    },\n    onError: (error: any) => {\n      if (error?.code === \"SWIPE_LIMIT_REACHED\") {\n        setShowPaywall(true);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to process swipe\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSwipe = (direction: \"left\" | \"right\") => {\n    setLastDirection(direction);\n    if (filteredItems.length > 0) {\n      const item = filteredItems[0];\n      swipeMutation.mutate({\n        targetType: mode === \"properties\" ? \"property\" : \"roommate\",\n        targetId: item.id,\n        action: direction === \"right\" ? \"like\" : \"skip\",\n      });\n    }\n  };\n\n  const isLoading = mode === \"properties\" ? propertiesLoading : roommatesLoading;\n  const currentItems = mode === \"properties\" ? properties : roommates;\n\n  const filteredItems = currentItems.filter(item => {\n    if (!currentFilters) return true;\n    if (mode === \"properties\") {\n      const prop = item as any;\n      if (currentFilters.priceRange && (prop.price < currentFilters.priceRange[0] || prop.price > currentFilters.priceRange[1])) return false;\n      if (currentFilters.beds !== null && prop.beds < currentFilters.beds) return false;\n      if (currentFilters.baths !== null && prop.baths < currentFilters.baths) return false;\n    } else {\n      const roommate = item as any;\n      if (currentFilters.ageRange && roommate.age && (roommate.age < currentFilters.ageRange[0] || roommate.age > currentFilters.ageRange[1])) return false;\n      if (currentFilters.gender && roommate.gender && roommate.gender !== currentFilters.gender) return false;\n    }\n    return true;\n  });\n\n  if (showPaywall) {\n    return (\n      <Paywall \n        reason=\"swipe_limit\" \n        onSkip={() => setShowPaywall(false)} \n      />\n    );\n  }\n\n  return (\n    <div className=\"min-h-full bg-gray-50 pb-20\">\n      <header className=\"fixed top-0 left-0 right-0 h-14 bg-white/80 backdrop-blur-md z-40 flex items-center justify-between px-4 border-b border-gray-50\">\n        <div className=\"w-10\"></div>\n        <div className=\"flex items-center gap-2\">\n          <h1 className=\"text-lg font-bold text-gray-900\" data-testid=\"text-app-name\">{t(\"app.name\")}</h1>\n        </div>\n        <div className=\"w-10 flex justify-end\">\n          <FilterSheet \n            type={mode === \"properties\" ? \"property\" : \"roommate\"} \n            onApply={handleApplyFilters}\n            currentFilters={currentFilters}\n          />\n        </div>\n      </header>\n      \n      {/* Mode Toggle */}\n      <div className=\"fixed top-16 left-0 right-0 z-30 px-6 flex justify-center\">\n        <div className=\"bg-white p-1 rounded-2xl shadow-sm border border-gray-100 flex gap-1\">\n          <button\n            onClick={() => setMode(\"properties\")}\n            className={cn(\n              \"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all\",\n              mode === \"properties\" \n                ? \"bg-primary text-white shadow-md\" \n                : \"text-gray-500 hover:bg-gray-50\"\n            )}\n            data-testid=\"button-toggle-properties\"\n          >\n            <Home size={16} />\n            {t(\"tenant.toggle.homes\")}\n          </button>\n          <button\n            onClick={() => setMode(\"roommates\")}\n            className={cn(\n              \"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all\",\n              mode === \"roommates\" \n                ? \"bg-secondary text-white shadow-md\" \n                : \"text-gray-500 hover:bg-gray-50\"\n            )}\n            data-testid=\"button-toggle-roommates\"\n          >\n            <Users size={16} />\n            {t(\"tenant.toggle.roommates\")}\n          </button>\n        </div>\n      </div>\n\n      <main className=\"h-[calc(100vh-140px)] w-full max-w-md mx-auto pt-24 px-4 flex flex-col items-center justify-center relative\">\n        {isLoading ? (\n          <div className=\"text-center p-8\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n            <p className=\"text-gray-500\">Loading...</p>\n          </div>\n        ) : (\n          <AnimatePresence mode=\"wait\">\n            {filteredItems.length > 0 ? (\n              <div className=\"relative w-full h-[60vh]\">\n                {filteredItems.slice(0, 2).reverse().map((item, index) => (\n                   <SwipeCard \n                     key={item.id} \n                     data={item} \n                     type={mode === \"properties\" ? \"property\" : \"tenant\"} \n                     onSwipe={handleSwipe} \n                   />\n                ))}\n              </div>\n            ) : (\n              <motion.div \n                initial={{ opacity: 0 }} \n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n                className=\"text-center p-8\"\n                key=\"empty-state\"\n              >\n                <div className=\"w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center\">\n                  {mode === \"properties\" ? (\n                    <Heart className=\"text-gray-400\" size={32} />\n                  ) : (\n                    <Users className=\"text-gray-400\" size={32} />\n                  )}\n                </div>\n                <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\n                  {mode === \"properties\" ? t(\"empty.noProperties\") : t(\"empty.noRoommates\")}\n                </h3>\n                <p className=\"text-gray-500\">{t(\"empty.checkLater\")}</p>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        )}\n\n        {/* Action Buttons */}\n        {filteredItems.length > 0 && (\n          <div className=\"mt-6 flex items-center gap-6 z-10\">\n            <button \n              onClick={() => handleSwipe(\"left\")}\n              className=\"w-16 h-16 rounded-full bg-white shadow-lg flex items-center justify-center text-red-500 hover:bg-red-50 transition-colors border border-red-100\"\n              data-testid=\"button-swipe-left\"\n            >\n              <X size={32} strokeWidth={2.5} />\n            </button>\n            <button \n              onClick={() => handleSwipe(\"right\")}\n              className={cn(\n                \"w-16 h-16 rounded-full shadow-lg flex items-center justify-center text-white hover:scale-105 transition-transform\",\n                mode === \"properties\" ? \"bg-primary shadow-primary/30\" : \"bg-secondary shadow-secondary/30\"\n              )}\n              data-testid=\"button-swipe-right\"\n            >\n              <Heart size={32} strokeWidth={2.5} fill=\"currentColor\" />\n            </button>\n          </div>\n        )}\n      </main>\n\n      <BottomNav role=\"tenant\" />\n    </div>\n  );\n}\n","path":null,"size_bytes":8967,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"server/storage.ts":{"content":"import { db } from \"./db\";\nimport { eq, and, or } from \"drizzle-orm\";\nimport {\n  users,\n  properties,\n  roommates,\n  swipes,\n  matches,\n  favorites,\n  messages,\n  reports,\n  blocks,\n  pushSubscriptions,\n  type User,\n  type InsertUser,\n  type UpsertUser,\n  type Property,\n  type InsertProperty,\n  type Roommate,\n  type InsertRoommate,\n  type Swipe,\n  type InsertSwipe,\n  type Match,\n  type InsertMatch,\n  type Favorite,\n  type InsertFavorite,\n  type Message,\n  type InsertMessage,\n  type Report,\n  type InsertReport,\n  type Block,\n  type InsertBlock,\n  type PushSubscription,\n  type InsertPushSubscription,\n} from \"@shared/schema\";\n\nexport interface IStorage {\n  // Users\n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  getUserByStripeCustomerId(stripeCustomerId: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  updateUser(id: string, updates: Partial<InsertUser>): Promise<User | undefined>;\n  deleteUser(id: string): Promise<boolean>;\n\n  // Properties\n  getProperty(id: string): Promise<Property | undefined>;\n  getPropertiesByLandlord(landlordId: string): Promise<Property[]>;\n  getAllProperties(): Promise<Property[]>;\n  getPropertiesForTenant(userId: string): Promise<Property[]>;\n  createProperty(property: InsertProperty): Promise<Property>;\n  updateProperty(id: string, updates: Partial<InsertProperty>): Promise<Property | undefined>;\n  deleteProperty(id: string): Promise<boolean>;\n\n  // Roommates\n  getRoommate(id: string): Promise<Roommate | undefined>;\n  getRoommatesByUser(userId: string): Promise<Roommate[]>;\n  getAllRoommates(): Promise<Roommate[]>;\n  getRoommatesForTenant(userId: string): Promise<Roommate[]>;\n  createRoommate(roommate: InsertRoommate): Promise<Roommate>;\n  updateRoommate(id: string, updates: Partial<InsertRoommate>): Promise<Roommate | undefined>;\n  deleteRoommate(id: string): Promise<boolean>;\n\n  // Swipes\n  createSwipe(swipe: InsertSwipe): Promise<Swipe>;\n  getSwipe(userId: string, targetId: string, targetType: string): Promise<Swipe | undefined>;\n  getUserSwipes(userId: string): Promise<Swipe[]>;\n\n  // Matches\n  createMatch(match: InsertMatch): Promise<Match>;\n  getUserMatches(userId: string): Promise<Match[]>;\n  checkExistingMatch(user1Id: string, user2Id: string): Promise<Match | undefined>;\n\n  // Favorites\n  addFavorite(favorite: InsertFavorite): Promise<Favorite>;\n  removeFavorite(userId: string, propertyId: string): Promise<boolean>;\n  getUserFavorites(userId: string): Promise<Favorite[]>;\n  isFavorited(userId: string, propertyId: string): Promise<boolean>;\n\n  // Messages\n  createMessage(message: InsertMessage): Promise<Message>;\n  getMessage(messageId: string): Promise<Message | undefined>;\n  getMatchMessages(matchId: string): Promise<Message[]>;\n  markMessageAsRead(messageId: string): Promise<Message | undefined>;\n  getUnreadCount(userId: string): Promise<number>;\n\n  // Reports\n  createReport(report: InsertReport): Promise<Report>;\n  getUserReports(userId: string): Promise<Report[]>;\n\n  // Blocks\n  createBlock(block: InsertBlock): Promise<Block>;\n  isBlocked(blockerId: string, blockedId: string): Promise<boolean>;\n  getUserBlocks(userId: string): Promise<Block[]>;\n  removeBlock(blockerId: string, blockedId: string): Promise<boolean>;\n\n  // Push Subscriptions\n  createPushSubscription(subscription: InsertPushSubscription): Promise<PushSubscription>;\n  getUserPushSubscriptions(userId: string): Promise<PushSubscription[]>;\n  deletePushSubscription(id: string): Promise<boolean>;\n  getPushSubscriptionByEndpoint(endpoint: string): Promise<PushSubscription | undefined>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Users\n  async getUser(id: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.email, email)).limit(1);\n    return result[0];\n  }\n\n  async getUserByStripeCustomerId(stripeCustomerId: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.stripeCustomerId, stripeCustomerId)).limit(1);\n    return result[0];\n  }\n\n  async createUser(user: InsertUser): Promise<User> {\n    const result = await db.insert(users).values(user).returning();\n    return result[0];\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const userId = userData.id;\n    \n    // First check if user exists by id\n    if (userId) {\n      const existingById = await this.getUser(userId);\n      if (existingById) {\n        // Update existing user\n        const [updated] = await db\n          .update(users)\n          .set({\n            ...userData,\n            updatedAt: new Date(),\n          })\n          .where(eq(users.id, userId))\n          .returning();\n        return updated;\n      }\n    }\n\n    // Check if user exists by email (for users created before Replit Auth)\n    if (userData.email) {\n      const existingByEmail = await this.getUserByEmail(userData.email);\n      if (existingByEmail) {\n        // Update existing user with new Replit ID\n        const [updated] = await db\n          .update(users)\n          .set({\n            ...userData,\n            updatedAt: new Date(),\n          })\n          .where(eq(users.email, userData.email))\n          .returning();\n        return updated;\n      }\n    }\n\n    // Create new user\n    const [user] = await db.insert(users).values(userData).returning();\n    return user;\n  }\n\n  async updateUser(id: string, updates: Partial<InsertUser>): Promise<User | undefined> {\n    const result = await db.update(users).set(updates).where(eq(users.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteUser(id: string): Promise<boolean> {\n    // Delete related records first\n    await db.delete(roommates).where(eq(roommates.userId, id));\n    await db.delete(swipes).where(eq(swipes.userId, id));\n    await db.delete(favorites).where(eq(favorites.userId, id));\n    await db.delete(matches).where(or(eq(matches.user1Id, id), eq(matches.user2Id, id)));\n    // Delete user\n    const result = await db.delete(users).where(eq(users.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Properties\n  async getProperty(id: string): Promise<Property | undefined> {\n    const result = await db.select().from(properties).where(eq(properties.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getPropertiesByLandlord(landlordId: string): Promise<Property[]> {\n    return await db.select().from(properties).where(eq(properties.landlordId, landlordId));\n  }\n\n  async getAllProperties(): Promise<Property[]> {\n    return await db.select().from(properties);\n  }\n\n  async getPropertiesForTenant(userId: string): Promise<Property[]> {\n    // Get properties the user hasn't swiped on yet\n    const userSwipes = await db.select().from(swipes).where(\n      and(\n        eq(swipes.userId, userId),\n        eq(swipes.targetType, 'property')\n      )\n    );\n    \n    const swipedPropertyIds = userSwipes.map(s => s.targetId);\n    \n    const allProperties = await db.select().from(properties);\n    return allProperties.filter(p => !swipedPropertyIds.includes(p.id));\n  }\n\n  async createProperty(property: InsertProperty): Promise<Property> {\n    const result = await db.insert(properties).values(property).returning();\n    return result[0];\n  }\n\n  async updateProperty(id: string, updates: Partial<InsertProperty>): Promise<Property | undefined> {\n    const result = await db.update(properties).set(updates).where(eq(properties.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteProperty(id: string): Promise<boolean> {\n    const result = await db.delete(properties).where(eq(properties.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Roommates\n  async getRoommate(id: string): Promise<Roommate | undefined> {\n    const result = await db.select().from(roommates).where(eq(roommates.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getRoommatesByUser(userId: string): Promise<Roommate[]> {\n    return await db.select().from(roommates).where(eq(roommates.userId, userId));\n  }\n\n  async getAllRoommates(): Promise<Roommate[]> {\n    return await db.select().from(roommates);\n  }\n\n  async getRoommatesForTenant(userId: string): Promise<Roommate[]> {\n    // Get roommates the user hasn't swiped on yet, excluding their own\n    const userSwipes = await db.select().from(swipes).where(\n      and(\n        eq(swipes.userId, userId),\n        eq(swipes.targetType, 'roommate')\n      )\n    );\n    \n    const swipedRoommateIds = userSwipes.map(s => s.targetId);\n    \n    const allRoommates = await db.select().from(roommates);\n    return allRoommates.filter(r => !swipedRoommateIds.includes(r.id) && r.userId !== userId);\n  }\n\n  async createRoommate(roommate: InsertRoommate): Promise<Roommate> {\n    const result = await db.insert(roommates).values(roommate).returning();\n    return result[0];\n  }\n\n  async updateRoommate(id: string, updates: Partial<InsertRoommate>): Promise<Roommate | undefined> {\n    const result = await db.update(roommates).set(updates).where(eq(roommates.id, id)).returning();\n    return result[0];\n  }\n\n  async deleteRoommate(id: string): Promise<boolean> {\n    const result = await db.delete(roommates).where(eq(roommates.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Swipes\n  async createSwipe(swipe: InsertSwipe): Promise<Swipe> {\n    const result = await db.insert(swipes).values(swipe).returning();\n    return result[0];\n  }\n\n  async getSwipe(userId: string, targetId: string, targetType: string): Promise<Swipe | undefined> {\n    const result = await db.select().from(swipes).where(\n      and(\n        eq(swipes.userId, userId),\n        eq(swipes.targetId, targetId),\n        eq(swipes.targetType, targetType)\n      )\n    ).limit(1);\n    return result[0];\n  }\n\n  async getUserSwipes(userId: string): Promise<Swipe[]> {\n    return await db.select().from(swipes).where(eq(swipes.userId, userId));\n  }\n\n  // Matches\n  async createMatch(match: InsertMatch): Promise<Match> {\n    const result = await db.insert(matches).values(match).returning();\n    return result[0];\n  }\n\n  async getUserMatches(userId: string): Promise<Match[]> {\n    return await db.select().from(matches).where(\n      or(\n        eq(matches.user1Id, userId),\n        eq(matches.user2Id, userId)\n      )\n    );\n  }\n\n  async checkExistingMatch(user1Id: string, user2Id: string): Promise<Match | undefined> {\n    const result = await db.select().from(matches).where(\n      or(\n        and(eq(matches.user1Id, user1Id), eq(matches.user2Id, user2Id)),\n        and(eq(matches.user1Id, user2Id), eq(matches.user2Id, user1Id))\n      )\n    ).limit(1);\n    return result[0];\n  }\n\n  // Favorites\n  async addFavorite(favorite: InsertFavorite): Promise<Favorite> {\n    const result = await db.insert(favorites).values(favorite).returning();\n    return result[0];\n  }\n\n  async removeFavorite(userId: string, propertyId: string): Promise<boolean> {\n    const result = await db.delete(favorites).where(\n      and(\n        eq(favorites.userId, userId),\n        eq(favorites.propertyId, propertyId)\n      )\n    ).returning();\n    return result.length > 0;\n  }\n\n  async getUserFavorites(userId: string): Promise<Favorite[]> {\n    return await db.select().from(favorites).where(eq(favorites.userId, userId));\n  }\n\n  async isFavorited(userId: string, propertyId: string): Promise<boolean> {\n    const result = await db.select().from(favorites).where(\n      and(\n        eq(favorites.userId, userId),\n        eq(favorites.propertyId, propertyId)\n      )\n    ).limit(1);\n    return result.length > 0;\n  }\n\n  // Messages\n  async createMessage(message: InsertMessage): Promise<Message> {\n    const result = await db.insert(messages).values(message).returning();\n    return result[0];\n  }\n\n  async getMessage(messageId: string): Promise<Message | undefined> {\n    const result = await db.select().from(messages).where(eq(messages.id, messageId)).limit(1);\n    return result[0];\n  }\n\n  async getMatchMessages(matchId: string): Promise<Message[]> {\n    return await db.select().from(messages)\n      .where(eq(messages.matchId, matchId))\n      .orderBy(messages.createdAt);\n  }\n\n  async markMessageAsRead(messageId: string): Promise<Message | undefined> {\n    const result = await db.update(messages)\n      .set({ readAt: new Date() })\n      .where(eq(messages.id, messageId))\n      .returning();\n    return result[0];\n  }\n\n  async getUnreadCount(userId: string): Promise<number> {\n    const userMatches = await this.getUserMatches(userId);\n    const matchIds = userMatches.map(m => m.id);\n    \n    let count = 0;\n    for (const matchId of matchIds) {\n      const unread = await db.select().from(messages)\n        .where(and(\n          eq(messages.matchId, matchId),\n          eq(messages.readAt, null as any)\n        ));\n      count += unread.filter(m => m.senderId !== userId).length;\n    }\n    return count;\n  }\n\n  // Reports\n  async createReport(report: InsertReport): Promise<Report> {\n    const result = await db.insert(reports).values(report).returning();\n    return result[0];\n  }\n\n  async getUserReports(userId: string): Promise<Report[]> {\n    return await db.select().from(reports).where(eq(reports.reporterId, userId));\n  }\n\n  // Blocks\n  async createBlock(block: InsertBlock): Promise<Block> {\n    const result = await db.insert(blocks).values(block).returning();\n    return result[0];\n  }\n\n  async isBlocked(blockerId: string, blockedId: string): Promise<boolean> {\n    const result = await db.select().from(blocks).where(\n      and(eq(blocks.blockerId, blockerId), eq(blocks.blockedId, blockedId))\n    ).limit(1);\n    return result.length > 0;\n  }\n\n  async getUserBlocks(userId: string): Promise<Block[]> {\n    return await db.select().from(blocks).where(eq(blocks.blockerId, userId));\n  }\n\n  async removeBlock(blockerId: string, blockedId: string): Promise<boolean> {\n    const result = await db.delete(blocks).where(\n      and(eq(blocks.blockerId, blockerId), eq(blocks.blockedId, blockedId))\n    ).returning();\n    return result.length > 0;\n  }\n\n  // Match by ID\n  async getMatch(matchId: string): Promise<Match | undefined> {\n    const result = await db.select().from(matches).where(eq(matches.id, matchId)).limit(1);\n    return result[0];\n  }\n\n  // Push Subscriptions\n  async createPushSubscription(subscription: InsertPushSubscription): Promise<PushSubscription> {\n    const result = await db.insert(pushSubscriptions).values(subscription).returning();\n    return result[0];\n  }\n\n  async getUserPushSubscriptions(userId: string): Promise<PushSubscription[]> {\n    return await db.select().from(pushSubscriptions).where(eq(pushSubscriptions.userId, userId));\n  }\n\n  async deletePushSubscription(id: string): Promise<boolean> {\n    const result = await db.delete(pushSubscriptions).where(eq(pushSubscriptions.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getPushSubscriptionByEndpoint(endpoint: string): Promise<PushSubscription | undefined> {\n    const result = await db.select().from(pushSubscriptions).where(eq(pushSubscriptions.endpoint, endpoint)).limit(1);\n    return result[0];\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":15323,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/pages/Chat.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { useRoute } from \"wouter\";\nimport { ArrowLeft, Send, Phone, MoreVertical } from \"lucide-react\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { motion } from \"framer-motion\";\n\nexport default function Chat() {\n  const { t } = useLanguage();\n  const [, params] = useRoute(\"/chat/:id\");\n  const id = params?.id;\n  const [messages, setMessages] = useState([\n    { id: 1, text: \"Hi! Is the apartment still available?\", sender: \"me\", time: \"10:00\" },\n    { id: 2, text: \"Yes, it is! When would you like to visit?\", sender: \"them\", time: \"10:05\" },\n  ]);\n  const [inputText, setInputText] = useState(\"\");\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(scrollToBottom, [messages]);\n\n  const handleSend = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!inputText.trim()) return;\n\n    setMessages([...messages, { id: Date.now(), text: inputText, sender: \"me\", time: \"Now\" }]);\n    setInputText(\"\");\n    \n    // Simulate reply\n    setTimeout(() => {\n      setMessages(prev => [...prev, { id: Date.now()+1, text: \"Great! Let me know.\", sender: \"them\", time: \"Now\" }]);\n    }, 1500);\n  };\n\n  return (\n    <div className=\"min-h-full bg-white flex flex-col\">\n      {/* Header */}\n      <header className=\"fixed top-0 left-0 right-0 h-16 bg-white border-b border-gray-100 flex items-center px-4 z-50\">\n        <button className=\"p-2 -ml-2 text-gray-600 hover:text-gray-900\" onClick={() => window.history.back()}>\n          <ArrowLeft size={24} />\n        </button>\n        <div className=\"ml-2 flex items-center gap-3 flex-1\">\n          <div className=\"w-10 h-10 rounded-full bg-gray-200 overflow-hidden\">\n            <img src=\"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=100&q=80\" className=\"w-full h-full object-cover\" />\n          </div>\n          <div>\n            <h3 className=\"font-bold text-gray-900 leading-tight\">Marco Rossi</h3>\n            <span className=\"text-xs text-green-500 font-medium\">Online</span>\n          </div>\n        </div>\n        <button className=\"p-2 text-gray-400 hover:text-primary\">\n          <Phone size={20} />\n        </button>\n        <button className=\"p-2 text-gray-400 hover:text-gray-600\">\n          <MoreVertical size={20} />\n        </button>\n      </header>\n\n      {/* Messages */}\n      <main className=\"flex-1 pt-20 pb-24 px-4 overflow-y-auto bg-gray-50\">\n        <div className=\"space-y-4\">\n          {messages.map((msg) => (\n            <motion.div \n              key={msg.id}\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              className={`flex ${msg.sender === \"me\" ? \"justify-end\" : \"justify-start\"}`}\n            >\n              <div className={`max-w-[75%] px-4 py-3 rounded-2xl shadow-sm ${\n                msg.sender === \"me\" \n                  ? \"bg-primary text-white rounded-br-none\" \n                  : \"bg-white text-gray-800 rounded-bl-none border border-gray-100\"\n              }`}>\n                <p className=\"text-sm leading-relaxed\">{msg.text}</p>\n                <span className={`text-[10px] block text-right mt-1 ${msg.sender === \"me\" ? \"text-primary-foreground/70\" : \"text-gray-400\"}`}>\n                  {msg.time}\n                </span>\n              </div>\n            </motion.div>\n          ))}\n          <div ref={messagesEndRef} />\n        </div>\n      </main>\n\n      {/* Input */}\n      <div className=\"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-100 z-50 pb-8\">\n        <form onSubmit={handleSend} className=\"flex gap-2 max-w-md mx-auto\">\n          <input \n            type=\"text\" \n            value={inputText}\n            onChange={(e) => setInputText(e.target.value)}\n            placeholder=\"Type a message...\" \n            className=\"flex-1 bg-gray-100 rounded-full px-5 py-3 focus:bg-white focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all\"\n          />\n          <button \n            type=\"submit\"\n            disabled={!inputText.trim()}\n            className=\"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center shadow-lg shadow-primary/20 disabled:opacity-50 disabled:shadow-none transition-all hover:scale-105 active:scale-95\"\n          >\n            <Send size={20} className={inputText.trim() ? \"ml-0.5\" : \"\"} />\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":4536,"size_tokens":null},"server/routes.ts":{"content":"import type { Express, Request, Response } from \"express\";\nimport type { Server as HTTPServer } from \"http\";\nimport { setupAuth, isAuthenticated } from \"./supabaseAuth\";\nimport { storage } from \"./storage\";\nimport {\n  insertPropertySchema,\n  insertRoommateSchema,\n  insertSwipeSchema,\n  insertFavoriteSchema,\n  insertMessageSchema,\n  insertReportSchema,\n  insertBlockSchema,\n} from \"@shared/schema\";\nimport { stripeService } from \"./stripeService\";\nimport { getStripePublishableKey } from \"./stripeClient\";\nimport { pushService } from \"./pushService\";\n\nexport async function registerRoutes(\n  server: HTTPServer,\n  app: Express,\n): Promise<void> {\n  await setupAuth(app);\n\n  // AUTH ROUTES\n  app.get(\"/api/auth/user\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      res.json(user);\n    } catch (error: any) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // USER ROUTES\n  app.patch(\"/api/users/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      if (req.user.claims.sub !== req.params.id) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n\n      const user = await storage.updateUser(req.params.id, req.body);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      res.json(user);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // PROPERTY ROUTES\n  app.get(\"/api/properties\", isAuthenticated, async (req: any, res) => {\n    try {\n      const properties = await storage.getPropertiesForTenant(req.user.claims.sub);\n      res.json(properties);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/properties/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const property = await storage.getProperty(req.params.id);\n      if (!property) {\n        return res.status(404).json({ message: \"Property not found\" });\n      }\n      res.json(property);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/landlord/properties\", isAuthenticated, async (req: any, res) => {\n    try {\n      const user = await storage.getUser(req.user.claims.sub);\n      if (!user || user.role !== 'landlord') {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      const properties = await storage.getPropertiesByLandlord(req.user.claims.sub);\n      res.json(properties);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/properties\", isAuthenticated, async (req: any, res) => {\n    try {\n      const user = await storage.getUser(req.user.claims.sub);\n      if (!user || user.role !== 'landlord') {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n\n      const result = insertPropertySchema.safeParse({\n        ...req.body,\n        landlordId: req.user.claims.sub,\n      });\n\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid property data\", errors: result.error });\n      }\n\n      const property = await storage.createProperty(result.data);\n      res.json(property);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/properties/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const property = await storage.getProperty(req.params.id);\n      if (!property) {\n        return res.status(404).json({ message: \"Property not found\" });\n      }\n      if (property.landlordId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n\n      const updated = await storage.updateProperty(req.params.id, req.body);\n      res.json(updated);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/properties/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const property = await storage.getProperty(req.params.id);\n      if (!property) {\n        return res.status(404).json({ message: \"Property not found\" });\n      }\n      if (property.landlordId !== req.user.claims.sub) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n\n      await storage.deleteProperty(req.params.id);\n      res.json({ message: \"Property deleted\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // ROOMMATE ROUTES\n  app.get(\"/api/roommates\", isAuthenticated, async (req: any, res) => {\n    try {\n      const roommates = await storage.getRoommatesForTenant(req.user.claims.sub);\n      res.json(roommates);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/roommates/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const roommate = await storage.getRoommate(req.params.id);\n      if (!roommate) {\n        return res.status(404).json({ message: \"Roommate not found\" });\n      }\n      res.json(roommate);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/roommates\", isAuthenticated, async (req: any, res) => {\n    try {\n      const result = insertRoommateSchema.safeParse({\n        ...req.body,\n        userId: req.user.claims.sub,\n      });\n\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid roommate data\", errors: result.error });\n      }\n\n      const roommate = await storage.createRoommate(result.data);\n      res.json(roommate);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // SWIPE ROUTES\n  app.post(\"/api/swipes\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      let user = await storage.getUser(userId);\n      \n      // Check if we need to reset daily swipe count (for non-premium users)\n      const FREE_SWIPE_LIMIT = 10;\n      if (user && !user.isPremium) {\n        const lastReset = user.lastSwipeReset ? new Date(user.lastSwipeReset) : new Date(0);\n        const now = new Date();\n        const daysSinceReset = Math.floor((now.getTime() - lastReset.getTime()) / (1000 * 60 * 60 * 24));\n        \n        // Reset swipe count if it's a new day\n        if (daysSinceReset >= 1) {\n          await storage.updateUser(userId, { swipeCount: 0, lastSwipeReset: now });\n          user = { ...user, swipeCount: 0, lastSwipeReset: now };\n        }\n        \n        // Check swipe limit for non-premium users (10 free swipes per day)\n        if ((user.swipeCount || 0) >= FREE_SWIPE_LIMIT) {\n          return res.status(403).json({ \n            message: \"Daily swipe limit reached\", \n            code: \"SWIPE_LIMIT_REACHED\",\n            swipeCount: user.swipeCount,\n            resetsAt: new Date(lastReset.getTime() + 24 * 60 * 60 * 1000).toISOString()\n          });\n        }\n      }\n\n      const result = insertSwipeSchema.safeParse({\n        ...req.body,\n        userId,\n      });\n\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid swipe data\", errors: result.error });\n      }\n\n      const swipe = await storage.createSwipe(result.data);\n      \n      // Increment swipe count for non-premium users\n      if (user && !user.isPremium) {\n        await storage.updateUser(userId, { swipeCount: (user.swipeCount || 0) + 1 });\n      }\n\n      if (result.data.action === 'like' && result.data.targetType === 'roommate') {\n        const roommate = await storage.getRoommate(result.data.targetId);\n        if (roommate) {\n          const reverseSwipe = await storage.getSwipe(roommate.userId, req.user.claims.sub, 'roommate');\n          if (reverseSwipe && reverseSwipe.action === 'like') {\n            const existingMatch = await storage.checkExistingMatch(req.user.claims.sub, roommate.userId);\n            if (!existingMatch) {\n              await storage.createMatch({\n                user1Id: req.user.claims.sub,\n                user2Id: roommate.userId,\n                relatedType: 'roommate',\n                relatedId: result.data.targetId,\n              });\n              \n              const currentUser = await storage.getUser(req.user.claims.sub);\n              const otherUser = await storage.getUser(roommate.userId);\n              if (otherUser) {\n                pushService.notifyNewMatch(roommate.userId, currentUser?.firstName || 'Someone').catch(console.error);\n              }\n              if (currentUser) {\n                pushService.notifyNewMatch(req.user.claims.sub, otherUser?.firstName || 'Someone').catch(console.error);\n              }\n              \n              return res.json({ ...swipe, matched: true });\n            }\n          }\n        }\n      }\n\n      res.json({ ...swipe, matched: false });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // MATCH ROUTES\n  app.get(\"/api/matches\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const matches = await storage.getUserMatches(userId);\n      \n      const matchesWithOtherUser = await Promise.all(matches.map(async (match) => {\n        const otherUserId = match.user1Id === userId ? match.user2Id : match.user1Id;\n        const otherUser = await storage.getUser(otherUserId);\n        return {\n          ...match,\n          otherUserId,\n          otherUser: otherUser ? {\n            id: otherUser.id,\n            firstName: otherUser.firstName,\n            lastName: otherUser.lastName,\n            profilePhoto: otherUser.profilePhoto,\n          } : null,\n        };\n      }));\n      \n      res.json(matchesWithOtherUser);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/matches/:matchId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const match = await storage.getMatch(req.params.matchId);\n      \n      if (!match || (match.user1Id !== userId && match.user2Id !== userId)) {\n        return res.status(404).json({ message: \"Match not found\" });\n      }\n      \n      const otherUserId = match.user1Id === userId ? match.user2Id : match.user1Id;\n      const otherUser = await storage.getUser(otherUserId);\n      \n      res.json({\n        ...match,\n        otherUserId,\n        otherUser: otherUser ? {\n          id: otherUser.id,\n          firstName: otherUser.firstName,\n          lastName: otherUser.lastName,\n          profilePhoto: otherUser.profilePhoto,\n        } : null,\n      });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // FAVORITE ROUTES\n  app.get(\"/api/favorites\", isAuthenticated, async (req: any, res) => {\n    try {\n      const favorites = await storage.getUserFavorites(req.user.claims.sub);\n      \n      const propertiesPromises = favorites.map(f => storage.getProperty(f.propertyId));\n      const properties = await Promise.all(propertiesPromises);\n      \n      res.json(properties.filter(p => p !== undefined));\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/favorites\", isAuthenticated, async (req: any, res) => {\n    try {\n      const result = insertFavoriteSchema.safeParse({\n        ...req.body,\n        userId: req.user.claims.sub,\n      });\n\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid favorite data\", errors: result.error });\n      }\n\n      const favorite = await storage.addFavorite(result.data);\n      res.json(favorite);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/favorites/:propertyId\", isAuthenticated, async (req: any, res) => {\n    try {\n      await storage.removeFavorite(req.user.claims.sub, req.params.propertyId);\n      res.json({ message: \"Favorite removed\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/favorites/:propertyId/check\", isAuthenticated, async (req: any, res) => {\n    try {\n      const isFavorited = await storage.isFavorited(req.user.claims.sub, req.params.propertyId);\n      res.json({ isFavorited });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // CHAT/MESSAGE ROUTES\n  app.get(\"/api/matches/:matchId/messages\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const match = await storage.getMatch(req.params.matchId);\n      \n      if (!match || (match.user1Id !== userId && match.user2Id !== userId)) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      const otherUserId = match.user1Id === userId ? match.user2Id : match.user1Id;\n      const isBlocked = await storage.isBlocked(otherUserId, userId);\n      const hasBlocked = await storage.isBlocked(userId, otherUserId);\n      \n      if (isBlocked || hasBlocked) {\n        return res.status(403).json({ message: \"Cannot access messages with blocked user\" });\n      }\n\n      const messages = await storage.getMatchMessages(req.params.matchId);\n      res.json(messages);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/matches/:matchId/messages\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const match = await storage.getMatch(req.params.matchId);\n      \n      if (!match || (match.user1Id !== userId && match.user2Id !== userId)) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n\n      const otherUserId = match.user1Id === userId ? match.user2Id : match.user1Id;\n      const isBlocked = await storage.isBlocked(otherUserId, userId);\n      const hasBlocked = await storage.isBlocked(userId, otherUserId);\n      \n      if (isBlocked || hasBlocked) {\n        return res.status(403).json({ message: \"Cannot send messages to this user\" });\n      }\n\n      const result = insertMessageSchema.safeParse({\n        matchId: req.params.matchId,\n        senderId: userId,\n        content: req.body.content,\n      });\n\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid message\", errors: result.error });\n      }\n\n      const message = await storage.createMessage(result.data);\n      \n      const sender = await storage.getUser(userId);\n      pushService.notifyNewMessage(otherUserId, sender?.firstName || 'Someone', req.params.matchId).catch(console.error);\n      \n      res.json(message);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/messages/:messageId/read\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const messageId = req.params.messageId;\n      \n      const existingMessage = await storage.getMessage(messageId);\n      if (!existingMessage) {\n        return res.status(404).json({ message: \"Message not found\" });\n      }\n      \n      const match = await storage.getMatch(existingMessage.matchId);\n      if (!match || (match.user1Id !== userId && match.user2Id !== userId)) {\n        return res.status(403).json({ message: \"Access denied\" });\n      }\n      \n      const message = await storage.markMessageAsRead(messageId);\n      res.json(message);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/messages/unread-count\", isAuthenticated, async (req: any, res) => {\n    try {\n      const count = await storage.getUnreadCount(req.user.claims.sub);\n      res.json({ count });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // REPORT ROUTES\n  app.post(\"/api/reports\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const reportedUserId = req.body.reportedUserId;\n      \n      if (userId === reportedUserId) {\n        return res.status(400).json({ message: \"Cannot report yourself\" });\n      }\n\n      const result = insertReportSchema.safeParse({\n        reporterId: userId,\n        reportedUserId,\n        reason: req.body.reason,\n        description: req.body.description,\n      });\n\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid report\", errors: result.error });\n      }\n\n      const report = await storage.createReport(result.data);\n      res.json(report);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // BLOCK ROUTES\n  app.post(\"/api/blocks\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const blockedId = req.body.blockedId;\n      \n      if (userId === blockedId) {\n        return res.status(400).json({ message: \"Cannot block yourself\" });\n      }\n      \n      const alreadyBlocked = await storage.isBlocked(userId, blockedId);\n      if (alreadyBlocked) {\n        return res.status(400).json({ message: \"User already blocked\" });\n      }\n\n      const result = insertBlockSchema.safeParse({\n        blockerId: userId,\n        blockedId,\n      });\n\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid block\", errors: result.error });\n      }\n\n      const block = await storage.createBlock(result.data);\n      res.json(block);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/blocks/:blockedId\", isAuthenticated, async (req: any, res) => {\n    try {\n      await storage.removeBlock(req.user.claims.sub, req.params.blockedId);\n      res.json({ message: \"Unblocked\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/blocks\", isAuthenticated, async (req: any, res) => {\n    try {\n      const blocks = await storage.getUserBlocks(req.user.claims.sub);\n      res.json(blocks);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // STRIPE ROUTES\n  app.get(\"/api/stripe/config\", async (req, res) => {\n    try {\n      const publishableKey = await getStripePublishableKey();\n      res.json({ publishableKey });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/stripe/checkout\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const { priceId } = req.body;\n      if (!priceId) {\n        return res.status(400).json({ message: \"Price ID required\" });\n      }\n\n      let customerId = user.stripeCustomerId;\n      if (!customerId) {\n        const customer = await stripeService.createCustomer(user.email || \"\", userId);\n        await storage.updateUser(userId, { stripeCustomerId: customer.id });\n        customerId = customer.id;\n      }\n\n      const baseUrl = `https://${process.env.REPLIT_DOMAINS?.split(',')[0]}`;\n      const session = await stripeService.createCheckoutSession(\n        customerId,\n        priceId,\n        `${baseUrl}/${user.role}?checkout=success`,\n        `${baseUrl}/${user.role}?checkout=cancelled`\n      );\n\n      res.json({ url: session.url });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/stripe/portal\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      \n      if (!user?.stripeCustomerId) {\n        return res.status(400).json({ message: \"No subscription found\" });\n      }\n\n      const baseUrl = `https://${process.env.REPLIT_DOMAINS?.split(',')[0]}`;\n      const session = await stripeService.createCustomerPortalSession(\n        user.stripeCustomerId,\n        `${baseUrl}/${user.role}/profile`\n      );\n\n      res.json({ url: session.url });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/subscription\", isAuthenticated, async (req: any, res) => {\n    try {\n      const user = await storage.getUser(req.user.claims.sub);\n      res.json({ \n        isPremium: user?.isPremium || false,\n        premiumUntil: user?.premiumUntil,\n        subscriptionId: user?.stripeSubscriptionId\n      });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // PUSH NOTIFICATION ROUTES\n  app.get(\"/api/push/vapid-key\", (req, res) => {\n    const publicKey = pushService.getPublicKey();\n    if (publicKey) {\n      res.json({ publicKey });\n    } else {\n      res.status(503).json({ message: \"Push notifications not configured\" });\n    }\n  });\n\n  app.post(\"/api/push/subscribe\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { endpoint, p256dh, auth } = req.body;\n\n      if (!endpoint || !p256dh || !auth) {\n        return res.status(400).json({ message: \"Invalid subscription data\" });\n      }\n\n      const existing = await storage.getPushSubscriptionByEndpoint(endpoint);\n      if (existing) {\n        return res.json({ message: \"Already subscribed\" });\n      }\n\n      const subscription = await storage.createPushSubscription({\n        userId,\n        endpoint,\n        p256dh,\n        auth,\n      });\n\n      res.json({ message: \"Subscribed\", id: subscription.id });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/push/unsubscribe\", isAuthenticated, async (req: any, res) => {\n    try {\n      const { endpoint } = req.body;\n      \n      if (!endpoint) {\n        return res.status(400).json({ message: \"Endpoint required\" });\n      }\n\n      const subscription = await storage.getPushSubscriptionByEndpoint(endpoint);\n      if (subscription) {\n        await storage.deletePushSubscription(subscription.id);\n      }\n\n      res.json({ message: \"Unsubscribed\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/push/test\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await pushService.sendNotification(userId, {\n        title: 'Test Notification',\n        body: 'Push notifications are working!',\n        url: '/',\n      });\n      res.json({ message: \"Test notification sent\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n}\n","path":null,"size_bytes":22791,"size_tokens":null},"client/src/pages/Auth.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { motion } from \"framer-motion\";\nimport logo from \"@assets/logo-removebg-preview_1765398497308.png\";\nimport { supabase } from \"@/lib/supabase\";\nimport { Mail, Lock, User, ArrowLeft } from \"lucide-react\";\n\ntype AuthMode = \"welcome\" | \"login\" | \"signup\";\n\nexport default function Auth() {\n  const { t, language, setLanguage } = useLanguage();\n  const [, setLocation] = useLocation();\n  const [mode, setMode] = useState<AuthMode>(\"welcome\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const handleAuthFlow = async () => {\n      const url = new URL(window.location.href);\n      const code = url.searchParams.get('code');\n      const state = url.searchParams.get('state');\n      \n      if (code && state) {\n        try {\n          const { error } = await supabase.auth.exchangeCodeForSession(window.location.href);\n          if (error) {\n            console.error('OAuth callback error:', error);\n            setError(error.message);\n          }\n        } catch (err) {\n          console.error('OAuth exchange failed:', err);\n          setError('Authentication failed. Please try again.');\n        }\n        window.history.replaceState({}, document.title, window.location.pathname);\n      }\n      \n      const { data: { session } } = await supabase.auth.getSession();\n      if (session?.user) {\n        const response = await fetch(\"/api/auth/user\", {\n          headers: {\n            'Authorization': `Bearer ${session.access_token}`,\n          },\n        });\n        if (response.ok) {\n          const user = await response.json();\n          if (user?.role) {\n            setLocation(`/${user.role}`);\n          } else {\n            setLocation(\"/onboarding\");\n          }\n        }\n      }\n    };\n    handleAuthFlow();\n\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\n      if (event === 'SIGNED_IN' && session) {\n        const response = await fetch(\"/api/auth/user\", {\n          headers: {\n            'Authorization': `Bearer ${session.access_token}`,\n          },\n        });\n        if (response.ok) {\n          const user = await response.json();\n          if (user?.role) {\n            setLocation(`/${user.role}`);\n          } else {\n            setLocation(\"/onboarding\");\n          }\n        } else {\n          setLocation(\"/onboarding\");\n        }\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, [setLocation]);\n\n  const handleEmailSignIn = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    \n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n    \n    if (error) {\n      setError(language === \"it\" ? \"Email o password non validi\" : \"Invalid email or password\");\n    }\n    setLoading(false);\n  };\n\n  const handleEmailSignUp = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const response = await fetch('/api/auth/signup', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email,\n          password,\n          firstName,\n          lastName,\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        setError(data.message || 'Failed to create account');\n        setLoading(false);\n        return;\n      }\n\n      const { error: signInError } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      });\n\n      if (signInError) {\n        setError(signInError.message);\n        setLoading(false);\n        return;\n      }\n\n      setLocation(\"/onboarding\");\n    } catch (err: any) {\n      setError(err.message || 'An error occurred');\n    }\n    setLoading(false);\n  };\n\n  const texts = {\n    welcome: language === \"it\" ? \"Benvenuto su Tenant\" : \"Welcome to Tenant\",\n    tagline: language === \"it\" \n      ? \"Trova la tua corrispondenza perfetta nel mercato degli affitti\" \n      : \"Find your perfect match in the rental market\",\n    haveAccount: language === \"it\" ? \"Hai già un account?\" : \"Already have an account?\",\n    signInToAccount: language === \"it\" ? \"Accedi al tuo account\" : \"Sign in to your account\",\n    orRegister: language === \"it\" ? \"Oppure registrati:\" : \"Or register:\",\n    createAccount: language === \"it\" ? \"Crea un nuovo account\" : \"Create a new account\",\n    email: language === \"it\" ? \"Email\" : \"Email\",\n    password: language === \"it\" ? \"Password\" : \"Password\",\n    firstName: language === \"it\" ? \"Nome\" : \"First Name\",\n    lastName: language === \"it\" ? \"Cognome\" : \"Last Name\",\n    signIn: language === \"it\" ? \"Accedi\" : \"Sign In\",\n    signUp: language === \"it\" ? \"Registrati\" : \"Sign Up\",\n    back: language === \"it\" ? \"Indietro\" : \"Back\",\n  };\n\n  if (mode === \"login\") {\n    return (\n      <div className=\"min-h-full bg-gradient-to-b from-blue-400 via-blue-500 to-blue-600 flex flex-col items-center justify-center p-6\">\n        <motion.div \n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"w-full max-w-sm\"\n        >\n          <button \n            onClick={() => setMode(\"welcome\")}\n            className=\"flex items-center gap-2 text-white mb-6\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft size={20} />\n            {texts.back}\n          </button>\n\n          <div className=\"bg-white rounded-3xl p-8 shadow-xl\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6 text-center\">{texts.signInToAccount}</h2>\n            \n            {error && (\n              <div className=\"bg-red-50 text-red-600 p-3 rounded-xl mb-4 text-sm\">\n                {error}\n              </div>\n            )}\n\n            <form onSubmit={handleEmailSignIn} className=\"space-y-4\">\n              <div className=\"relative\">\n                <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input\n                  type=\"email\"\n                  placeholder={texts.email}\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                  data-testid=\"input-email\"\n                />\n              </div>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input\n                  type=\"password\"\n                  placeholder={texts.password}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                  data-testid=\"input-password\"\n                />\n              </div>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full bg-blue-500 text-white font-bold py-4 rounded-2xl hover:bg-blue-600 transition-colors disabled:opacity-50\"\n                data-testid=\"button-submit-login\"\n              >\n                {loading ? \"...\" : texts.signIn}\n              </button>\n            </form>\n          </div>\n        </motion.div>\n      </div>\n    );\n  }\n\n  if (mode === \"signup\") {\n    return (\n      <div className=\"min-h-full bg-gradient-to-b from-blue-400 via-blue-500 to-blue-600 flex flex-col items-center justify-center p-6\">\n        <motion.div \n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"w-full max-w-sm\"\n        >\n          <button \n            onClick={() => setMode(\"welcome\")}\n            className=\"flex items-center gap-2 text-white mb-6\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft size={20} />\n            {texts.back}\n          </button>\n\n          <div className=\"bg-white rounded-3xl p-8 shadow-xl\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6 text-center\">{texts.createAccount}</h2>\n            \n            {error && (\n              <div className={`p-3 rounded-xl mb-4 text-sm ${error.includes(\"email\") || error.includes(\"Email\") ? \"bg-green-50 text-green-600\" : \"bg-red-50 text-red-600\"}`}>\n                {error}\n              </div>\n            )}\n\n            <form onSubmit={handleEmailSignUp} className=\"space-y-4\">\n              <div className=\"relative\">\n                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input\n                  type=\"text\"\n                  placeholder={texts.firstName}\n                  value={firstName}\n                  onChange={(e) => setFirstName(e.target.value)}\n                  className=\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                  data-testid=\"input-firstname\"\n                />\n              </div>\n              <div className=\"relative\">\n                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input\n                  type=\"text\"\n                  placeholder={texts.lastName}\n                  value={lastName}\n                  onChange={(e) => setLastName(e.target.value)}\n                  className=\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                  data-testid=\"input-lastname\"\n                />\n              </div>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input\n                  type=\"email\"\n                  placeholder={texts.email}\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                  data-testid=\"input-email\"\n                />\n              </div>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input\n                  type=\"password\"\n                  placeholder={texts.password}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                  minLength={6}\n                  data-testid=\"input-password\"\n                />\n              </div>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full bg-blue-500 text-white font-bold py-4 rounded-2xl hover:bg-blue-600 transition-colors disabled:opacity-50\"\n                data-testid=\"button-submit-signup\"\n              >\n                {loading ? \"...\" : texts.signUp}\n              </button>\n              <p className=\"text-center text-xs text-gray-500 mt-2\">\n                {language === \"it\" ? \"Registrandoti accetti i nostri \" : \"By signing up you agree to our \"}\n                <a href=\"/terms\" className=\"text-blue-500 underline\" data-testid=\"link-terms-signup\">\n                  {language === \"it\" ? \"Termini\" : \"Terms\"}\n                </a>\n                {\" & \"}\n                <a href=\"/privacy-policy\" className=\"text-blue-500 underline\" data-testid=\"link-privacy-signup\">\n                  Privacy\n                </a>\n              </p>\n            </form>\n          </div>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-full bg-gradient-to-b from-blue-400 via-blue-500 to-blue-600 flex flex-col items-center justify-center p-6 relative overflow-hidden\">\n      <button \n        onClick={() => setLanguage(language === \"en\" ? \"it\" : \"en\")}\n        className=\"absolute top-6 right-6 font-bold text-sm bg-white/20 text-white px-3 py-1 rounded-full hover:bg-white/30 transition-colors\"\n        data-testid=\"button-language-toggle\"\n      >\n        {language.toUpperCase()}\n      </button>\n\n      <motion.div \n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.5 }}\n        className=\"w-full max-w-sm flex flex-col gap-6 z-10\"\n      >\n        <div className=\"text-center space-y-2 flex flex-col items-center\">\n          <img src={logo} alt=\"Tenant Logo\" className=\"w-20 h-20 object-contain mb-2\" data-testid=\"img-logo\" />\n          <h1 className=\"text-3xl font-black text-white tracking-tight\">Tenant</h1>\n          <h2 className=\"text-2xl font-bold text-white\">{texts.welcome}</h2>\n          <p className=\"text-sm text-white/80\">{texts.tagline}</p>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-100 text-red-600 p-3 rounded-xl text-sm text-center\">\n            {error}\n          </div>\n        )}\n\n        <div className=\"space-y-3\">\n          <p className=\"text-center text-white/80 text-sm\">{texts.haveAccount}</p>\n          <button \n            onClick={() => setMode(\"login\")}\n            className=\"w-full bg-blue-300/30 backdrop-blur-sm text-white font-semibold py-4 rounded-2xl hover:bg-blue-300/50 transition-colors\"\n            data-testid=\"button-goto-login\"\n          >\n            {texts.signInToAccount}\n          </button>\n\n          <p className=\"text-center text-white/80 text-sm\">{texts.orRegister}</p>\n          <button \n            onClick={() => setMode(\"signup\")}\n            className=\"w-full bg-blue-300/30 backdrop-blur-sm text-white font-semibold py-4 rounded-2xl hover:bg-blue-300/50 transition-colors\"\n            data-testid=\"button-goto-signup\"\n          >\n            {texts.createAccount}\n          </button>\n        </div>\n\n        <div className=\"text-center text-xs text-white/60 mt-4\">\n          <a href=\"/terms\" className=\"underline hover:text-white/80\" data-testid=\"link-terms\">\n            {language === \"it\" ? \"Termini di Servizio\" : \"Terms of Service\"}\n          </a>\n          {\" | \"}\n          <a href=\"/privacy-policy\" className=\"underline hover:text-white/80\" data-testid=\"link-privacy\">\n            {language === \"it\" ? \"Privacy Policy\" : \"Privacy Policy\"}\n          </a>\n        </div>\n      </motion.div>\n    </div>\n  );\n}\n","path":null,"size_bytes":15008,"size_tokens":null},"vite-plugin-meta-images.ts":{"content":"import type { Plugin } from 'vite';\nimport fs from 'fs';\nimport path from 'path';\n\n/**\n * Vite plugin that updates og:image and twitter:image meta tags\n * to point to the app's opengraph image with the correct Replit domain.\n */\nexport function metaImagesPlugin(): Plugin {\n  return {\n    name: 'vite-plugin-meta-images',\n    transformIndexHtml(html) {\n      const baseUrl = getDeploymentUrl();\n      if (!baseUrl) {\n        log('[meta-images] no Replit deployment domain found, skipping meta tag updates');\n        return html;\n      }\n\n      // Check if opengraph image exists in public directory\n      const publicDir = path.resolve(process.cwd(), 'client', 'public');\n      const opengraphPngPath = path.join(publicDir, 'opengraph.png');\n      const opengraphJpgPath = path.join(publicDir, 'opengraph.jpg');\n      const opengraphJpegPath = path.join(publicDir, 'opengraph.jpeg');\n\n      let imageExt: string | null = null;\n      if (fs.existsSync(opengraphPngPath)) {\n        imageExt = 'png';\n      } else if (fs.existsSync(opengraphJpgPath)) {\n        imageExt = 'jpg';\n      } else if (fs.existsSync(opengraphJpegPath)) {\n        imageExt = 'jpeg';\n      }\n\n      if (!imageExt) {\n        log('[meta-images] OpenGraph image not found, skipping meta tag updates');\n        return html;\n      }\n\n      const imageUrl = `${baseUrl}/opengraph.${imageExt}`;\n\n      log('[meta-images] updating meta image tags to:', imageUrl);\n\n      html = html.replace(\n        /<meta\\s+property=\"og:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta property=\"og:image\" content=\"${imageUrl}\" />`\n      );\n\n      html = html.replace(\n        /<meta\\s+name=\"twitter:image\"\\s+content=\"[^\"]*\"\\s*\\/>/g,\n        `<meta name=\"twitter:image\" content=\"${imageUrl}\" />`\n      );\n\n      return html;\n    },\n  };\n}\n\nfunction getDeploymentUrl(): string | null {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    log('[meta-images] using internal app domain:', url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    log('[meta-images] using dev domain:', url);\n    return url;\n  }\n\n  return null;\n}\n\nfunction log(...args: any[]): void {\n  if (process.env.NODE_ENV === 'production') {\n    console.log(...args);\n  }\n}\n","path":null,"size_bytes":2333,"size_tokens":null},"client/src/components/ui/empty.tsx":{"content":"import { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Empty({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty\"\n      className={cn(\n        \"flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-header\"\n      className={cn(\n        \"flex max-w-sm flex-col items-center gap-2 text-center\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst emptyMediaVariants = cva(\n  \"mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        icon: \"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction EmptyMedia({\n  className,\n  variant = \"default\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof emptyMediaVariants>) {\n  return (\n    <div\n      data-slot=\"empty-icon\"\n      data-variant={variant}\n      className={cn(emptyMediaVariants({ variant, className }))}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-title\"\n      className={cn(\"text-lg font-medium tracking-tight\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <div\n      data-slot=\"empty-description\"\n      className={cn(\n        \"text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction EmptyContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"empty-content\"\n      className={cn(\n        \"flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Empty,\n  EmptyHeader,\n  EmptyTitle,\n  EmptyDescription,\n  EmptyContent,\n  EmptyMedia,\n}\n","path":null,"size_bytes":2396,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/field.tsx":{"content":"\"use client\"\n\nimport { useMemo } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\nimport { Separator } from \"@/components/ui/separator\"\n\nfunction FieldSet({ className, ...props }: React.ComponentProps<\"fieldset\">) {\n  return (\n    <fieldset\n      data-slot=\"field-set\"\n      className={cn(\n        \"flex flex-col gap-6\",\n        \"has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLegend({\n  className,\n  variant = \"legend\",\n  ...props\n}: React.ComponentProps<\"legend\"> & { variant?: \"legend\" | \"label\" }) {\n  return (\n    <legend\n      data-slot=\"field-legend\"\n      data-variant={variant}\n      className={cn(\n        \"mb-3 font-medium\",\n        \"data-[variant=legend]:text-base\",\n        \"data-[variant=label]:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-group\"\n      className={cn(\n        \"group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nconst fieldVariants = cva(\n  \"group/field data-[invalid=true]:text-destructive flex w-full gap-3\",\n  {\n    variants: {\n      orientation: {\n        vertical: [\"flex-col [&>*]:w-full [&>.sr-only]:w-auto\"],\n        horizontal: [\n          \"flex-row items-center\",\n          \"[&>[data-slot=field-label]]:flex-auto\",\n          \"has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px has-[>[data-slot=field-content]]:items-start\",\n        ],\n        responsive: [\n          \"@md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto flex-col [&>*]:w-full [&>.sr-only]:w-auto\",\n          \"@md/field-group:[&>[data-slot=field-label]]:flex-auto\",\n          \"@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px\",\n        ],\n      },\n    },\n    defaultVariants: {\n      orientation: \"vertical\",\n    },\n  }\n)\n\nfunction Field({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof fieldVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"field\"\n      data-orientation={orientation}\n      className={cn(fieldVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction FieldContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-content\"\n      className={cn(\n        \"group/field-content flex flex-1 flex-col gap-1.5 leading-snug\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  return (\n    <Label\n      data-slot=\"field-label\"\n      className={cn(\n        \"group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50\",\n        \"has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>[data-slot=field]]:p-4\",\n        \"has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"field-label\"\n      className={cn(\n        \"flex w-fit items-center gap-2 text-sm font-medium leading-snug group-data-[disabled=true]/field:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  return (\n    <p\n      data-slot=\"field-description\"\n      className={cn(\n        \"text-muted-foreground text-sm font-normal leading-normal group-has-[[data-orientation=horizontal]]/field:text-balance\",\n        \"nth-last-2:-mt-1 last:mt-0 [[data-variant=legend]+&]:-mt-1.5\",\n        \"[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FieldSeparator({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      data-slot=\"field-separator\"\n      data-content={!!children}\n      className={cn(\n        \"relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2\",\n        className\n      )}\n      {...props}\n    >\n      <Separator className=\"absolute inset-0 top-1/2\" />\n      {children && (\n        <span\n          className=\"bg-background text-muted-foreground relative mx-auto block w-fit px-2\"\n          data-slot=\"field-separator-content\"\n        >\n          {children}\n        </span>\n      )}\n    </div>\n  )\n}\n\nfunction FieldError({\n  className,\n  children,\n  errors,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  errors?: Array<{ message?: string } | undefined>\n}) {\n  const content = useMemo(() => {\n    if (children) {\n      return children\n    }\n\n    if (!errors) {\n      return null\n    }\n\n    if (errors?.length === 1 && errors[0]?.message) {\n      return errors[0].message\n    }\n\n    return (\n      <ul className=\"ml-4 flex list-disc flex-col gap-1\">\n        {errors.map(\n          (error, index) =>\n            error?.message && <li key={index}>{error.message}</li>\n        )}\n      </ul>\n    )\n  }, [children, errors])\n\n  if (!content) {\n    return null\n  }\n\n  return (\n    <div\n      role=\"alert\"\n      data-slot=\"field-error\"\n      className={cn(\"text-destructive text-sm font-normal\", className)}\n      {...props}\n    >\n      {content}\n    </div>\n  )\n}\n\nexport {\n  Field,\n  FieldLabel,\n  FieldDescription,\n  FieldError,\n  FieldGroup,\n  FieldLegend,\n  FieldSeparator,\n  FieldSet,\n  FieldContent,\n  FieldTitle,\n}\n","path":null,"size_bytes":6044,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/lib/api.ts":{"content":"import type { User, Property, Roommate, Match, Favorite, Message } from \"@shared/schema\";\nimport { supabase } from \"./supabase\";\n\nexport class ApiError extends Error {\n  constructor(public status: number, message: string, public code?: string) {\n    super(message);\n  }\n}\n\nasync function fetchApi(url: string, options?: RequestInit) {\n  const { data: { session } } = await supabase.auth.getSession();\n  \n  const headers: Record<string, string> = {\n    'Content-Type': 'application/json',\n    ...options?.headers as Record<string, string>,\n  };\n  \n  if (session?.access_token) {\n    headers['Authorization'] = `Bearer ${session.access_token}`;\n  }\n\n  const response = await fetch(url, {\n    ...options,\n    headers,\n    credentials: 'include',\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ message: 'An error occurred' }));\n    throw new ApiError(response.status, error.message, error.code);\n  }\n\n  return response.json();\n}\n\nexport const api = {\n  // Auth\n  getMe: (): Promise<User> => fetchApi('/api/auth/user'),\n\n  // Users\n  updateUser: (id: string, updates: Partial<User>) =>\n    fetchApi(`/api/users/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(updates),\n    }),\n\n  // Properties\n  getProperties: (): Promise<Property[]> => fetchApi('/api/properties'),\n\n  getProperty: (id: string): Promise<Property> => fetchApi(`/api/properties/${id}`),\n\n  getLandlordProperties: (): Promise<Property[]> => fetchApi('/api/landlord/properties'),\n\n  createProperty: (property: Partial<Property>) =>\n    fetchApi('/api/properties', {\n      method: 'POST',\n      body: JSON.stringify(property),\n    }),\n\n  updateProperty: (id: string, updates: Partial<Property>) =>\n    fetchApi(`/api/properties/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(updates),\n    }),\n\n  deleteProperty: (id: string) =>\n    fetchApi(`/api/properties/${id}`, { method: 'DELETE' }),\n\n  // Roommates\n  getRoommates: (): Promise<Roommate[]> => fetchApi('/api/roommates'),\n\n  getRoommate: (id: string): Promise<Roommate> => fetchApi(`/api/roommates/${id}`),\n\n  createRoommate: (roommate: Partial<Roommate>) =>\n    fetchApi('/api/roommates', {\n      method: 'POST',\n      body: JSON.stringify(roommate),\n    }),\n\n  // Swipes\n  swipe: (targetType: 'property' | 'roommate', targetId: string, action: 'like' | 'skip') =>\n    fetchApi('/api/swipes', {\n      method: 'POST',\n      body: JSON.stringify({ targetType, targetId, action }),\n    }),\n\n  // Matches\n  getMatches: (): Promise<(Match & { otherUserId: string; otherUser: { id: string; firstName: string | null; lastName: string | null; profilePhoto: string | null } | null })[]> => fetchApi('/api/matches'),\n\n  getMatch: (matchId: string): Promise<Match & { otherUserId: string; otherUser: { id: string; firstName: string | null; lastName: string | null; profilePhoto: string | null } | null }> =>\n    fetchApi(`/api/matches/${matchId}`),\n\n  // Favorites\n  getFavorites: (): Promise<Property[]> => fetchApi('/api/favorites'),\n\n  addFavorite: (propertyId: string) =>\n    fetchApi('/api/favorites', {\n      method: 'POST',\n      body: JSON.stringify({ propertyId }),\n    }),\n\n  removeFavorite: (propertyId: string) =>\n    fetchApi(`/api/favorites/${propertyId}`, { method: 'DELETE' }),\n\n  checkFavorite: (propertyId: string): Promise<{ isFavorited: boolean }> =>\n    fetchApi(`/api/favorites/${propertyId}/check`),\n\n  // Image Upload\n  uploadImage: (base64: string, fileName: string, contentType?: string): Promise<{ url: string }> =>\n    fetchApi('/api/upload/image', {\n      method: 'POST',\n      body: JSON.stringify({ base64, fileName, contentType }),\n    }),\n\n  // Messages\n  getMatchMessages: (matchId: string): Promise<Message[]> =>\n    fetchApi(`/api/matches/${matchId}/messages`),\n\n  sendMessage: (matchId: string, content: string): Promise<Message> =>\n    fetchApi(`/api/matches/${matchId}/messages`, {\n      method: 'POST',\n      body: JSON.stringify({ content }),\n    }),\n\n  markMessageRead: (messageId: string) =>\n    fetchApi(`/api/messages/${messageId}/read`, { method: 'PATCH' }),\n\n  getUnreadCount: (): Promise<{ count: number }> =>\n    fetchApi('/api/messages/unread-count'),\n\n  // Reports\n  reportUser: (reportedUserId: string, reason: string, description?: string) =>\n    fetchApi('/api/reports', {\n      method: 'POST',\n      body: JSON.stringify({ reportedUserId, reason, description }),\n    }),\n\n  // Blocks\n  blockUser: (blockedId: string) =>\n    fetchApi('/api/blocks', {\n      method: 'POST',\n      body: JSON.stringify({ blockedId }),\n    }),\n\n  unblockUser: (blockedId: string) =>\n    fetchApi(`/api/blocks/${blockedId}`, { method: 'DELETE' }),\n\n  getBlocks: () => fetchApi('/api/blocks'),\n\n  // Stripe\n  getStripeConfig: (): Promise<{ publishableKey: string }> =>\n    fetchApi('/api/stripe/config'),\n\n  createCheckoutSession: (priceId: string): Promise<{ url: string }> =>\n    fetchApi('/api/stripe/checkout', {\n      method: 'POST',\n      body: JSON.stringify({ priceId }),\n    }),\n\n  createPortalSession: (): Promise<{ url: string }> =>\n    fetchApi('/api/stripe/portal', { method: 'POST' }),\n\n  getSubscription: (): Promise<{ isPremium: boolean; premiumUntil: string | null; subscriptionId: string | null }> =>\n    fetchApi('/api/subscription'),\n\n  // Push Notifications\n  subscribeToPush: (subscription: { endpoint: string; p256dh: string; auth: string }) =>\n    fetchApi('/api/push/subscribe', {\n      method: 'POST',\n      body: JSON.stringify(subscription),\n    }),\n\n  unsubscribeFromPush: (endpoint: string) =>\n    fetchApi('/api/push/unsubscribe', {\n      method: 'POST',\n      body: JSON.stringify({ endpoint }),\n    }),\n};\n","path":null,"size_bytes":5635,"size_tokens":null},"client/src/components/ui/button-group.tsx":{"content":"import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Separator } from \"@/components/ui/separator\"\n\nconst buttonGroupVariants = cva(\n  \"flex w-fit items-stretch has-[>[data-slot=button-group]]:gap-2 [&>*]:focus-visible:relative [&>*]:focus-visible:z-10 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1\",\n  {\n    variants: {\n      orientation: {\n        horizontal:\n          \"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none\",\n        vertical:\n          \"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none\",\n      },\n    },\n    defaultVariants: {\n      orientation: \"horizontal\",\n    },\n  }\n)\n\nfunction ButtonGroup({\n  className,\n  orientation,\n  ...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof buttonGroupVariants>) {\n  return (\n    <div\n      role=\"group\"\n      data-slot=\"button-group\"\n      data-orientation={orientation}\n      className={cn(buttonGroupVariants({ orientation }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupText({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  asChild?: boolean\n}) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      className={cn(\n        \"bg-muted shadow-xs flex items-center gap-2 rounded-md border px-4 text-sm font-medium [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction ButtonGroupSeparator({\n  className,\n  orientation = \"vertical\",\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"button-group-separator\"\n      orientation={orientation}\n      className={cn(\n        \"bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  ButtonGroup,\n  ButtonGroupSeparator,\n  ButtonGroupText,\n  buttonGroupVariants,\n}\n","path":null,"size_bytes":2209,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport tailwindcss from \"@tailwindcss/vite\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\nimport { metaImagesPlugin } from \"./vite-plugin-meta-images\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    tailwindcss(),\n    metaImagesPlugin(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  css: {\n    postcss: {\n      plugins: [],\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    allowedHosts: true,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1330,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1037,"size_tokens":null},"client/src/index.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n  \n  --color-background: hsl(var(--background));\n  --color-foreground: hsl(var(--foreground));\n  \n  --color-card: hsl(var(--card));\n  --color-card-foreground: hsl(var(--card-foreground));\n  \n  --color-popover: hsl(var(--popover));\n  --color-popover-foreground: hsl(var(--popover-foreground));\n  \n  --color-primary: hsl(var(--primary));\n  --color-primary-foreground: hsl(var(--primary-foreground));\n  \n  --color-secondary: hsl(var(--secondary));\n  --color-secondary-foreground: hsl(var(--secondary-foreground));\n  \n  --color-muted: hsl(var(--muted));\n  --color-muted-foreground: hsl(var(--muted-foreground));\n  \n  --color-accent: hsl(var(--accent));\n  --color-accent-foreground: hsl(var(--accent-foreground));\n  \n  --color-destructive: hsl(var(--destructive));\n  --color-destructive-foreground: hsl(var(--destructive-foreground));\n  \n  --color-border: hsl(var(--border));\n  --color-input: hsl(var(--input));\n  --color-ring: hsl(var(--ring));\n  \n  --color-chart-1: hsl(var(--chart-1));\n  --color-chart-2: hsl(var(--chart-2));\n  --color-chart-3: hsl(var(--chart-3));\n  --color-chart-4: hsl(var(--chart-4));\n  --color-chart-5: hsl(var(--chart-5));\n  \n  --color-sidebar: hsl(var(--sidebar));\n  --color-sidebar-foreground: hsl(var(--sidebar-foreground));\n  --color-sidebar-primary: hsl(var(--sidebar-primary));\n  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));\n  --color-sidebar-accent: hsl(var(--sidebar-accent));\n  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));\n  --color-sidebar-border: hsl(var(--sidebar-border));\n  --color-sidebar-ring: hsl(var(--sidebar-ring));\n\n  --font-sans: 'Inter', sans-serif;\n  --font-display: 'Nunito', sans-serif;\n  \n  --radius: 0.75rem; /* 12px for rounded feel */\n}\n\n/* LIGHT MODE */\n:root {\n  --background: 0 0% 100%;\n  --foreground: 222 47% 11%;\n\n  /* Modern Blue */\n  --primary: 221 83% 53%; \n  --primary-foreground: 210 40% 98%;\n\n  /* Soft Purple Accent */\n  --secondary: 262 83% 58%;\n  --secondary-foreground: 210 40% 98%;\n\n  /* Card */\n  --card: 0 0% 100%;\n  --card-foreground: 222 47% 11%;\n\n  --popover: 0 0% 100%;\n  --popover-foreground: 222 47% 11%;\n\n  --muted: 210 40% 96.1%;\n  --muted-foreground: 215.4 16.3% 46.9%;\n\n  --accent: 210 40% 96.1%;\n  --accent-foreground: 222.2 47.4% 11.2%;\n\n  --destructive: 0 84.2% 60.2%;\n  --destructive-foreground: 210 40% 98%;\n\n  --border: 214.3 31.8% 91.4%;\n  --input: 214.3 31.8% 91.4%;\n  --ring: 221 83% 53%;\n\n  --radius: 0.75rem;\n\n  --chart-1: 12 76% 61%;\n  --chart-2: 173 58% 39%;\n  --chart-3: 197 37% 24%;\n  --chart-4: 43 74% 66%;\n  --chart-5: 27 87% 67%;\n  \n  --sidebar: 0 0% 98%;\n  --sidebar-foreground: 240 5.3% 26.1%;\n  --sidebar-primary: 240 5.9% 10%;\n  --sidebar-primary-foreground: 0 0% 98%;\n  --sidebar-accent: 240 4.8% 95.9%;\n  --sidebar-accent-foreground: 240 5.9% 10%;\n  --sidebar-border: 220 13% 91%;\n  --sidebar-ring: 217.2 91.2% 59.8%;\n}\n\n.dark {\n  --background: 222.2 84% 4.9%;\n  --foreground: 210 40% 98%;\n\n  --primary: 217.2 91.2% 59.8%;\n  --primary-foreground: 222.2 47.4% 11.2%;\n\n  --secondary: 262 83% 65%;\n  --secondary-foreground: 210 40% 98%;\n\n  --card: 222.2 84% 4.9%;\n  --card-foreground: 210 40% 98%;\n\n  --popover: 222.2 84% 4.9%;\n  --popover-foreground: 210 40% 98%;\n\n  --muted: 217.2 32.6% 17.5%;\n  --muted-foreground: 215 20.2% 65.1%;\n\n  --accent: 217.2 32.6% 17.5%;\n  --accent-foreground: 210 40% 98%;\n\n  --destructive: 0 62.8% 30.6%;\n  --destructive-foreground: 210 40% 98%;\n\n  --border: 217.2 32.6% 17.5%;\n  --input: 217.2 32.6% 17.5%;\n  --ring: 212.7 26.8% 83.9%;\n\n  --chart-1: 220 70% 50%;\n  --chart-2: 160 60% 45%;\n  --chart-3: 30 80% 55%;\n  --chart-4: 280 65% 60%;\n  --chart-5: 340 75% 55%;\n  \n  --sidebar: 240 5.9% 10%;\n  --sidebar-foreground: 240 4.8% 95.9%;\n  --sidebar-primary: 224.3 76.3% 48%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 240 3.7% 15.9%;\n  --sidebar-accent-foreground: 240 4.8% 95.9%;\n  --sidebar-border: 240 3.7% 15.9%;\n  --sidebar-ring: 217.2 91.2% 59.8%;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n  body {\n    @apply font-sans antialiased bg-neutral-900 text-foreground;\n  }\n  h1, h2, h3, h4, h5, h6 {\n    @apply font-display;\n  }\n}\n","path":null,"size_bytes":4416,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4280,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2859,"size_tokens":null},"client/src/pages/Favorites.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { BottomNav, TopBar } from \"@/components/Layout\";\nimport { Link } from \"wouter\";\nimport { MapPin, Heart } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\n\nexport default function Favorites() {\n  const { t } = useLanguage();\n\n  const { data: favorites = [], isLoading } = useQuery({\n    queryKey: [\"favorites\"],\n    queryFn: api.getFavorites,\n  });\n\n  return (\n    <div className=\"min-h-full bg-gray-50 pb-20\">\n      <TopBar title={t(\"nav.favorites\")} />\n\n      <main className=\"pt-20 px-4 max-w-md mx-auto\">\n        {isLoading ? (\n          <div className=\"text-center p-8\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n            <p className=\"text-gray-500\">Loading favorites...</p>\n          </div>\n        ) : favorites.length === 0 ? (\n          <div className=\"text-center p-8 mt-12\">\n            <div className=\"w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center\">\n              <Heart className=\"text-gray-400\" size={32} />\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-900 mb-2\">No favorites yet</h3>\n            <p className=\"text-gray-500\">Start swiping to add properties to your favorites!</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-2 gap-4\">\n            {favorites.map((prop) => (\n              <Link key={prop.id} href={`/property/${prop.id}`} className=\"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-shadow group block\">\n                <div className=\"aspect-[4/5] relative\">\n                  <img \n                    src={prop.images && prop.images.length > 0 ? prop.images[0] : \"https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&w=800&q=80\"} \n                    alt={prop.title} \n                    className=\"w-full h-full object-cover\" \n                  />\n                  <div className=\"absolute top-2 right-2 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-lg text-xs font-bold shadow-sm\">\n                    €{prop.price}\n                  </div>\n                </div>\n                <div className=\"p-3\">\n                  <h3 className=\"font-bold text-gray-900 truncate\">{prop.title}</h3>\n                  <div className=\"flex items-center gap-1 text-xs text-gray-500 mt-1\">\n                    <MapPin size={12} />\n                    <span className=\"truncate\">{prop.city}</span>\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n      </main>\n\n      <BottomNav role=\"tenant\" />\n    </div>\n  );\n}\n","path":null,"size_bytes":2739,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2143,"size_tokens":null},"replit.md":{"content":"# Tenant - Bilingual Rental App\n\n## Overview\n\nTenant is a Tinder-style bilingual (English/Italian) rental application that connects tenants looking for homes with landlords offering properties. The app features a swipe-based interface for browsing properties and roommates, with matching functionality similar to dating apps.\n\n**Core Features:**\n- Dual-role system: Users can be tenants (searching for homes/roommates) or landlords (listing properties)\n- Swipe-based discovery for properties and tenant profiles\n- Favorites and matching system\n- Bilingual support (English/Italian)\n- Mobile-first design with iOS-style interface framing\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework:** React with TypeScript using Vite as the build tool\n- **Routing:** Wouter for lightweight client-side routing\n- **State Management:** TanStack React Query for server state management\n- **UI Components:** shadcn/ui component library with Radix UI primitives\n- **Styling:** Tailwind CSS v4 with custom theme variables\n- **Animations:** Framer Motion for swipe gestures and transitions\n- **Carousel:** Embla Carousel for image galleries\n\nThe frontend is organized as a mobile-first SPA with a simulated phone frame for desktop viewing. Protected routes enforce authentication and role-based access.\n\n### Backend Architecture\n- **Runtime:** Node.js with Express\n- **Language:** TypeScript compiled with tsx for development and esbuild for production\n- **API Design:** RESTful endpoints under `/api/*`\n- **Authentication:** Replit OpenID Connect (OIDC) with Passport.js\n- **Session Management:** Express sessions stored in PostgreSQL via connect-pg-simple\n\nThe server handles authentication, user management, property/roommate CRUD operations, swipe actions, matches, and favorites.\n\n### Data Storage\n- **Database:** PostgreSQL with Drizzle ORM\n- **Schema Location:** `shared/schema.ts` contains all table definitions\n- **Migrations:** Managed via `drizzle-kit push`\n- **Key Tables:**\n  - `users` - User profiles with role (tenant/landlord), includes stripeCustomerId and stripeSubscriptionId for payments\n  - `properties` - Rental property listings\n  - `roommates` - Tenant profiles seeking roommates\n  - `swipes` - User swipe actions (like/skip)\n  - `matches` - Mutual matches between users\n  - `favorites` - Saved properties\n  - `messages` - Chat messages between matched users\n  - `reports` - User reports for content moderation\n  - `blocks` - Blocked users list\n  - `sessions` - Authentication session storage\n\n### Authentication Flow\n1. User initiates login via Replit OIDC\n2. On successful auth, user is redirected to onboarding if no role is set\n3. Role selection (tenant/landlord) determines app experience\n4. Session persists via PostgreSQL-backed session store\n\n### Build System\n- Development: Vite dev server with HMR for client, tsx for server\n- Production: Vite builds client to `dist/public`, esbuild bundles server to `dist/index.cjs`\n- Client serves from Express static middleware in production\n\n## External Dependencies\n\n### Database\n- **PostgreSQL** - Primary data store, connection via `DATABASE_URL` environment variable\n\n### Authentication\n- **Replit OIDC** - OpenID Connect provider for user authentication\n- **Environment Variables Required:**\n  - `DATABASE_URL` - PostgreSQL connection string\n  - `SESSION_SECRET` - Session encryption key\n  - `REPL_ID` - Replit environment identifier\n  - `ISSUER_URL` - OIDC issuer (defaults to Replit)\n\n### Third-Party Libraries\n- **openid-client** - OIDC client implementation\n- **passport** / **passport-local** - Authentication middleware\n- **drizzle-orm** / **drizzle-zod** - Database ORM and schema validation\n- **framer-motion** - Animation library for swipe gestures\n- **embla-carousel-react** - Touch-friendly carousels\n- **date-fns** - Date formatting utilities\n\n### Replit-Specific Integrations\n- `@replit/vite-plugin-runtime-error-modal` - Error overlay in development\n- `@replit/vite-plugin-cartographer` - Development tooling\n- `@replit/vite-plugin-dev-banner` - Development environment indicator\n\n### Payment Processing\n- **Stripe** - Subscription payments for Premium features\n- **Pricing:**\n  - Monthly: €12.99/month\n  - Yearly: €95.88/year (€7.99/month equivalent)\n- **Environment Variables:**\n  - `VITE_STRIPE_MONTHLY_PRICE_ID` - Stripe monthly price ID\n  - `VITE_STRIPE_YEARLY_PRICE_ID` - Stripe yearly price ID\n\n## Premium Features\n- **Free Users:** 10 swipes per day, resets daily\n- **Premium Users:** Unlimited swipes, see who liked you, priority views, unlimited messages\n\n## Chat System\n- Real-time messaging between matched users\n- Block checking prevents messaging blocked users\n- Read receipts for messages\n\n## Content Moderation\n- Report users with reason and description\n- Block/unblock users\n- Blocked users cannot send messages or view each other's profiles\n\n## Push Notifications\n- Web Push API implementation using VAPID keys\n- Capacitor Push Notifications for native iOS/Android\n- Service worker handles push events and notification display\n- Notifications sent on:\n  - New matches (both users notified)\n  - New messages (recipient notified)\n- Subscribe/unsubscribe endpoints for managing device subscriptions\n- Environment Variables:\n  - `VAPID_PUBLIC_KEY` - Public VAPID key for push\n  - `VAPID_PRIVATE_KEY` - Private VAPID key (secret)\n  - `VITE_VAPID_PUBLIC_KEY` - Public key for frontend\n\n## Mobile App (Capacitor)\n- Capacitor configured for iOS and Android builds\n- App ID: `app.tenant.rental`\n- Web assets built to `dist/public`\n- Native plugins: push-notifications, splash-screen, status-bar\n- Build instructions in `MOBILE_BUILD.md`","path":null,"size_bytes":5720,"size_tokens":null},"client/src/pages/Help.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { BottomNav, TopBar } from \"@/components/Layout\";\nimport { ArrowLeft, MessageCircle, Mail, FileText, ChevronRight } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Help({ role }: { role: \"tenant\" | \"landlord\" }) {\n  const { t } = useLanguage();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const faqs = [\n    {\n      question: \"How do I find a property?\",\n      answer: \"Swipe right on properties you like and left to skip. When a landlord likes you back, it's a match!\"\n    },\n    {\n      question: \"How do matches work?\",\n      answer: \"When both you and another user swipe right on each other, you get matched and can start messaging.\"\n    },\n    {\n      question: \"How do I update my profile?\",\n      answer: \"Go to your Profile page and tap on the settings icon to edit your information.\"\n    },\n    {\n      question: \"Is my data secure?\",\n      answer: \"Yes! We use industry-standard encryption to protect all your personal information.\"\n    }\n  ];\n\n  const handleLiveChat = () => {\n    toast({\n      title: \"Coming Soon\",\n      description: \"Live chat support will be available in a future update\",\n    });\n  };\n\n  const handleEmailSupport = () => {\n    window.location.href = \"mailto:support@tenant.app\";\n  };\n\n  return (\n    <div className=\"min-h-full bg-gray-50 pb-20\">\n      <TopBar \n        title=\"Help & Support\" \n        actionIcon={ArrowLeft} \n        onAction={() => setLocation(`/${role}/profile`)}\n        actionPosition=\"left\"\n      />\n\n      <main className=\"pt-24 px-4 max-w-md mx-auto\">\n        <div className=\"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden mb-6\">\n          <button \n            onClick={handleLiveChat}\n            className=\"w-full p-5 border-b border-gray-50 hover:bg-gray-50 transition-colors text-left\"\n            data-testid=\"button-live-chat\"\n          >\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-10 h-10 rounded-full bg-blue-50 text-blue-500 flex items-center justify-center\">\n                <MessageCircle size={20} />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-bold text-gray-900\">Live Chat Support</h3>\n                <p className=\"text-xs text-gray-500\" data-testid=\"text-chat-status\">Coming soon</p>\n              </div>\n            </div>\n          </button>\n\n          <button \n            onClick={handleEmailSupport}\n            className=\"w-full p-5 hover:bg-gray-50 transition-colors text-left\"\n            data-testid=\"button-email-support\"\n          >\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-10 h-10 rounded-full bg-green-50 text-green-500 flex items-center justify-center\">\n                <Mail size={20} />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-bold text-gray-900\">Email Support</h3>\n                <p className=\"text-xs text-gray-500\" data-testid=\"text-support-email\">support@tenant.app</p>\n              </div>\n            </div>\n          </button>\n        </div>\n\n        <h2 className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-3 px-2\">Frequently Asked Questions</h2>\n        <div className=\"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden mb-6\">\n          {faqs.map((faq, index) => (\n            <details key={index} className=\"group border-b border-gray-50 last:border-0\" data-testid={`faq-item-${index}`}>\n              <summary className=\"w-full p-5 flex items-center gap-4 hover:bg-gray-50 transition-colors cursor-pointer list-none\">\n                <div className=\"w-10 h-10 rounded-full bg-purple-50 text-purple-500 flex items-center justify-center flex-shrink-0\">\n                  <FileText size={20} />\n                </div>\n                <div className=\"flex-1 text-left\">\n                  <h3 className=\"font-bold text-gray-900\">{faq.question}</h3>\n                </div>\n                <ChevronRight size={18} className=\"text-gray-300 transition-transform group-open:rotate-90\" />\n              </summary>\n              <div className=\"px-5 pb-5 pl-[4.5rem]\">\n                <p className=\"text-sm text-gray-600\">{faq.answer}</p>\n              </div>\n            </details>\n          ))}\n        </div>\n\n        <p className=\"text-center text-sm text-gray-400\">\n          App Version 1.0.0\n        </p>\n      </main>\n\n      <BottomNav role={role} />\n    </div>\n  );\n}\n","path":null,"size_bytes":4585,"size_tokens":null},"client/src/hooks/useAuth.ts":{"content":"import { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { useEffect, useState } from \"react\";\nimport type { User } from \"@shared/schema\";\nimport { supabase } from \"@/lib/supabase\";\n\nasync function fetchUser(): Promise<User | null> {\n  try {\n    const { data: { session } } = await supabase.auth.getSession();\n    if (!session?.access_token) {\n      return null;\n    }\n\n    const response = await fetch(\"/api/auth/user\", {\n      credentials: \"include\",\n      headers: {\n        'Authorization': `Bearer ${session.access_token}`,\n      },\n    });\n    if (!response.ok) {\n      if (response.status === 401) {\n        return null;\n      }\n      throw new Error(\"Failed to fetch user\");\n    }\n    return await response.json();\n  } catch {\n    return null;\n  }\n}\n\nexport function useAuth() {\n  const queryClient = useQueryClient();\n  const [isReady, setIsReady] = useState(false);\n  \n  useEffect(() => {\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {\n      if (event === 'SIGNED_IN' || event === 'SIGNED_OUT' || event === 'TOKEN_REFRESHED') {\n        queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      }\n      setIsReady(true);\n    });\n\n    supabase.auth.getSession().then(() => setIsReady(true));\n\n    return () => subscription.unsubscribe();\n  }, [queryClient]);\n  \n  const { data: user, isLoading, error } = useQuery<User | null>({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: fetchUser,\n    retry: false,\n    staleTime: 1000 * 60 * 5,\n    enabled: isReady,\n  });\n\n  const logout = async () => {\n    await supabase.auth.signOut();\n    queryClient.setQueryData([\"/api/auth/user\"], null);\n    queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n  };\n\n  return {\n    user,\n    isLoading: isLoading || !isReady,\n    isAuthenticated: !!user,\n    error,\n    logout,\n  };\n}\n","path":null,"size_bytes":1862,"size_tokens":null},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n","path":null,"size_bytes":116,"size_tokens":null},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  const isProduction = process.env.NODE_ENV === \"production\";\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: isProduction,\n      sameSite: isProduction ? \"lax\" : \"lax\",\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(claims: any) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  const registeredStrategies = new Set<string>();\n\n  const ensureStrategy = (domain: string) => {\n    const strategyName = `replitauth:${domain}`;\n    if (!registeredStrategies.has(strategyName)) {\n      const strategy = new Strategy(\n        {\n          name: strategyName,\n          config,\n          scope: \"openid email profile offline_access\",\n          callbackURL: `https://${domain}/api/callback`,\n        },\n        verify,\n      );\n      passport.use(strategy);\n      registeredStrategies.add(strategyName);\n    }\n  };\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    const isProduction = process.env.NODE_ENV === \"production\";\n    const redirectUrl = client.buildEndSessionUrl(config, {\n      client_id: process.env.REPL_ID!,\n      post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n    }).href;\n    \n    req.logout(() => {\n      req.session.destroy((err) => {\n        if (err) {\n          console.error(\"Error destroying session:\", err);\n        }\n        res.clearCookie(\"connect.sid\", {\n          path: \"/\",\n          httpOnly: true,\n          secure: isProduction,\n          sameSite: \"lax\",\n        });\n        res.redirect(redirectUrl);\n      });\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n","path":null,"size_bytes":4856,"size_tokens":null},"client/src/pages/Privacy.tsx":{"content":"import { useState } from \"react\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { BottomNav, TopBar } from \"@/components/Layout\";\nimport { ArrowLeft, Shield, Eye, Lock, Trash2, Download } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\nexport default function Privacy({ role }: { role: \"tenant\" | \"landlord\" }) {\n  const { t } = useLanguage();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [visibility, setVisibility] = useState<\"public\" | \"private\">(\"public\");\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n\n  const handleToggleVisibility = () => {\n    const newVisibility = visibility === \"public\" ? \"private\" : \"public\";\n    setVisibility(newVisibility);\n    toast({\n      title: \"Profile Visibility Updated\",\n      description: `Your profile is now ${newVisibility}`,\n    });\n  };\n\n  const handleToggle2FA = () => {\n    toast({\n      title: \"Coming Soon\",\n      description: \"Two-factor authentication will be available in a future update\",\n    });\n  };\n\n  const handleDownloadData = () => {\n    toast({\n      title: \"Request Received\",\n      description: \"Please email support@tenant.app to request your data\",\n    });\n  };\n\n  const handleDeleteAccount = () => {\n    setShowDeleteDialog(false);\n    toast({\n      title: \"Request Received\",\n      description: \"Please email support@tenant.app to delete your account\",\n    });\n  };\n\n  return (\n    <div className=\"min-h-full bg-gray-50 pb-20\">\n      <TopBar \n        title=\"Privacy & Security\" \n        actionIcon={ArrowLeft} \n        onAction={() => setLocation(`/${role}/profile`)}\n        actionPosition=\"left\"\n      />\n\n      <main className=\"pt-24 px-4 max-w-md mx-auto\">\n        <div className=\"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden mb-6\">\n          <button \n            onClick={handleToggleVisibility}\n            className=\"w-full p-5 border-b border-gray-50 hover:bg-gray-50 transition-colors text-left\"\n            data-testid=\"button-toggle-visibility\"\n          >\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-10 h-10 rounded-full bg-blue-50 text-blue-500 flex items-center justify-center\">\n                <Eye size={20} />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-bold text-gray-900\">Profile Visibility</h3>\n                <p className=\"text-xs text-gray-500\">Control who can see your profile</p>\n              </div>\n              <span \n                className={`text-xs font-medium px-2 py-1 rounded-full ${\n                  visibility === \"public\" \n                    ? \"text-green-600 bg-green-50\" \n                    : \"text-gray-600 bg-gray-100\"\n                }`} \n                data-testid=\"status-visibility\"\n              >\n                {visibility === \"public\" ? \"Public\" : \"Private\"}\n              </span>\n            </div>\n          </button>\n\n          <button \n            onClick={handleToggle2FA}\n            className=\"w-full p-5 border-b border-gray-50 hover:bg-gray-50 transition-colors text-left\"\n            data-testid=\"button-toggle-2fa\"\n          >\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-10 h-10 rounded-full bg-green-50 text-green-500 flex items-center justify-center\">\n                <Lock size={20} />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-bold text-gray-900\">Two-Factor Authentication</h3>\n                <p className=\"text-xs text-gray-500\">Add an extra layer of security</p>\n              </div>\n              <span className=\"text-xs text-gray-500 font-medium bg-gray-100 px-2 py-1 rounded-full\" data-testid=\"status-2fa\">\n                Off\n              </span>\n            </div>\n          </button>\n\n          <button \n            onClick={handleDownloadData}\n            className=\"w-full p-5 border-b border-gray-50 hover:bg-gray-50 transition-colors text-left\"\n            data-testid=\"button-download-data\"\n          >\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-10 h-10 rounded-full bg-purple-50 text-purple-500 flex items-center justify-center\">\n                <Download size={20} />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-bold text-gray-900\">Download My Data</h3>\n                <p className=\"text-xs text-gray-500\">Contact support to request your data</p>\n              </div>\n            </div>\n          </button>\n\n          <button \n            onClick={() => setShowDeleteDialog(true)}\n            className=\"w-full p-5 hover:bg-gray-50 transition-colors text-left\"\n            data-testid=\"button-delete-account\"\n          >\n            <div className=\"flex items-center gap-4\">\n              <div className=\"w-10 h-10 rounded-full bg-red-50 text-red-500 flex items-center justify-center\">\n                <Trash2 size={20} />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-bold text-red-600\">Delete Account</h3>\n                <p className=\"text-xs text-gray-500\">Contact support to delete your account</p>\n              </div>\n            </div>\n          </button>\n        </div>\n\n        <div className=\"bg-white rounded-3xl shadow-sm border border-gray-100 p-5\">\n          <div className=\"flex items-start gap-3\">\n            <Shield className=\"text-primary mt-0.5\" size={20} />\n            <div>\n              <h3 className=\"font-bold text-gray-900 mb-1\">Your Data is Protected</h3>\n              <p className=\"text-sm text-gray-500\">\n                We use industry-standard encryption to protect your personal information. \n                Your data is never shared with third parties without your consent.\n              </p>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <AlertDialog open={showDeleteDialog} onOpenChange={setShowDeleteDialog}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Account</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete your account? This action cannot be undone. \n              All your data will be permanently removed.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancel</AlertDialogCancel>\n            <AlertDialogAction \n              onClick={handleDeleteAccount}\n              className=\"bg-red-600 hover:bg-red-700\"\n              data-testid=\"button-confirm-delete\"\n            >\n              Delete Account\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <BottomNav role={role} />\n    </div>\n  );\n}\n","path":null,"size_bytes":7116,"size_tokens":null},"client/src/components/FilterSheet.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetTrigger } from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { Filter, X } from \"lucide-react\";\n\nexport interface FilterOptions {\n  priceRange: [number, number];\n  beds: number | null;\n  baths: number | null;\n  ageRange: [number, number];\n  gender: string | null;\n}\n\nconst getDefaultFilters = (): FilterOptions => ({\n  priceRange: [0, 5000],\n  beds: null,\n  baths: null,\n  ageRange: [18, 65],\n  gender: null,\n});\n\ninterface FilterSheetProps {\n  type: \"property\" | \"roommate\";\n  onApply?: (filters: FilterOptions) => void;\n  trigger?: React.ReactNode;\n  currentFilters?: FilterOptions | null;\n}\n\nexport function FilterSheet({ type, onApply, trigger, currentFilters }: FilterSheetProps) {\n  const [open, setOpen] = useState(false);\n  const [filters, setFilters] = useState<FilterOptions>(currentFilters || getDefaultFilters());\n\n  useEffect(() => {\n    if (open && currentFilters) {\n      setFilters(currentFilters);\n    } else if (open && !currentFilters) {\n      setFilters(getDefaultFilters());\n    }\n  }, [open, currentFilters]);\n\n  const handleApply = () => {\n    onApply?.(filters);\n    setOpen(false);\n  };\n\n  const handleReset = () => {\n    const defaults = getDefaultFilters();\n    setFilters(defaults);\n    onApply?.(defaults);\n    setOpen(false);\n  };\n\n  return (\n    <Sheet open={open} onOpenChange={setOpen}>\n      <SheetTrigger asChild>\n        {trigger || (\n          <button className=\"p-2 text-gray-600 hover:text-primary transition-colors\" data-testid=\"button-filter\">\n            <Filter className=\"w-5 h-5\" />\n          </button>\n        )}\n      </SheetTrigger>\n      <SheetContent side=\"bottom\" className=\"rounded-t-3xl max-h-[80vh] overflow-y-auto\">\n        <SheetHeader className=\"pb-4\">\n          <div className=\"flex items-center justify-between\">\n            <SheetTitle className=\"text-xl font-bold\">Filters</SheetTitle>\n            <button \n              onClick={handleReset}\n              className=\"text-sm text-primary font-medium hover:underline\"\n              data-testid=\"button-filter-reset\"\n            >\n              Reset\n            </button>\n          </div>\n        </SheetHeader>\n        \n        <div className=\"space-y-6 pb-6\">\n          {type === \"property\" ? (\n            <>\n              <div>\n                <label className=\"text-sm font-semibold text-gray-700 mb-3 block\">\n                  Price Range: ${filters.priceRange[0]} - ${filters.priceRange[1]}/mo\n                </label>\n                <Slider\n                  value={filters.priceRange}\n                  onValueChange={(value) => setFilters({ ...filters, priceRange: value as [number, number] })}\n                  min={0}\n                  max={10000}\n                  step={100}\n                  className=\"mt-2\"\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-semibold text-gray-700 mb-3 block\">Bedrooms</label>\n                <div className=\"flex gap-2\">\n                  {[null, 1, 2, 3, 4].map((num) => (\n                    <button\n                      key={num ?? \"any\"}\n                      onClick={() => setFilters({ ...filters, beds: num })}\n                      className={`flex-1 py-2 px-3 rounded-xl text-sm font-medium transition-colors ${\n                        filters.beds === num\n                          ? \"bg-primary text-white\"\n                          : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                      }`}\n                      data-testid={`button-filter-beds-${num ?? \"any\"}`}\n                    >\n                      {num === null ? \"Any\" : `${num}+`}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-semibold text-gray-700 mb-3 block\">Bathrooms</label>\n                <div className=\"flex gap-2\">\n                  {[null, 1, 2, 3].map((num) => (\n                    <button\n                      key={num ?? \"any\"}\n                      onClick={() => setFilters({ ...filters, baths: num })}\n                      className={`flex-1 py-2 px-3 rounded-xl text-sm font-medium transition-colors ${\n                        filters.baths === num\n                          ? \"bg-primary text-white\"\n                          : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                      }`}\n                      data-testid={`button-filter-baths-${num ?? \"any\"}`}\n                    >\n                      {num === null ? \"Any\" : `${num}+`}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </>\n          ) : (\n            <>\n              <div>\n                <label className=\"text-sm font-semibold text-gray-700 mb-3 block\">\n                  Age Range: {filters.ageRange[0]} - {filters.ageRange[1]} years\n                </label>\n                <Slider\n                  value={filters.ageRange}\n                  onValueChange={(value) => setFilters({ ...filters, ageRange: value as [number, number] })}\n                  min={18}\n                  max={80}\n                  step={1}\n                  className=\"mt-2\"\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-semibold text-gray-700 mb-3 block\">Gender Preference</label>\n                <div className=\"flex gap-2\">\n                  {[null, \"male\", \"female\", \"other\"].map((g) => (\n                    <button\n                      key={g ?? \"any\"}\n                      onClick={() => setFilters({ ...filters, gender: g })}\n                      className={`flex-1 py-2 px-3 rounded-xl text-sm font-medium transition-colors capitalize ${\n                        filters.gender === g\n                          ? \"bg-secondary text-white\"\n                          : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\n                      }`}\n                      data-testid={`button-filter-gender-${g ?? \"any\"}`}\n                    >\n                      {g === null ? \"Any\" : g}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <label className=\"text-sm font-semibold text-gray-700 mb-3 block\">\n                  Budget: ${filters.priceRange[0]} - ${filters.priceRange[1]}/mo\n                </label>\n                <Slider\n                  value={filters.priceRange}\n                  onValueChange={(value) => setFilters({ ...filters, priceRange: value as [number, number] })}\n                  min={0}\n                  max={5000}\n                  step={50}\n                  className=\"mt-2\"\n                />\n              </div>\n            </>\n          )}\n        </div>\n\n        <Button \n          onClick={handleApply}\n          className=\"w-full rounded-2xl py-6 text-base font-bold\"\n          data-testid=\"button-filter-apply\"\n        >\n          Apply Filters\n        </Button>\n      </SheetContent>\n    </Sheet>\n  );\n}\n","path":null,"size_bytes":7157,"size_tokens":null},"client/src/components/ProtectedRoute.tsx":{"content":"import { ReactNode } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface ProtectedRouteProps {\n  children: ReactNode;\n  requiredRole?: \"tenant\" | \"landlord\";\n}\n\nexport function ProtectedRoute({ children, requiredRole }: ProtectedRouteProps) {\n  const { user, isLoading, isAuthenticated } = useAuth();\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-full bg-white flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-full bg-white flex flex-col items-center justify-center p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Please sign in</h2>\n        <p className=\"text-gray-500 mb-6\">You need to be logged in to access this page</p>\n        <button \n          onClick={() => window.location.href = \"/api/login\"}\n          className=\"bg-primary text-white font-bold text-lg py-4 px-8 rounded-2xl shadow-lg\"\n          data-testid=\"button-login-protected\"\n        >\n          Sign In\n        </button>\n      </div>\n    );\n  }\n\n  if (!user?.role) {\n    window.location.href = \"/onboarding\";\n    return (\n      <div className=\"min-h-full bg-white flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  if (requiredRole && user?.role !== requiredRole) {\n    return (\n      <div className=\"min-h-full bg-white flex flex-col items-center justify-center p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Access Denied</h2>\n        <p className=\"text-gray-500 mb-6\">You don't have permission to access this page</p>\n        <button \n          onClick={() => window.location.href = \"/\"}\n          className=\"bg-primary text-white font-bold text-lg py-4 px-8 rounded-2xl shadow-lg\"\n          data-testid=\"button-back-home\"\n        >\n          Go Home\n        </button>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n}\n","path":null,"size_bytes":2070,"size_tokens":null},"server/stripeClient.ts":{"content":"import Stripe from 'stripe';\n\nlet connectionSettings: any;\n\nasync function getCredentials() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY\n    ? 'repl ' + process.env.REPL_IDENTITY\n    : process.env.WEB_REPL_RENEWAL\n      ? 'depl ' + process.env.WEB_REPL_RENEWAL\n      : null;\n\n  if (!xReplitToken) {\n    throw new Error('X_REPLIT_TOKEN not found for repl/depl');\n  }\n\n  const connectorName = 'stripe';\n  const isProduction = process.env.REPLIT_DEPLOYMENT === '1';\n  const targetEnvironment = isProduction ? 'production' : 'development';\n\n  const url = new URL(`https://${hostname}/api/v2/connection`);\n  url.searchParams.set('include_secrets', 'true');\n  url.searchParams.set('connector_names', connectorName);\n  url.searchParams.set('environment', targetEnvironment);\n\n  const response = await fetch(url.toString(), {\n    headers: {\n      'Accept': 'application/json',\n      'X_REPLIT_TOKEN': xReplitToken\n    }\n  });\n\n  const data = await response.json();\n  \n  connectionSettings = data.items?.[0];\n\n  if (!connectionSettings || (!connectionSettings.settings.publishable || !connectionSettings.settings.secret)) {\n    throw new Error(`Stripe ${targetEnvironment} connection not found`);\n  }\n\n  return {\n    publishableKey: connectionSettings.settings.publishable,\n    secretKey: connectionSettings.settings.secret,\n  };\n}\n\nexport async function getUncachableStripeClient() {\n  const { secretKey } = await getCredentials();\n\n  return new Stripe(secretKey);\n}\n\nexport async function getStripePublishableKey() {\n  const { publishableKey } = await getCredentials();\n  return publishableKey;\n}\n\nexport async function getStripeSecretKey() {\n  const { secretKey } = await getCredentials();\n  return secretKey;\n}\n\nlet stripeSync: any = null;\n\nexport async function getStripeSync() {\n  if (!stripeSync) {\n    const { StripeSync } = await import('stripe-replit-sync');\n    const secretKey = await getStripeSecretKey();\n\n    stripeSync = new StripeSync({\n      poolConfig: {\n        connectionString: process.env.DATABASE_URL!,\n        max: 2,\n      },\n      stripeSecretKey: secretKey,\n    });\n  }\n  return stripeSync;\n}\n","path":null,"size_bytes":2177,"size_tokens":null},"server/webhookHandlers.ts":{"content":"import { getStripeSync } from './stripeClient';\nimport { storage } from './storage';\n\nexport class WebhookHandlers {\n  static async processWebhook(payload: Buffer, signature: string, uuid: string): Promise<void> {\n    if (!Buffer.isBuffer(payload)) {\n      throw new Error(\n        'STRIPE WEBHOOK ERROR: Payload must be a Buffer. ' +\n        'Received type: ' + typeof payload + '. ' +\n        'This usually means express.json() parsed the body before reaching this handler. ' +\n        'FIX: Ensure webhook route is registered BEFORE app.use(express.json()).'\n      );\n    }\n\n    const sync = await getStripeSync();\n    await sync.processWebhook(payload, signature, uuid);\n  }\n\n  static async handleSubscriptionUpdate(customerId: string, subscriptionId: string, status: string) {\n    const user = await storage.getUserByStripeCustomerId(customerId);\n    if (user) {\n      const isPremium = ['active', 'trialing'].includes(status);\n      await storage.updateUser(user.id, {\n        isPremium,\n        stripeSubscriptionId: subscriptionId,\n      });\n    }\n  }\n}\n","path":null,"size_bytes":1062,"size_tokens":null},"client/src/pages/Terms.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { ArrowLeft } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\n\nexport default function Terms() {\n  const { language } = useLanguage();\n  const [, setLocation] = useLocation();\n\n  return (\n    <div className=\"min-h-full bg-white\">\n      <div className=\"sticky top-0 bg-white border-b border-gray-100 px-4 py-3 flex items-center gap-3 z-10\">\n        <button onClick={() => setLocation(\"/\")} className=\"p-2 -ml-2\" data-testid=\"button-back\">\n          <ArrowLeft size={24} className=\"text-gray-700\" />\n        </button>\n        <h1 className=\"text-lg font-bold text-gray-900\">\n          {language === \"it\" ? \"Termini di Servizio\" : \"Terms of Service\"}\n        </h1>\n      </div>\n\n      <div className=\"p-6 space-y-6\">\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"1. Accettazione dei Termini\" : \"1. Acceptance of Terms\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\" \n              ? \"Utilizzando l'app Tenant, accetti di essere vincolato da questi Termini di Servizio. Se non accetti questi termini, ti preghiamo di non utilizzare l'applicazione.\"\n              : \"By using the Tenant app, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the application.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"2. Descrizione del Servizio\" : \"2. Description of Service\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Tenant e una piattaforma che mette in contatto inquilini in cerca di alloggio con proprietari che offrono immobili in affitto. Il servizio include funzionalita di ricerca, matching e comunicazione tra utenti.\"\n              : \"Tenant is a platform that connects tenants looking for housing with landlords offering rental properties. The service includes search, matching, and communication features between users.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"3. Account Utente\" : \"3. User Account\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Sei responsabile per mantenere la riservatezza del tuo account e password. Devi avere almeno 18 anni per utilizzare questo servizio.\"\n              : \"You are responsible for maintaining the confidentiality of your account and password. You must be at least 18 years old to use this service.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"4. Contenuto dell'Utente\" : \"4. User Content\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Sei responsabile per tutti i contenuti che pubblichi sull'app, incluse foto, descrizioni e messaggi. Non e consentito pubblicare contenuti illegali, offensivi o fuorvianti.\"\n              : \"You are responsible for all content you post on the app, including photos, descriptions, and messages. You may not post illegal, offensive, or misleading content.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"5. Limitazione di Responsabilita\" : \"5. Limitation of Liability\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Tenant non e responsabile per eventuali danni derivanti dall'uso dell'applicazione o dalle transazioni tra utenti. Ti consigliamo di verificare sempre l'identita delle persone con cui interagisci.\"\n              : \"Tenant is not liable for any damages arising from the use of the application or transactions between users. We recommend always verifying the identity of people you interact with.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"6. Modifiche ai Termini\" : \"6. Changes to Terms\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Ci riserviamo il diritto di modificare questi termini in qualsiasi momento. Le modifiche saranno comunicate attraverso l'applicazione.\"\n              : \"We reserve the right to modify these terms at any time. Changes will be communicated through the application.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"7. Contatti\" : \"7. Contact\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Per domande sui Termini di Servizio, contattaci all'indirizzo email di supporto.\"\n              : \"For questions about the Terms of Service, contact us at the support email address.\"}\n          </p>\n        </section>\n\n        <p className=\"text-sm text-gray-400 pt-6\">\n          {language === \"it\" ? \"Ultimo aggiornamento: Dicembre 2025\" : \"Last updated: December 2025\"}\n        </p>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":5458,"size_tokens":null},"client/src/lib/supabase.ts":{"content":"import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.error('Missing Supabase environment variables');\n}\n\nexport const supabase = createClient(\n  supabaseUrl || 'https://placeholder.supabase.co',\n  supabaseAnonKey || 'placeholder-key'\n);\n","path":null,"size_bytes":409,"size_tokens":null},"MOBILE_BUILD.md":{"content":"# Mobile App Build Instructions\n\nThis document explains how to build the Tenant app for iOS and Android using Capacitor.\n\n## Prerequisites\n\n### For iOS builds:\n- macOS with Xcode 14+ installed\n- Apple Developer account for App Store submission\n- CocoaPods installed (`sudo gem install cocoapods`)\n\n### For Android builds:\n- Android Studio with SDK 33+\n- Java 17+\n- Google Play Console account for Play Store submission\n\n## Initial Setup\n\n1. **Build the web app:**\n```bash\nnpm run build\n```\n\n2. **Add iOS platform (on macOS):**\n```bash\nnpx cap add ios\n```\n\n3. **Add Android platform:**\n```bash\nnpx cap add android\n```\n\n## Building for iOS\n\n1. **Sync web assets to iOS:**\n```bash\nnpx cap sync ios\n```\n\n2. **Open in Xcode:**\n```bash\nnpx cap open ios\n```\n\n3. **In Xcode:**\n   - Select your development team\n   - Configure bundle identifier: `app.tenant.rental`\n   - Set up push notification capabilities\n   - Configure app icons and splash screens\n   - Build and archive for App Store\n\n## Building for Android\n\n1. **Sync web assets to Android:**\n```bash\nnpx cap sync android\n```\n\n2. **Open in Android Studio:**\n```bash\nnpx cap open android\n```\n\n3. **In Android Studio:**\n   - Configure signing keys\n   - Set up Firebase for push notifications\n   - Configure app icons and splash screens\n   - Build signed APK/AAB for Play Store\n\n## Push Notifications Setup\n\nThe app currently uses Web Push for browser notifications. For native iOS/Android push notifications, additional setup is required:\n\n### iOS (APNs) - Required for iOS push\n1. Create an APNs key in Apple Developer portal\n2. Add Push Notification capability in Xcode\n3. Set up a push notification service (e.g., Firebase Cloud Messaging, OneSignal, or direct APNs integration)\n4. Update the backend to send notifications via APNs using the device tokens\n\n### Android (FCM) - Required for Android push\n1. Create a Firebase project at console.firebase.google.com\n2. Download `google-services.json` and add to `android/app/`\n3. Update the backend to send notifications via FCM using the registration tokens\n\n### Current Implementation Status\n- **Web Push**: Fully implemented with VAPID keys (works in browsers)\n- **Native Push**: Capacitor plugin installed, but requires APNs/FCM backend integration\n- **Device Token Storage**: Schema ready, but backend needs platform-specific send logic\n\n### To Complete Native Push\nYou'll need to:\n1. Set up APNs (for iOS) and/or FCM (for Android) \n2. Update `server/pushService.ts` to route notifications based on subscription type\n3. Store platform type with push subscriptions to distinguish web vs native tokens\n\n## App Icons\n\nPlace your app icons in the following locations:\n- iOS: `ios/App/App/Assets.xcassets/AppIcon.appiconset/`\n- Android: `android/app/src/main/res/mipmap-*/`\n\nUse a tool like [App Icon Generator](https://appicon.co/) to generate all required sizes.\n\n## Splash Screen\n\nThe app uses `@capacitor/splash-screen` for native splash screens.\nConfigure in `capacitor.config.ts` and add images to native projects.\n\n## Common Commands\n\n```bash\n# Sync all changes to native projects\nnpx cap sync\n\n# Copy web assets only (no native plugin updates)\nnpx cap copy\n\n# Update native plugins\nnpx cap update\n\n# Open iOS project\nnpx cap open ios\n\n# Open Android project\nnpx cap open android\n\n# Build web app and sync\nnpm run build && npx cap sync\n```\n\n## Troubleshooting\n\n### iOS Build Fails\n- Run `pod install` in the `ios/App` directory\n- Clean build folder in Xcode (Shift+Cmd+K)\n\n### Android Build Fails\n- Sync Gradle files in Android Studio\n- Invalidate caches and restart\n\n### Push Notifications Not Working\n- Verify VAPID keys are correctly configured\n- Check notification permissions in device settings\n- Ensure service worker is registered correctly\n","path":null,"size_bytes":3752,"size_tokens":null},"server/stripeService.ts":{"content":"import { storage } from './storage';\nimport { getUncachableStripeClient } from './stripeClient';\n\nexport class StripeService {\n  async createCustomer(email: string, userId: string) {\n    const stripe = await getUncachableStripeClient();\n    return await stripe.customers.create({\n      email,\n      metadata: { userId },\n    });\n  }\n\n  async createCheckoutSession(customerId: string, priceId: string, successUrl: string, cancelUrl: string) {\n    const stripe = await getUncachableStripeClient();\n    return await stripe.checkout.sessions.create({\n      customer: customerId,\n      payment_method_types: ['card'],\n      line_items: [{ price: priceId, quantity: 1 }],\n      mode: 'subscription',\n      success_url: successUrl,\n      cancel_url: cancelUrl,\n    });\n  }\n\n  async createCustomerPortalSession(customerId: string, returnUrl: string) {\n    const stripe = await getUncachableStripeClient();\n    return await stripe.billingPortal.sessions.create({\n      customer: customerId,\n      return_url: returnUrl,\n    });\n  }\n\n  async cancelSubscription(subscriptionId: string) {\n    const stripe = await getUncachableStripeClient();\n    return await stripe.subscriptions.cancel(subscriptionId);\n  }\n}\n\nexport const stripeService = new StripeService();\n","path":null,"size_bytes":1250,"size_tokens":null},"server/supabaseAuth.ts":{"content":"import { createClient } from '@supabase/supabase-js';\nimport type { Express, RequestHandler } from \"express\";\nimport session from \"express-session\";\nimport connectPg from \"connect-pg-simple\";\nimport rateLimit from \"express-rate-limit\";\nimport { storage } from \"./storage\";\n\nconst supabaseUrl = process.env.SUPABASE_URL!;\nconst supabaseAnonKey = process.env.SUPABASE_ANON_KEY!;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\nexport const supabaseAdmin = createClient(supabaseUrl, supabaseServiceKey);\n\n// Rate limiters for auth endpoints\nconst authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 10, // limit each IP to 10 requests per windowMs\n  message: { message: \"Too many attempts, please try again later\" },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\nconst uploadLimiter = rateLimit({\n  windowMs: 60 * 1000, // 1 minute\n  max: 20, // limit each IP to 20 uploads per minute\n  message: { message: \"Too many uploads, please try again later\" },\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000;\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  const isProduction = process.env.NODE_ENV === \"production\";\n  \n  // Require SESSION_SECRET in production\n  const sessionSecret = process.env.SESSION_SECRET;\n  if (isProduction && !sessionSecret) {\n    throw new Error(\"SESSION_SECRET environment variable is required in production\");\n  }\n  \n  return session({\n    secret: sessionSecret || 'dev-only-secret-key',\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: isProduction,\n      sameSite: isProduction ? \"lax\" : \"lax\",\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n\n  app.get(\"/api/auth/callback\", async (req, res) => {\n    res.redirect(\"/\");\n  });\n\n  app.get(\"/api/auth/user\", async (req: any, res) => {\n    try {\n      const authHeader = req.headers.authorization;\n      if (!authHeader || !authHeader.startsWith('Bearer ')) {\n        return res.status(401).json({ message: \"No token provided\" });\n      }\n\n      const token = authHeader.split(' ')[1];\n      const { data: { user: supabaseUser }, error } = await supabase.auth.getUser(token);\n\n      if (error || !supabaseUser) {\n        return res.status(401).json({ message: \"Invalid token\" });\n      }\n\n      let user = await storage.getUser(supabaseUser.id);\n      \n      if (!user) {\n        await storage.upsertUser({\n          id: supabaseUser.id,\n          email: supabaseUser.email || null,\n          firstName: supabaseUser.user_metadata?.first_name || null,\n          lastName: supabaseUser.user_metadata?.last_name || null,\n          profileImageUrl: supabaseUser.user_metadata?.avatar_url || null,\n        });\n        user = await storage.getUser(supabaseUser.id);\n      }\n\n      res.json(user);\n    } catch (error: any) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        console.error(\"Error destroying session:\", err);\n      }\n      res.json({ message: \"Logged out\" });\n    });\n  });\n\n  // Image upload endpoint using Supabase Storage\n  app.post(\"/api/upload/image\", uploadLimiter, async (req, res) => {\n    try {\n      const authHeader = req.headers.authorization;\n      if (!authHeader || !authHeader.startsWith('Bearer ')) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n\n      const token = authHeader.split(' ')[1];\n      const { data: { user: supabaseUser }, error: authError } = await supabase.auth.getUser(token);\n\n      if (authError || !supabaseUser) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n\n      const { base64, fileName, contentType } = req.body;\n\n      if (!base64 || !fileName) {\n        return res.status(400).json({ message: \"Missing base64 or fileName\" });\n      }\n\n      // Convert base64 to buffer\n      const base64Data = base64.replace(/^data:image\\/\\w+;base64,/, '');\n      const buffer = Buffer.from(base64Data, 'base64');\n\n      // Generate unique file path\n      const fileExt = fileName.split('.').pop() || 'jpg';\n      const filePath = `users/${supabaseUser.id}/${Date.now()}.${fileExt}`;\n\n      // Upload to Supabase Storage\n      const { data, error } = await supabaseAdmin.storage\n        .from('user-images')\n        .upload(filePath, buffer, {\n          contentType: contentType || 'image/jpeg',\n          upsert: false,\n        });\n\n      if (error) {\n        console.error('Storage upload error:', error);\n        return res.status(500).json({ message: error.message });\n      }\n\n      // Get public URL\n      const { data: urlData } = supabaseAdmin.storage\n        .from('user-images')\n        .getPublicUrl(filePath);\n\n      res.json({ url: urlData.publicUrl });\n    } catch (error: any) {\n      console.error('Upload error:', error);\n      res.status(500).json({ message: \"Failed to upload image\" });\n    }\n  });\n\n  // Admin endpoint to delete a user (DEVELOPMENT ONLY - for testing/cleanup)\n  app.delete(\"/api/auth/admin/user/:email\", async (req, res) => {\n    // Only allow in development\n    if (process.env.NODE_ENV === \"production\") {\n      return res.status(403).json({ message: \"Forbidden in production\" });\n    }\n    \n    try {\n      const { email } = req.params;\n      \n      // Find user in Supabase\n      const { data: { users }, error: listError } = await supabaseAdmin.auth.admin.listUsers();\n      if (listError) {\n        return res.status(500).json({ message: listError.message });\n      }\n      \n      const supabaseUser = users.find(u => u.email === email);\n      if (supabaseUser) {\n        // Delete from Supabase\n        const { error: deleteError } = await supabaseAdmin.auth.admin.deleteUser(supabaseUser.id);\n        if (deleteError) {\n          console.error(\"Supabase delete error:\", deleteError);\n        }\n        \n        // Delete from our database\n        await storage.deleteUser(supabaseUser.id);\n      }\n      \n      res.json({ message: \"User deleted successfully\" });\n    } catch (error: any) {\n      console.error(\"Delete user error:\", error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/auth/signup\", authLimiter, async (req, res) => {\n    try {\n      const { email, password, firstName, lastName } = req.body;\n\n      if (!email || !password) {\n        return res.status(400).json({ message: \"Email and password are required\" });\n      }\n\n      const { data, error } = await supabaseAdmin.auth.admin.createUser({\n        email,\n        password,\n        email_confirm: true,\n        user_metadata: {\n          first_name: firstName,\n          last_name: lastName,\n        },\n      });\n\n      if (error) {\n        return res.status(400).json({ message: error.message });\n      }\n\n      await storage.upsertUser({\n        id: data.user.id,\n        email: data.user.email || null,\n        firstName: firstName || null,\n        lastName: lastName || null,\n        profileImageUrl: null,\n      });\n\n      const { data: signInData, error: signInError } = await supabaseAdmin.auth.admin.generateLink({\n        type: 'magiclink',\n        email,\n      });\n\n      if (signInError) {\n        const { data: sessionData } = await supabase.auth.signInWithPassword({\n          email,\n          password,\n        });\n        \n        if (sessionData.session) {\n          return res.json({ \n            user: data.user,\n            session: sessionData.session,\n          });\n        }\n      }\n\n      res.json({ \n        user: data.user,\n        message: \"Account created successfully. Please sign in.\",\n      });\n    } catch (error: any) {\n      console.error(\"Signup error:\", error);\n      res.status(500).json({ message: \"Failed to create account\" });\n    }\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req: any, res, next) => {\n  try {\n    const authHeader = req.headers.authorization;\n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return res.status(401).json({ message: \"Unauthorized\" });\n    }\n\n    const token = authHeader.split(' ')[1];\n    const { data: { user }, error } = await supabase.auth.getUser(token);\n\n    if (error || !user) {\n      return res.status(401).json({ message: \"Unauthorized\" });\n    }\n\n    req.user = {\n      claims: {\n        sub: user.id,\n        email: user.email,\n      }\n    };\n    \n    next();\n  } catch (error) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n};\n","path":null,"size_bytes":8906,"size_tokens":null},"client/src/pages/PrivacyPolicy.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { ArrowLeft } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\n\nexport default function PrivacyPolicy() {\n  const { language } = useLanguage();\n  const [, setLocation] = useLocation();\n\n  return (\n    <div className=\"min-h-full bg-white\">\n      <div className=\"sticky top-0 bg-white border-b border-gray-100 px-4 py-3 flex items-center gap-3 z-10\">\n        <button onClick={() => setLocation(\"/\")} className=\"p-2 -ml-2\" data-testid=\"button-back\">\n          <ArrowLeft size={24} className=\"text-gray-700\" />\n        </button>\n        <h1 className=\"text-lg font-bold text-gray-900\">\n          {language === \"it\" ? \"Privacy Policy\" : \"Privacy Policy\"}\n        </h1>\n      </div>\n\n      <div className=\"p-6 space-y-6\">\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"1. Raccolta dei Dati\" : \"1. Data Collection\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Raccogliamo le informazioni che ci fornisci durante la registrazione e l'utilizzo dell'app, inclusi: nome, email, foto del profilo, preferenze di ricerca e informazioni sugli immobili.\"\n              : \"We collect information you provide during registration and app usage, including: name, email, profile photos, search preferences, and property information.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"2. Utilizzo dei Dati\" : \"2. Use of Data\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"I tuoi dati vengono utilizzati per: fornire e migliorare il servizio, facilitare la comunicazione tra utenti, personalizzare l'esperienza nell'app e garantire la sicurezza della piattaforma.\"\n              : \"Your data is used to: provide and improve the service, facilitate communication between users, personalize the app experience, and ensure platform security.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"3. Condivisione dei Dati\" : \"3. Data Sharing\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"I tuoi dati del profilo sono visibili ad altri utenti dell'app. Non vendiamo i tuoi dati personali a terze parti. Potremmo condividere dati con fornitori di servizi che ci aiutano a operare la piattaforma.\"\n              : \"Your profile data is visible to other app users. We do not sell your personal data to third parties. We may share data with service providers who help us operate the platform.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"4. Sicurezza dei Dati\" : \"4. Data Security\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Utilizziamo misure di sicurezza tecniche e organizzative per proteggere i tuoi dati, inclusa la crittografia delle comunicazioni e l'archiviazione sicura.\"\n              : \"We use technical and organizational security measures to protect your data, including communication encryption and secure storage.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"5. I Tuoi Diritti\" : \"5. Your Rights\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Hai il diritto di: accedere ai tuoi dati, richiedere la correzione di dati inesatti, richiedere la cancellazione dei tuoi dati e opporti al trattamento dei tuoi dati.\"\n              : \"You have the right to: access your data, request correction of inaccurate data, request deletion of your data, and object to the processing of your data.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"6. Cookie e Tecnologie Simili\" : \"6. Cookies and Similar Technologies\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Utilizziamo cookie e tecnologie simili per mantenere la tua sessione di accesso e migliorare l'esperienza nell'app.\"\n              : \"We use cookies and similar technologies to maintain your login session and improve the app experience.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"7. Conservazione dei Dati\" : \"7. Data Retention\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Conserviamo i tuoi dati per tutto il tempo in cui mantieni un account attivo. Dopo la cancellazione dell'account, i dati vengono rimossi entro 30 giorni.\"\n              : \"We retain your data for as long as you maintain an active account. After account deletion, data is removed within 30 days.\"}\n          </p>\n        </section>\n\n        <section>\n          <h2 className=\"text-xl font-bold text-gray-900 mb-3\">\n            {language === \"it\" ? \"8. Contatti\" : \"8. Contact\"}\n          </h2>\n          <p className=\"text-gray-600 leading-relaxed\">\n            {language === \"it\"\n              ? \"Per domande sulla privacy o per esercitare i tuoi diritti, contattaci all'indirizzo email di supporto.\"\n              : \"For privacy questions or to exercise your rights, contact us at the support email address.\"}\n          </p>\n        </section>\n\n        <p className=\"text-sm text-gray-400 pt-6\">\n          {language === \"it\" ? \"Ultimo aggiornamento: Dicembre 2025\" : \"Last updated: December 2025\"}\n        </p>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6038,"size_tokens":null},"client/public/sw.js":{"content":"self.addEventListener('push', (event) => {\n  console.log('Push received:', event);\n  \n  let data = {\n    title: 'Tenant',\n    body: 'You have a new notification',\n    icon: '/icon-192.png',\n    url: '/'\n  };\n\n  if (event.data) {\n    try {\n      data = event.data.json();\n    } catch (e) {\n      console.error('Failed to parse push data:', e);\n    }\n  }\n\n  const options = {\n    body: data.body,\n    icon: data.icon || '/icon-192.png',\n    badge: data.badge || '/icon-72.png',\n    vibrate: [200, 100, 200],\n    data: {\n      url: data.url || '/',\n      dateOfArrival: Date.now()\n    },\n    requireInteraction: false\n  };\n\n  event.waitUntil(\n    self.registration.showNotification(data.title, options)\n  );\n});\n\nself.addEventListener('notificationclick', (event) => {\n  console.log('Notification clicked:', event);\n  \n  event.notification.close();\n\n  const urlToOpen = event.notification.data?.url || '/';\n  \n  event.waitUntil(\n    clients.matchAll({ type: 'window', includeUncontrolled: true })\n      .then((clientList) => {\n        for (let client of clientList) {\n          if (client.url.includes(urlToOpen) && 'focus' in client) {\n            return client.focus();\n          }\n        }\n        if (clients.openWindow) {\n          return clients.openWindow(urlToOpen);\n        }\n      })\n  );\n});\n","path":null,"size_bytes":1301,"size_tokens":null},"client/src/pages/Paywall.tsx":{"content":"import { useLanguage } from \"@/lib/i18n\";\nimport { motion } from \"framer-motion\";\nimport { Crown, Check, Sparkles, Heart, Eye, MessageCircle, Loader2 } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface PaywallProps {\n  onSkip?: () => void;\n  reason?: \"signup\" | \"swipe_limit\";\n}\n\nconst PRICE_IDS = {\n  monthly: import.meta.env.VITE_STRIPE_MONTHLY_PRICE_ID || \"price_monthly\",\n  yearly: import.meta.env.VITE_STRIPE_YEARLY_PRICE_ID || \"price_yearly\",\n};\n\nexport default function Paywall({ onSkip, reason = \"signup\" }: PaywallProps) {\n  const { language } = useLanguage();\n  const [, setLocation] = useLocation();\n  const [selectedPlan, setSelectedPlan] = useState<\"monthly\" | \"yearly\" | null>(null);\n  const { toast } = useToast();\n  \n  const { data: user } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: api.getMe,\n  });\n\n  const checkoutMutation = useMutation({\n    mutationFn: (priceId: string) => api.createCheckoutSession(priceId),\n    onSuccess: (data) => {\n      if (data.url) {\n        window.location.href = data.url;\n      }\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"it\" ? \"Errore\" : \"Error\",\n        description: error.message || (language === \"it\" ? \"Si e verificato un errore\" : \"An error occurred\"),\n        variant: \"destructive\",\n      });\n      setSelectedPlan(null);\n    },\n  });\n\n  const texts = {\n    title: language === \"it\" ? \"Passa a Premium\" : \"Upgrade to Premium\",\n    subtitle: language === \"it\" \n      ? \"Sblocca tutte le funzionalita per trovare la casa dei tuoi sogni\"\n      : \"Unlock all features to find your dream home\",\n    swipeLimitTitle: language === \"it\" ? \"Hai esaurito gli swipe gratuiti!\" : \"You've run out of free swipes!\",\n    swipeLimitSubtitle: language === \"it\"\n      ? \"Passa a Premium per swipe illimitati e altre funzionalita esclusive\"\n      : \"Upgrade to Premium for unlimited swipes and exclusive features\",\n    monthly: language === \"it\" ? \"Mensile\" : \"Monthly\",\n    yearly: language === \"it\" ? \"Annuale\" : \"Yearly\",\n    popular: language === \"it\" ? \"Piu popolare\" : \"Most Popular\",\n    save: language === \"it\" ? \"Risparmi il 40%\" : \"Save 40%\",\n    continue: language === \"it\" ? \"Continua\" : \"Continue\",\n    skip: language === \"it\" ? \"Continua gratis (funzionalita limitate)\" : \"Continue free (limited features)\",\n    restorePurchase: language === \"it\" ? \"Ripristina acquisti\" : \"Restore Purchase\",\n  };\n\n  const features = [\n    {\n      icon: Sparkles,\n      title: language === \"it\" ? \"Swipe illimitati\" : \"Unlimited Swipes\",\n      description: language === \"it\" ? \"Nessun limite giornaliero\" : \"No daily limits\",\n    },\n    {\n      icon: Heart,\n      title: language === \"it\" ? \"Vedi chi ti ha messo like\" : \"See Who Liked You\",\n      description: language === \"it\" ? \"Scopri subito i tuoi match\" : \"Find your matches instantly\",\n    },\n    {\n      icon: Eye,\n      title: language === \"it\" ? \"Visualizzazioni prioritarie\" : \"Priority Views\",\n      description: language === \"it\" ? \"Il tuo profilo in evidenza\" : \"Your profile gets more visibility\",\n    },\n    {\n      icon: MessageCircle,\n      title: language === \"it\" ? \"Messaggi illimitati\" : \"Unlimited Messages\",\n      description: language === \"it\" ? \"Chatta senza limiti\" : \"Chat without limits\",\n    },\n  ];\n\n  const handleSubscribe = async (plan: \"monthly\" | \"yearly\") => {\n    setSelectedPlan(plan);\n    const priceId = PRICE_IDS[plan];\n    checkoutMutation.mutate(priceId);\n  };\n\n  const handleSkip = () => {\n    if (onSkip) {\n      onSkip();\n    } else {\n      const role = user?.role || \"tenant\";\n      setLocation(`/${role}`);\n    }\n  };\n\n  return (\n    <div className=\"min-h-full bg-gradient-to-b from-blue-50 to-white flex flex-col\">\n      <div className=\"flex-1 p-6 flex flex-col\">\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center mb-6\"\n        >\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full mb-4 shadow-lg\">\n            <Crown className=\"w-8 h-8 text-white\" />\n          </div>\n          <h1 className=\"text-2xl font-black text-gray-900 mb-2\">\n            {reason === \"swipe_limit\" ? texts.swipeLimitTitle : texts.title}\n          </h1>\n          <p className=\"text-gray-600\">\n            {reason === \"swipe_limit\" ? texts.swipeLimitSubtitle : texts.subtitle}\n          </p>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"space-y-3 mb-6\"\n        >\n          {features.map((feature, index) => (\n            <div\n              key={index}\n              className=\"flex items-center gap-4 bg-white p-4 rounded-2xl shadow-sm border border-gray-100\"\n            >\n              <div className=\"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center\">\n                <feature.icon className=\"w-5 h-5 text-blue-600\" />\n              </div>\n              <div>\n                <h3 className=\"font-bold text-gray-900\">{feature.title}</h3>\n                <p className=\"text-sm text-gray-500\">{feature.description}</p>\n              </div>\n              <Check className=\"w-5 h-5 text-green-500 ml-auto\" />\n            </div>\n          ))}\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"space-y-3 mb-6\"\n        >\n          <button\n            onClick={() => handleSubscribe(\"yearly\")}\n            disabled={checkoutMutation.isPending}\n            className=\"w-full relative bg-gradient-to-r from-blue-500 to-blue-600 text-white p-5 rounded-2xl shadow-lg disabled:opacity-70\"\n            data-testid=\"button-subscribe-yearly\"\n          >\n            <span className=\"absolute -top-2 right-4 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full\">\n              {texts.save}\n            </span>\n            <div className=\"flex justify-between items-center\">\n              <div className=\"text-left\">\n                <div className=\"font-bold text-lg\">{texts.yearly}</div>\n                <div className=\"text-blue-200 text-sm\">12 {language === \"it\" ? \"mesi\" : \"months\"}</div>\n              </div>\n              <div className=\"text-right flex items-center gap-2\">\n                {selectedPlan === \"yearly\" && checkoutMutation.isPending && (\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                )}\n                <div>\n                  <div className=\"font-black text-2xl\">€7.99<span className=\"text-sm font-normal\">/{language === \"it\" ? \"mese\" : \"mo\"}</span></div>\n                  <div className=\"text-blue-200 text-sm line-through\">€12.99/{language === \"it\" ? \"mese\" : \"mo\"}</div>\n                </div>\n              </div>\n            </div>\n          </button>\n\n          <button\n            onClick={() => handleSubscribe(\"monthly\")}\n            disabled={checkoutMutation.isPending}\n            className=\"w-full bg-white border-2 border-gray-200 p-5 rounded-2xl disabled:opacity-70\"\n            data-testid=\"button-subscribe-monthly\"\n          >\n            <div className=\"flex justify-between items-center\">\n              <div className=\"text-left\">\n                <div className=\"font-bold text-lg text-gray-900\">{texts.monthly}</div>\n                <div className=\"text-gray-500 text-sm\">1 {language === \"it\" ? \"mese\" : \"month\"}</div>\n              </div>\n              <div className=\"text-right flex items-center gap-2\">\n                {selectedPlan === \"monthly\" && checkoutMutation.isPending && (\n                  <Loader2 className=\"w-5 h-5 animate-spin text-blue-500\" />\n                )}\n                <div className=\"font-black text-2xl text-gray-900\">€12.99<span className=\"text-sm font-normal text-gray-500\">/{language === \"it\" ? \"mese\" : \"mo\"}</span></div>\n              </div>\n            </div>\n          </button>\n        </motion.div>\n\n        <div className=\"mt-auto space-y-3\">\n          <button\n            onClick={handleSkip}\n            className=\"w-full text-gray-500 py-3 text-sm\"\n            data-testid=\"button-skip-paywall\"\n          >\n            {texts.skip}\n          </button>\n          \n          <button\n            className=\"w-full text-blue-500 py-2 text-sm font-medium\"\n            data-testid=\"button-restore-purchase\"\n          >\n            {texts.restorePurchase}\n          </button>\n\n          <p className=\"text-center text-xs text-gray-400 px-4\">\n            {language === \"it\" \n              ? \"L'abbonamento si rinnova automaticamente. Puoi annullare in qualsiasi momento.\"\n              : \"Subscription auto-renews. Cancel anytime.\"}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":9032,"size_tokens":null},"server/pushService.ts":{"content":"import webpush from 'web-push';\nimport { storage } from './storage';\nimport type { PushSubscription } from '@shared/schema';\n\nconst VAPID_SUBJECT = 'mailto:support@tenant.app';\n\nclass PushService {\n  private initialized = false;\n\n  async init() {\n    if (this.initialized) return;\n\n    const publicKey = process.env.VAPID_PUBLIC_KEY;\n    const privateKey = process.env.VAPID_PRIVATE_KEY;\n\n    if (!publicKey || !privateKey) {\n      console.warn('VAPID keys not configured. Push notifications disabled.');\n      return;\n    }\n\n    webpush.setVapidDetails(VAPID_SUBJECT, publicKey, privateKey);\n    this.initialized = true;\n    console.log('Push notifications initialized');\n  }\n\n  getPublicKey(): string | null {\n    return process.env.VAPID_PUBLIC_KEY || null;\n  }\n\n  async sendNotification(userId: string, payload: {\n    title: string;\n    body: string;\n    icon?: string;\n    url?: string;\n    data?: Record<string, unknown>;\n  }) {\n    if (!this.initialized) {\n      await this.init();\n    }\n\n    if (!this.initialized) {\n      console.warn('Push not initialized, skipping notification');\n      return;\n    }\n\n    const subscriptions = await storage.getUserPushSubscriptions(userId);\n    \n    const notificationPayload = JSON.stringify({\n      title: payload.title,\n      body: payload.body,\n      icon: payload.icon || '/icon-192.png',\n      badge: '/icon-72.png',\n      url: payload.url || '/',\n      data: payload.data || {},\n    });\n\n    const results = await Promise.allSettled(\n      subscriptions.map(async (sub: PushSubscription) => {\n        try {\n          await webpush.sendNotification(\n            {\n              endpoint: sub.endpoint,\n              keys: {\n                p256dh: sub.p256dh,\n                auth: sub.auth,\n              },\n            },\n            notificationPayload\n          );\n        } catch (error: unknown) {\n          const err = error as { statusCode?: number };\n          if (err.statusCode === 410 || err.statusCode === 404) {\n            await storage.deletePushSubscription(sub.id);\n          }\n          throw error;\n        }\n      })\n    );\n\n    const succeeded = results.filter((r: PromiseSettledResult<void>) => r.status === 'fulfilled').length;\n    const failed = results.filter((r: PromiseSettledResult<void>) => r.status === 'rejected').length;\n    \n    console.log(`Push sent to ${userId}: ${succeeded} succeeded, ${failed} failed`);\n  }\n\n  async notifyNewMatch(userId: string, matchedUserName: string) {\n    await this.sendNotification(userId, {\n      title: 'New Match! 🎉',\n      body: `You matched with ${matchedUserName}!`,\n      url: '/tenant/matches',\n    });\n  }\n\n  async notifyNewMessage(userId: string, senderName: string, matchId: string) {\n    await this.sendNotification(userId, {\n      title: 'New Message 💬',\n      body: `${senderName} sent you a message`,\n      url: `/chat/${matchId}`,\n    });\n  }\n}\n\nexport const pushService = new PushService();\n","path":null,"size_bytes":2931,"size_tokens":null},"capacitor.config.ts":{"content":"import type { CapacitorConfig } from '@capacitor/cli';\n\nconst config: CapacitorConfig = {\n  appId: 'app.tenant.rental',\n  appName: 'Tenant',\n  webDir: 'dist/public',\n  server: {\n    androidScheme: 'https',\n  },\n  plugins: {\n    SplashScreen: {\n      launchShowDuration: 2000,\n      launchAutoHide: true,\n      backgroundColor: '#3B82F6',\n      showSpinner: false,\n      androidSpinnerStyle: 'small',\n      iosSpinnerStyle: 'small',\n      splashFullScreen: true,\n      splashImmersive: true,\n    },\n    StatusBar: {\n      style: 'dark',\n      backgroundColor: '#3B82F6',\n    },\n    PushNotifications: {\n      presentationOptions: ['badge', 'sound', 'alert'],\n    },\n  },\n};\n\nexport default config;\n","path":null,"size_bytes":697,"size_tokens":null},"scripts/seed-products.ts":{"content":"import { getUncachableStripeClient } from '../server/stripeClient';\n\nasync function createProducts() {\n  const stripe = await getUncachableStripeClient();\n\n  console.log('Creating Tenant Premium subscription products...');\n\n  // Check if products already exist\n  const existingProducts = await stripe.products.search({\n    query: \"name:'Tenant Premium'\"\n  });\n\n  if (existingProducts.data.length > 0) {\n    console.log('Products already exist, skipping creation');\n    console.log('Existing products:', existingProducts.data.map(p => ({ id: p.id, name: p.name })));\n    return;\n  }\n\n  // Create the Premium product\n  const product = await stripe.products.create({\n    name: 'Tenant Premium',\n    description: 'Unlimited swipes, see who liked you, priority views, and unlimited messages',\n    metadata: {\n      app: 'tenant',\n      type: 'subscription',\n    },\n  });\n\n  console.log('Created product:', product.id);\n\n  // Create monthly price\n  const monthlyPrice = await stripe.prices.create({\n    product: product.id,\n    unit_amount: 1299, // €12.99\n    currency: 'eur',\n    recurring: { interval: 'month' },\n    metadata: {\n      plan: 'monthly',\n    },\n  });\n\n  console.log('Created monthly price:', monthlyPrice.id, '- €12.99/month');\n\n  // Create yearly price (€7.99/month billed annually = €95.88/year)\n  const yearlyPrice = await stripe.prices.create({\n    product: product.id,\n    unit_amount: 9588, // €95.88/year (€7.99 x 12)\n    currency: 'eur',\n    recurring: { interval: 'year' },\n    metadata: {\n      plan: 'yearly',\n      monthly_equivalent: '7.99',\n    },\n  });\n\n  console.log('Created yearly price:', yearlyPrice.id, '- €95.88/year (€7.99/month)');\n\n  console.log('\\n✅ Products created successfully!');\n  console.log('\\nAdd these price IDs to your frontend:');\n  console.log('Monthly:', monthlyPrice.id);\n  console.log('Yearly:', yearlyPrice.id);\n}\n\ncreateProducts().catch(console.error);\n","path":null,"size_bytes":1925,"size_tokens":null},"client/src/pages/ChatRoom.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { useLocation, useParams } from \"wouter\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport { ArrowLeft, Send, MoreVertical, Flag, Ban } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function ChatRoom() {\n  const { id: matchId } = useParams<{ id: string }>();\n  const { language } = useLanguage();\n  const [, setLocation] = useLocation();\n  const [message, setMessage] = useState(\"\");\n  const [showReportDialog, setShowReportDialog] = useState(false);\n  const [reportReason, setReportReason] = useState(\"\");\n  const [otherUserId, setOtherUserId] = useState<string | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n\n  const { data: currentUser } = useQuery({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: api.getMe,\n  });\n\n  const { data: matchData } = useQuery({\n    queryKey: [\"match\", matchId],\n    queryFn: () => api.getMatch(matchId!),\n    enabled: !!matchId,\n  });\n\n  const { data: messages = [], refetch } = useQuery({\n    queryKey: [\"messages\", matchId],\n    queryFn: () => api.getMatchMessages(matchId!),\n    enabled: !!matchId,\n    refetchInterval: 3000,\n  });\n\n  const sendMutation = useMutation({\n    mutationFn: (content: string) => api.sendMessage(matchId!, content),\n    onSuccess: () => {\n      setMessage(\"\");\n      refetch();\n    },\n  });\n\n  const reportMutation = useMutation({\n    mutationFn: (data: { reportedUserId: string; reason: string; description?: string }) =>\n      api.reportUser(data.reportedUserId, data.reason, data.description),\n    onSuccess: () => {\n      setShowReportDialog(false);\n      setReportReason(\"\");\n      toast({\n        title: language === \"it\" ? \"Segnalazione inviata\" : \"Report submitted\",\n        description: language === \"it\" ? \"Grazie per la segnalazione\" : \"Thank you for your report\",\n      });\n    },\n  });\n\n  const blockMutation = useMutation({\n    mutationFn: (blockedId: string) => api.blockUser(blockedId),\n    onSuccess: () => {\n      toast({\n        title: language === \"it\" ? \"Utente bloccato\" : \"User blocked\",\n      });\n      setLocation(-1);\n    },\n  });\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  useEffect(() => {\n    if (matchData?.otherUserId) {\n      setOtherUserId(matchData.otherUserId);\n    } else if (messages.length > 0 && currentUser) {\n      const otherMsg = messages.find(m => m.senderId !== currentUser.id);\n      if (otherMsg) setOtherUserId(otherMsg.senderId);\n    }\n  }, [matchData, messages, currentUser]);\n\n  const handleSend = () => {\n    if (message.trim()) {\n      sendMutation.mutate(message.trim());\n    }\n  };\n\n  const handleReport = () => {\n    if (otherUserId && reportReason) {\n      reportMutation.mutate({\n        reportedUserId: otherUserId,\n        reason: reportReason,\n      });\n    }\n  };\n\n  const handleBlock = () => {\n    if (otherUserId) {\n      blockMutation.mutate(otherUserId);\n    }\n  };\n\n  const texts = {\n    typeMessage: language === \"it\" ? \"Scrivi un messaggio...\" : \"Type a message...\",\n    report: language === \"it\" ? \"Segnala utente\" : \"Report user\",\n    block: language === \"it\" ? \"Blocca utente\" : \"Block user\",\n    reportTitle: language === \"it\" ? \"Segnala questo utente\" : \"Report this user\",\n    reportPlaceholder: language === \"it\" ? \"Descrivi il problema...\" : \"Describe the issue...\",\n    cancel: language === \"it\" ? \"Annulla\" : \"Cancel\",\n    submit: language === \"it\" ? \"Invia segnalazione\" : \"Submit report\",\n  };\n\n  return (\n    <div className=\"min-h-full bg-gray-50 flex flex-col\">\n      <header className=\"fixed top-0 left-0 right-0 h-14 bg-white z-40 flex items-center justify-between px-4 border-b border-gray-100\">\n        <button onClick={() => setLocation(-1)} className=\"p-2 -ml-2\" data-testid=\"button-back\">\n          <ArrowLeft size={24} className=\"text-gray-700\" />\n        </button>\n        <h1 className=\"text-lg font-bold text-gray-900\">Chat</h1>\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <button className=\"p-2 -mr-2\" data-testid=\"button-menu\">\n              <MoreVertical size={24} className=\"text-gray-700\" />\n            </button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\">\n            <DropdownMenuItem onClick={() => setShowReportDialog(true)} data-testid=\"button-report\">\n              <Flag className=\"mr-2 h-4 w-4\" />\n              {texts.report}\n            </DropdownMenuItem>\n            <DropdownMenuItem onClick={handleBlock} className=\"text-red-600\" data-testid=\"button-block\">\n              <Ban className=\"mr-2 h-4 w-4\" />\n              {texts.block}\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </header>\n\n      <main className=\"flex-1 pt-14 pb-20 px-4 overflow-y-auto\">\n        <div className=\"space-y-3 py-4\">\n          {messages.map((msg, index) => {\n            const isOwn = msg.senderId === currentUser?.id;\n            return (\n              <motion.div\n                key={msg.id}\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: index * 0.05 }}\n                className={`flex ${isOwn ? \"justify-end\" : \"justify-start\"}`}\n              >\n                <div\n                  className={`max-w-[75%] px-4 py-2 rounded-2xl ${\n                    isOwn\n                      ? \"bg-blue-500 text-white rounded-br-md\"\n                      : \"bg-white text-gray-900 rounded-bl-md shadow-sm\"\n                  }`}\n                  data-testid={`message-${msg.id}`}\n                >\n                  <p className=\"text-sm\">{msg.content}</p>\n                  <p className={`text-xs mt-1 ${isOwn ? \"text-blue-100\" : \"text-gray-400\"}`}>\n                    {new Date(msg.createdAt!).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })}\n                  </p>\n                </div>\n              </motion.div>\n            );\n          })}\n          <div ref={messagesEndRef} />\n        </div>\n      </main>\n\n      <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 p-4\">\n        <div className=\"flex items-center gap-3\">\n          <input\n            type=\"text\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            onKeyDown={(e) => e.key === \"Enter\" && handleSend()}\n            placeholder={texts.typeMessage}\n            className=\"flex-1 px-4 py-3 bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            data-testid=\"input-message\"\n          />\n          <button\n            onClick={handleSend}\n            disabled={!message.trim() || sendMutation.isPending}\n            className=\"w-12 h-12 bg-blue-500 text-white rounded-full flex items-center justify-center disabled:opacity-50\"\n            data-testid=\"button-send\"\n          >\n            <Send size={20} />\n          </button>\n        </div>\n      </div>\n\n      <Dialog open={showReportDialog} onOpenChange={setShowReportDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>{texts.reportTitle}</DialogTitle>\n          </DialogHeader>\n          <Textarea\n            value={reportReason}\n            onChange={(e) => setReportReason(e.target.value)}\n            placeholder={texts.reportPlaceholder}\n            rows={4}\n            data-testid=\"input-report-reason\"\n          />\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowReportDialog(false)}>\n              {texts.cancel}\n            </Button>\n            <Button onClick={handleReport} disabled={!reportReason.trim()}>\n              {texts.submit}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","path":null,"size_bytes":8382,"size_tokens":null},"client/src/lib/pushNotifications.ts":{"content":"import { api } from './api';\n\nfunction urlBase64ToUint8Array(base64String: string): Uint8Array {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+')\n    .replace(/_/g, '/');\n  \n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n  \n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport async function initializePushNotifications(): Promise<boolean> {\n  if (!('serviceWorker' in navigator) || !('PushManager' in window)) {\n    console.log('Push notifications not supported');\n    return false;\n  }\n\n  try {\n    const registration = await navigator.serviceWorker.register('/sw.js', {\n      scope: '/'\n    });\n    console.log('Service worker registered');\n\n    await navigator.serviceWorker.ready;\n\n    const permission = await Notification.requestPermission();\n    if (permission !== 'granted') {\n      console.log('Notification permission denied');\n      return false;\n    }\n\n    const publicKey = import.meta.env.VITE_VAPID_PUBLIC_KEY;\n    if (!publicKey) {\n      console.error('VAPID public key not configured');\n      return false;\n    }\n\n    const subscription = await registration.pushManager.subscribe({\n      userVisibleOnly: true,\n      applicationServerKey: urlBase64ToUint8Array(publicKey)\n    });\n\n    const subJson = subscription.toJSON();\n    \n    await api.subscribeToPush({\n      endpoint: subscription.endpoint,\n      p256dh: subJson.keys?.p256dh || '',\n      auth: subJson.keys?.auth || '',\n    });\n\n    console.log('Push subscription successful');\n    return true;\n  } catch (error) {\n    console.error('Failed to initialize push notifications:', error);\n    return false;\n  }\n}\n\nexport async function unsubscribeFromPush(): Promise<boolean> {\n  try {\n    const registration = await navigator.serviceWorker.ready;\n    const subscription = await registration.pushManager.getSubscription();\n    \n    if (subscription) {\n      await subscription.unsubscribe();\n      await api.unsubscribeFromPush(subscription.endpoint);\n    }\n    \n    return true;\n  } catch (error) {\n    console.error('Failed to unsubscribe:', error);\n    return false;\n  }\n}\n\nexport function isPushSupported(): boolean {\n  return 'serviceWorker' in navigator && 'PushManager' in window;\n}\n\nexport async function getPushPermissionState(): Promise<NotificationPermission> {\n  if (!('Notification' in window)) {\n    return 'denied';\n  }\n  return Notification.permission;\n}\n","path":null,"size_bytes":2545,"size_tokens":null},"client/src/lib/capacitorPush.ts":{"content":"import { Capacitor } from '@capacitor/core';\nimport { PushNotifications } from '@capacitor/push-notifications';\nimport { api } from './api';\n\nexport async function initializeCapacitorPush(): Promise<boolean> {\n  if (!Capacitor.isNativePlatform()) {\n    return false;\n  }\n\n  try {\n    const permResult = await PushNotifications.requestPermissions();\n    if (permResult.receive !== 'granted') {\n      console.log('Push notifications permission denied');\n      return false;\n    }\n\n    await PushNotifications.register();\n\n    PushNotifications.addListener('registration', async (token) => {\n      console.log('Push registration token:', token.value);\n      await api.subscribeToPush({\n        endpoint: `capacitor://${Capacitor.getPlatform()}/${token.value}`,\n        p256dh: token.value,\n        auth: token.value,\n      });\n    });\n\n    PushNotifications.addListener('registrationError', (error) => {\n      console.error('Push registration error:', error);\n    });\n\n    PushNotifications.addListener('pushNotificationReceived', (notification) => {\n      console.log('Push notification received:', notification);\n    });\n\n    PushNotifications.addListener('pushNotificationActionPerformed', (notification) => {\n      console.log('Push notification action:', notification);\n      const url = notification.notification.data?.url;\n      if (url) {\n        window.location.href = url;\n      }\n    });\n\n    return true;\n  } catch (error) {\n    console.error('Failed to initialize Capacitor push:', error);\n    return false;\n  }\n}\n\nexport function isCapacitorPlatform(): boolean {\n  return Capacitor.isNativePlatform();\n}\n","path":null,"size_bytes":1615,"size_tokens":null}},"version":2}